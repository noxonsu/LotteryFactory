(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{52837:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return t(98562)}])},98562:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Re}});var a=t(47568),i=t(26042),s=t(34051),r=t.n(s),o=t(85893),c=t(44431),l=t.n(c),d=t(214),u=t.n(d),h=t(44423),m=t(11163),f=[{id:"index",title:"Home",link:"index"},{id:"settings",title:"Settings",link:"settings",adminOnly:!0}],p=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,m.useRouter)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("nav",{className:"".concat(u().mainNav," headerNavMenu"),children:f.map((function(t){return t.adminOnly&&!n?null:(0,o.jsx)("a",{className:e===t.id?"".concat(u().active," headerNavActive"):"",href:(0,h.R)(t.link),children:t.title},t.id)}))}),(0,o.jsx)("div",{className:u().mainNavSeperator})]})},x=t(14924),v=t(69396),y=t(67294),b=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.notEmpty,a=!1;t&&""===e&&(a=!0);var i=(0,y.useState)(e),s=i[0],r=i[1],o=(0,y.useState)(a),c=o[0],l=o[1],d=function(e){var n=e;(null===e||void 0===e?void 0:e.target)&&(n=e.target.value),l(!(!t||""!==n)),r(n)};return[s,d,c,l]},j=t(25364),g=t(73848),w=t(99603),k=t(59417);function T(e){var n=e.icon,t="fa-".concat(n).replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,n){return 0===n?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"").replaceAll("-","");return(0,o.jsx)(w.G,{icon:k[t]})}function N(e){var n=(0,i.Z)({onToggle:function(){}},e),t=n.title,a=n.isOpened,s=n.content,r=n.onToggle,c=n.key;return(0,o.jsxs)("div",{className:"".concat(u().adminToggleGroup," ").concat(a?u().adminToggleGroupOpened:""),children:[(0,o.jsxs)("div",{className:u().adminToggleGroupHeader,onClick:function(){r(!a)},children:[(0,o.jsx)("h3",{children:t}),(0,o.jsx)("a",{children:(0,o.jsx)(T,{icon:a?"arrow-up":"arrow-down"})})]}),a&&(0,o.jsx)("div",{className:u().adminToggleGroupContent,children:s})]},c)}function S(e){var n=(0,i.Z)({href:"",title:"",icon:"up-right-from-square",onClick:function(){}},e),t=n.href,a=n.title,s=n.icon,r=n.onClick,c=n.target,l=n.disabled,d={className:"".concat(u().iconButton," ").concat(l?u().iconButtonDisabled:""),alt:a,title:a};return t&&(d.href=t),c&&(d.target=c),(0,o.jsx)("a",(0,v.Z)((0,i.Z)({},d),{onClick:function(){l||r()},children:(0,o.jsx)(T,{icon:s})}))}var C=t(52484),I=t(82670),A=t(66089),F=t.n(A),B=t(78967),R=t(64262),O=t(34617);function D(e){var n=(0,i.Z)({hasClose:!1,onClose:function(){}},e),t=n.title,a=n.isOpened,s=n.hasClose,r=n.onClose,c=n.children;return a?(0,o.jsx)("div",{className:u().adminPopupWindow,children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("h3",{children:[t,s&&(0,o.jsx)("a",{onClick:r,children:(0,o.jsx)(T,{icon:"close"})})]}),c]})}):null}function _(e){var n=(0,i.Z)({disabled:!1,chainId:1,className:"",action:"Save",onClick:function(){}},e),t=n.children,a=n.disabled,s=n.onClick,r=n.chainId,c=n.action,l=n.className,d=n.icon,h=(0,y.useState)(!1),m=h[0],f=h[1],p=(0,O.n)().storageChainId,x="STORAGE"==r?p:r,v=(0,y.useState)(!1),b=v[0],j=v[1],g=(0,B.BV)(),w=(0,I.Z)(x,Array),k=!w&&(0,R.T_)(x),N=!1;N=w?-1!==x.indexOf(Number("".concat(g))):"".concat(x)=="".concat(g);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{disabled:a||b,onClick:function(){N?s():w?f(!0):(j(!0),(0,B.M5)(x).then((function(e){j(!1),e&&s()})).catch((function(e){j(!1)})))},className:l,children:[d&&(0,o.jsx)(T,{icon:d}),N?(0,o.jsx)(o.Fragment,{children:t}):(0,o.jsx)(o.Fragment,{children:b?(0,o.jsx)(o.Fragment,{children:w?"Switching...":"Switching to ".concat(k.chainName," (").concat(x,")...")}):(0,o.jsx)(o.Fragment,{children:w?"Switch network for ".concat(c):"Switch to ".concat(k.chainName," (").concat(x,") for ").concat(c)})})]}),w&&(0,o.jsxs)(D,{hasClose:!0,isOpened:m,onClose:function(){f(!1)},title:"Switch network for ".concat(c),children:[(0,o.jsx)(F(),{id:"4d48721f3162f416",children:".switchNetworkList.jsx-4d48721f3162f416{padding:10px;padding-bottom:0px}.switchNetworkList.jsx-4d48721f3162f416 BUTTON.jsx-4d48721f3162f416{margin-left:0px;width:100%;margin-bottom:10px}"}),(0,o.jsx)("div",{className:"jsx-4d48721f3162f416 switchNetworkList",children:x.map((function(e){var n=(0,R.T_)(e);return(0,o.jsx)("button",{disabled:b,onClick:function(){!function(e){j(!0),(0,B.M5)(e).then((function(e){j(!1),e&&(f(!1),s())})).catch((function(e){j(!1)}))}(e)},className:"jsx-4d48721f3162f416 "+(u().adminButton||""),children:b?"Switching...":"Switch to ".concat(n.chainName," (").concat(e,")")},e)}))})]})]})}function L(e){e.setDoReloadStorage;var n=e.saveStorageConfig,t=e.openConfirmWindow,a=e.addNotify,s=(e.getActiveChain,e.storageDesign),r=localStorage.getItem("-lotery-preview-mode"),c=localStorage.getItem("-lotery-preview-design");try{c=JSON.parse(c),c=(0,i.Z)({},j.$,c)}catch(Z){c=j.$}var l=(0,y.useState)(null!==r),d=l[0],h=l[1],m=(0,i.Z)({},j.$,s),f=(0,y.useState)(r?c:m),p=f[0],b=f[1],w=(0,y.useState)(!1),k=w[0],I=w[1],A=function(e){var n=e.title,t=e.target,a=e.defValue;return(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[n,":"]}),(0,o.jsx)("span",{children:(0,o.jsx)("div",{children:(0,o.jsx)(C.ZP,{initialValue:p[t]?p[t]:a,onChange:function(e){b((function(n){return(0,v.Z)((0,i.Z)({},n),(0,x.Z)({},"".concat(t),e.hex))}))},placement:"right"})})})]})},F=function(e){var n=e.title,t=e.target,a=e.placeholder;return(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[n,":"]}),(0,o.jsx)("span",{children:(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{placeholder:a,type:"text",value:p[t],onChange:function(e){var n;n=e.target.value,b((function(e){return(0,v.Z)((0,i.Z)({},e),(0,x.Z)({},"".concat(t),n))}))}}),S({title:"Open in new tab",href:p[t],target:"_blank"})]})})]})},B=function(){t({title:"Switch to preview mode",message:"Switch to preview mode? You can look changes before save",onConfirm:function(){a("Preview mode on. Go to site for check it","success"),localStorage.setItem("-nft-stake-preview-mode",!0),localStorage.setItem("-nft-stake-preview-design",JSON.stringify(p)),h(!0)}})},R=function(){a("Preview mode turn off","success"),localStorage.removeItem("-nft-stake-preview-mode"),localStorage.removeItem("-nft-stake-preview-design"),h(!1)};(0,y.useEffect)((function(){d&&(localStorage.setItem("-nft-stake-preview-design",JSON.stringify(p)),localStorage.setItem("-nft-stake-preview-utx",(0,g.K)()))}),[p]);var O=function(){n({onBegin:function(){I(!0),R(),a("Confirm transaction for save changed design")},onReady:function(){I(!1),a("Design successfull saved","success")},onError:function(e){I(!1),a("Fail save design","error")},newData:{design:p}})},D=(0,y.useState)({}),L=D[0],E=D[1],M=function(e){E((function(n){return(0,v.Z)((0,i.Z)({},n),(0,x.Z)({},"".concat(e),!n[e]||!n[e]))}))};return{render:function(){return(0,o.jsxs)("div",{className:u().adminForm,children:[(0,o.jsx)("div",{className:u().adminSectionDescription,children:"This section is where you edit the appearance of your site."}),N({title:"Logo",isOpened:null===L||void 0===L?void 0:L.logoTab,onToggle:function(){M("logoTab")},content:(0,o.jsx)("div",{className:u().subFormInfo,children:(0,o.jsx)("div",{className:u().subForm,children:F({title:"URL",target:"logoUri"})})})}),N({title:"Base color",isOpened:null===L||void 0===L?void 0:L.baseColors,onToggle:function(){M("baseColors")},content:(0,o.jsx)("div",{className:u().subFormInfo,children:(0,o.jsxs)("div",{className:u().subForm,children:[A({title:"Background color",target:"backgroundColor"}),A({title:"Text color",target:"baseTextColor"}),A({title:"Secondary",target:"baseSecondaryColor",defValue:"#7645D9"}),A({title:"Subtitle color",target:"baseSubTitleColor",defValue:"#452A7A"})]})})}),N({title:"Header settings",isOpened:null===L||void 0===L?void 0:L.headerSection,onToggle:function(){M("headerSection")},content:(0,o.jsx)("div",{className:u().subFormInfo,children:(0,o.jsxs)("div",{className:u().subForm,children:[A({title:"Section title color",target:"headerTitleColor"}),A({title:"Background color 1",target:"headerBgColor1",defValue:"#7645D9"}),A({title:"Background color 2",target:"headerBgColor2",defValue:"#452A7A"})]})})}),N({title:"Buy tickets section",isOpened:null===L||void 0===L?void 0:L.buyTicketsSection,onToggle:function(){M("buyTicketsSection")},content:(0,o.jsx)("div",{className:u().subFormInfo,children:(0,o.jsxs)("div",{className:u().subForm,children:[A({title:"Section title color",target:"buyTicketTitleColor"}),A({title:"Background color 1",target:"buyTicketBgColor1",defValue:"#7645D9"}),A({title:"Background color 2",target:"buyTicketBgColor2",defValue:"#5121B1"})]})})}),N({title:"Price section",isOpened:null===L||void 0===L?void 0:L.priceSection,onToggle:function(){M("priceSection")},content:(0,o.jsx)("div",{className:u().subFormInfo,children:(0,o.jsxs)("div",{className:u().subForm,children:[A({title:"Section title color",target:"priceSectionTitleColor"}),A({title:"Background color 1",target:"priceSectionBgColor1",defValue:"#313D5C"}),A({title:"Background color 2",target:"priceSectionBgColor2",defValue:"#3D2A54"})]})})}),N({title:"Rounds history section",isOpened:null===L||void 0===L?void 0:L.roundsHistory,onToggle:function(){M("roundsHistory")},content:(0,o.jsx)("div",{className:u().subFormInfo,children:(0,o.jsxs)("div",{className:u().subForm,children:[A({title:"Section title color",target:"roundsHistoryTitleColor"}),A({title:"Background color 1",target:"roundsHistoryBgColor1",defValue:"#CBD7EF"}),A({title:"Background color 2",target:"roundsHistoryBgColor2",defValue:"#9A9FD0"})]})})}),N({title:"How to play settings",isOpened:null===L||void 0===L?void 0:L.howToPlay,onToggle:function(){M("howToPlay")},content:(0,o.jsx)("div",{className:u().subFormInfo,children:(0,o.jsxs)("div",{className:u().subForm,children:[A({title:"Section title",target:"howToPlayTitleColor"}),A({title:"Background color",target:"howToPlayBgColor",defValue:"#ffffff"})]})})}),(0,o.jsx)("div",{className:u().adminSectionDescription,children:"You can turn on the preview mode and look at the changes before saving them to the storage contract"}),(0,o.jsxs)("div",{className:u().actionsRowMain,children:[d?(0,o.jsxs)("button",{onClick:R,className:u().adminSubButton,children:[(0,o.jsx)(T,{icon:"eye-slash"}),"Turn off preview mode"]}):(0,o.jsxs)("button",{onClick:B,className:u().adminSubButton,children:[(0,o.jsx)(T,{icon:"eye"}),"Turn on preview mode"]}),(0,o.jsx)(_,{chainId:"STORAGE",disabled:k,onClick:O,action:"Save changes",icon:"save",className:u().adminSubButton,children:k?"Saving...":"Save changes"})]})]})}}}var E=t(64914),M=t.n(E),Z=t(3283),P=t.n(Z),K=function(e,n){return new Promise((function(t,a){var i=(0,R.T_)(n);if(i)try{var s=new(new(P())(i.rpcUrls[0]).eth.Contract)(M(),e);s.methods.decimals().call().then((function(i){s.methods.symbol().call().then((function(r){s.methods.name().call().then((function(a){t({address:e,chainId:n,decimals:i,symbol:r,name:a})})).catch((function(e){a(e)}))})).catch((function(e){a(e)}))})).catch((function(e){a(e)}))}catch(r){a(r)}else a("NOT_SUPPORTED_CHAIN")}))},Y=JSON.parse('{"Mt":[{"inputs":[{"internalType":"address","name":"_cakeTokenAddress","type":"address"},{"internalType":"bool","name":"_OnoutFeeEnabled","type":"bool"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"token","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"AdminTokenRecovery","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"lotteryId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"firstTicketIdNextLottery","type":"uint256"}],"name":"LotteryClose","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"lotteryId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"injectedAmount","type":"uint256"}],"name":"LotteryInjection","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"lotteryId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"finalNumber","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"countWinningTickets","type":"uint256"}],"name":"LotteryNumberDrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"lotteryId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"startTime","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"endTime","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"priceTicketInCake","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"firstTicketId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"injectedAmount","type":"uint256"}],"name":"LotteryOpen","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"address","name":"treasury","type":"address"},{"indexed":false,"internalType":"address","name":"injector","type":"address"}],"name":"NewOperatorAndTreasuryAndInjectorAddresses","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"claimer","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":true,"internalType":"uint256","name":"lotteryId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"numberTickets","type":"uint256"}],"name":"TicketsClaim","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"buyer","type":"address"},{"indexed":true,"internalType":"uint256","name":"lotteryId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"numberTickets","type":"uint256"}],"name":"TicketsPurchase","type":"event"},{"inputs":[],"name":"MAX_LENGTH_LOTTERY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_TREASURY_FEE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_DISCOUNT_DIVISOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_LENGTH_LOTTERY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"OnoutAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"OnoutFeeEnabled","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_lotteryId","type":"uint256"},{"internalType":"uint32[]","name":"_ticketNumbers","type":"uint32[]"}],"name":"buyTickets","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"cakeToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_discountDivisor","type":"uint256"},{"internalType":"uint256","name":"_priceTicket","type":"uint256"},{"internalType":"uint256","name":"_numberTickets","type":"uint256"}],"name":"calculateTotalPriceForBulkTickets","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"uint256","name":"_lotteryId","type":"uint256"},{"internalType":"uint256[]","name":"_ticketIds","type":"uint256[]"},{"internalType":"uint32[]","name":"_brackets","type":"uint32[]"}],"name":"claimTickets","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_lotteryId","type":"uint256"}],"name":"closeLottery","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"currentLotteryId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"currentTicketId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_lotteryId","type":"uint256"},{"internalType":"bytes32","name":"_seed","type":"bytes32"},{"internalType":"bool","name":"_autoInjection","type":"bool"}],"name":"drawFinalNumberAndMakeLotteryClaimable","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_lotteryId","type":"uint256"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"injectFunds","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"injectorAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxNumberTicketsPerBuyOrClaim","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxPriceTicketInCake","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"minPriceTicketInCake","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"numbersCount","outputs":[{"internalType":"uint32","name":"","type":"uint32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"operatorAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pendingInjectionNextLottery","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenAddress","type":"address"},{"internalType":"uint256","name":"_tokenAmount","type":"uint256"}],"name":"recoverWrongTokens","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxNumberTicketsPerBuy","type":"uint256"}],"name":"setMaxNumberTicketsPerBuy","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_minPriceTicketInCake","type":"uint256"},{"internalType":"uint256","name":"_maxPriceTicketInCake","type":"uint256"}],"name":"setMinAndMaxTicketPriceInCake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint32","name":"_numbersCount","type":"uint32"}],"name":"setNumbersCount","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_newFeeAddress","type":"address"}],"name":"setOnoutAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_value","type":"bool"}],"name":"setOnoutFeeEnabled","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_operatorAddress","type":"address"}],"name":"setOperatorAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_operatorAddress","type":"address"},{"internalType":"address","name":"_treasuryAddress","type":"address"},{"internalType":"address","name":"_injectorAddress","type":"address"}],"name":"setOperatorAndTreasuryAndInjectorAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_endTime","type":"uint256"},{"internalType":"uint256","name":"_priceTicketInCake","type":"uint256"},{"internalType":"uint256","name":"_discountDivisor","type":"uint256"},{"internalType":"uint256[6]","name":"_rewardsBreakdown","type":"uint256[6]"},{"internalType":"uint256","name":"_treasuryFee","type":"uint256"}],"name":"startLottery","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"treasuryAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"viewCurrentLotteryId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_lotteryId","type":"uint256"}],"name":"viewLottery","outputs":[{"components":[{"internalType":"enum PancakeSwapLottery.Status","name":"status","type":"uint8"},{"internalType":"uint256","name":"startTime","type":"uint256"},{"internalType":"uint256","name":"endTime","type":"uint256"},{"internalType":"uint256","name":"priceTicketInCake","type":"uint256"},{"internalType":"uint256","name":"discountDivisor","type":"uint256"},{"internalType":"uint256[6]","name":"rewardsBreakdown","type":"uint256[6]"},{"internalType":"uint256","name":"treasuryFee","type":"uint256"},{"internalType":"uint256[6]","name":"cakePerBracket","type":"uint256[6]"},{"internalType":"uint256[6]","name":"countWinnersPerBracket","type":"uint256[6]"},{"internalType":"uint256","name":"firstTicketId","type":"uint256"},{"internalType":"uint256","name":"firstTicketIdNextLottery","type":"uint256"},{"internalType":"uint256","name":"amountCollectedInCake","type":"uint256"},{"internalType":"uint32","name":"finalNumber","type":"uint32"}],"internalType":"struct PancakeSwapLottery.Lottery","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256[]","name":"_ticketIds","type":"uint256[]"}],"name":"viewNumbersAndStatusesForTicketIds","outputs":[{"internalType":"uint32[]","name":"","type":"uint32[]"},{"internalType":"bool[]","name":"","type":"bool[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_lotteryId","type":"uint256"},{"internalType":"uint256","name":"_ticketId","type":"uint256"},{"internalType":"uint32","name":"_bracket","type":"uint32"}],"name":"viewRewardsForTicketId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"},{"internalType":"uint256","name":"_lotteryId","type":"uint256"},{"internalType":"uint256","name":"_cursor","type":"uint256"},{"internalType":"uint256","name":"_size","type":"uint256"}],"name":"viewUserInfoForLotteryId","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"},{"internalType":"uint32[]","name":"","type":"uint32[]"},{"internalType":"bool[]","name":"","type":"bool[]"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenAmount","type":"uint256"}],"name":"withdrawBank","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawCooldown","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]}'),W=function(e){return new Promise(function(){var n=(0,a.Z)(r().mark((function n(t,a){var i,s,o,c,l,d,u,h,m,f,p;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.chainId,s=e.contractAddress,!(o=(0,R.T_)(i))){n.next=30;break}return n.prev=3,c=new(P())(o.rpcUrls[0]),l=new c.eth.Contract(Y.Mt,s),n.next=8,l.methods.owner().call();case 8:return d=n.sent,n.next=11,l.methods.operatorAddress().call();case 11:return u=n.sent,n.next=14,l.methods.treasuryAddress().call();case 14:return h=n.sent,n.next=17,l.methods.viewCurrentLotteryId().call();case 17:return m=n.sent,n.next=20,l.methods.cakeToken().call();case 20:return f=n.sent,n.next=23,l.methods.viewLottery(m).call();case 23:p=n.sent,t({chainId:i,contractAddress:s,lotteryToken:f,owner:d,operator:u,treasury:h,currentLotteryInfo:p,currentLotteryNumber:m}),n.next=30;break;case 27:n.prev=27,n.t0=n.catch(3),a(n.t0);case 30:case"end":return n.stop()}}),n,null,[[3,27]])})));return function(e,t){return n.apply(this,arguments)}}())},H=t(72859),U=function(e){return new Promise((function(n,t){var i=e.activeWeb3,s=e.tokenAddress,o=e.feeOn,l=e.kycOn,d=e.kycContract;console.log(">>> options",e);var u=e.onTrx||function(){},h=e.onSuccess||function(){},m=e.onError||function(){},f=e.onFinally||function(){};i.eth.getAccounts().then((function(e){if(e.length>0){var n=e[0];i.eth.getChainId().then(function(){var e=(0,a.Z)(r().mark((function e(t){var a,p,x,v,y,b,j,g;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new i.eth.Contract(H.Mt),p=R.dr[t]?d:R.r_,x=p!==R.r_&&l,v={from:n,gas:"0"},y=[s,!!o,p,x],console.log(">>> deploy args",y),e.next=8,a.deploy({arguments:y,data:H.aT.eF.Ry}).estimateGas(v);case 8:return b=e.sent,j=new c.BigNumber(new c.BigNumber(b).multipliedBy(1.05).toFixed(0)).toString(16),v.gas="0x"+j,e.next=13,i.eth.getGasPrice();case 13:g=e.sent,v.gasPrice="0x"+new c.BigNumber(g).toString(16),a.deploy({data:"0x"+H.aT.eF.Ry,arguments:y}).send(v).on("transactionHash",(function(e){console.log("transaction hash:",e),u(e)})).on("error",(function(e){console.log("transaction error:",e),m(e)})).on("receipt",(function(e){console.log("transaction receipt:",e),h(e.contractAddress)})).then((function(){f()}));case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log(">>> deployLottery",e),t(e)}))}else t("NO_ACTIVE_ACCOUNT")})).catch((function(e){console.log(">>> deployLottery",e),t(e)}))}))};function V(e){var n=e.type,t=e.label,a=e.value,i=e.onChange,s=e.buttons,r=e.values,c=e.placeholder,l=e.hasError,d=e.errorText,h=e.desc,m=n;if("address"===n)m="text";return(0,o.jsxs)("div",{className:"".concat(u().adminFormInputHolder," ").concat(l?u().hasError:""),children:["list"===n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("label",{children:[t,": (",a,")"]}),h&&(0,o.jsx)("span",{className:u().adminFieldDesc,children:h}),(0,o.jsxs)("div",{children:[l&&d&&(0,o.jsx)("span",{className:u().hasError,children:d}),(0,o.jsx)("select",{value:a,onChange:function(e){return i(e.target.value)},children:r.map((function(e){return(0,o.jsx)("option",{value:e.id,children:e.title},e.id)}))})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("label",{children:[t,":"]}),h&&(0,o.jsx)("span",{className:u().adminFieldDesc,children:h}),l&&d&&(0,o.jsx)("span",{className:u().hasError,children:d}),(0,o.jsx)("div",{children:"number"===m?(0,o.jsx)("input",{min:(null===e||void 0===e?void 0:e.minValue)||void 0,max:(null===e||void 0===e?void 0:e.maxValue)||void 0,type:"number",placeholder:c||"",value:a,onChange:function(e){i(e.target.value)}}):(0,o.jsx)("input",{type:m,placeholder:c||"",value:a,onChange:function(e){return i(e.target.value)}})})]}),s&&(0,o.jsx)("div",{className:u().adminFormButtonsHolder,children:s})]})}var G=t(88240),q=function(){var e=Object.keys(R.w5).map((function(e){return{id:R.w5[e].networkVersion,title:R.w5[e].chainName}}));return e.unshift({id:0,title:"Select Blockchain"}),e}();function z(e){e.setDoReloadStorage;var n=e.saveStorageConfig,t=e.openConfirmWindow,a=e.addNotify,i=e.getActiveChain,s=e.storageData,r=(0,y.useState)(null===s||void 0===s?void 0:s.chainId),c=r[0],l=r[1],d=(0,y.useState)(null===s||void 0===s?void 0:s.lotteryAddress),h=d[0],m=d[1],f=(0,y.useState)(null===s||void 0===s?void 0:s.tokenAddress),p=f[0],x=f[1],v=(0,y.useState)(0),b=v[0],j=v[1],g=(0,y.useState)(""),w=g[0],k=g[1],T=(0,y.useState)(!1),N=T[0],S=T[1],C=(0,y.useState)(!1),I=(C[0],C[1],(0,y.useState)(!1)),A=I[0],F=I[1],B=(0,y.useState)(!1),O=B[0],D=B[1],L=(0,y.useState)(null===s||void 0===s?void 0:s.tokenInfo),E=L[0],M=L[1],Z=(0,y.useState)(!1),P=Z[0],Y=Z[1],H=(0,y.useState)(void 0!==s.tokenInfo.address),z=H[0],J=H[1],X=(0,y.useState)(!1),$=X[0],Q=X[1],ee=function(){return void 0!==R.dr[c]};(0,y.useEffect)((function(){ee()&&1==b&&k(R.dr[c])}),[b]);var ne=function(){t({title:"Save to storage",message:"Save changes to storage config?",onConfirm:function(){Q(!0),n({onBegin:function(){a("Confirm transaction")},onReady:function(){Q(!1),a("Changed saved","success")},onError:function(e){Q(!1),a("Fail save changes. ".concat(e.message?e.message:""),"error")},newData:{chainId:c,tokenAddress:p,lotteryAddress:h,tokenInfo:E}})}})},te=function(){c?(J(!1),Y(!1),M({}),a("Fetching token info"),K(p,c).then((function(e){Y(!1),M(e),J(!0),a("Token info fetched","success")})).catch((function(e){a("Fail fetch token info. ".concat(e.message?e.message:""),"error"),Y(!1)}))):a("Fail fetch. Select work chain first","error")},ae=(0,y.useState)(!1),ie=ae[0],se=ae[1];(0,y.useEffect)((function(){ie&&p&&(se(!1),te())}),[ie,p]);var re=function(){S(!0),W({chainId:c,contractAddress:h}).then((function(e){x(e.lotteryToken),se(!0),S(!1),a("Lottery contract fetched","success")})).catch((function(e){S(!1),a("Fail fetch contract info","error"),console.log(">>> err",e)}))},oe=function(){D(!1)},ce=function(){D(!0)},le=(0,y.useState)(!1),de=(le[0],le[1],function(){if(!c)return a("Fail. Select work chain first","error");if(!z)return a("Fail. Fetch token info first","error");var e=i(),n=e.activeChainId,r=e.activeWeb3,o=(0,R.T_)(n);c&&z&&p&&t({title:"Deploying Lottery contract",message:"Deploy Lottery contract at ".concat(o.chainName," (").concat(n,")?"),onConfirm:function(){F(!0),a("Deploying lottery. Confrirm transaction"),U({activeWeb3:r,tokenAddress:p,feeOn:!(0,G.Z)("LOTTERY_FULL_VERSION",s),kycOn:1==b,kycContract:w,onTrx:function(e){a("Lottery contract deploy TX ".concat(e,"..."),"success")},onSuccess:function(e){try{a("Lottery contract deployed. Now save settings","success"),m(e),F(!1),D(!1)}catch(n){console.log(">>> onSuccess error",n)}},onError:function(e){a("Fail deploy Lottery contract. ".concat(e.message?e.message:""),"error"),F(!1),console.log(e)}}).catch((function(e){F(!1),a("Fail deploy Lottery contract. ".concat(e.message?e.message:""),"error")}))}})});return{render:function(){return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:u().adminForm,children:[(0,o.jsx)("div",{className:u().adminSectionDescription,children:"Main settings. The blockchain in which the lottery will work is indicated here, the token for buying tickets is indicated and the lottery contract is deployed"}),V({label:"Work blockchain ID",type:"list",desc:"Your lottery will run on this blockchain",values:q,value:c,onChange:l}),O?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:u().subFormInfo,children:[(0,o.jsx)("h3",{children:"Deploy new Lottery contract options"}),(0,o.jsxs)("div",{className:u().subForm,children:[V({label:"Lottery token",type:"address",desc:"This token will be used to purchase tickets and as a reward in your lottery",value:p,onChange:x,placeholder:"Ender address of lottery ERC20 token",buttons:(0,o.jsx)(_,{chainId:c,className:u().adminSubButton,disabled:P,onClick:te,action:"Fetch token info",children:P?"Fetching":"Fetch token info"})}),z&&E&&E.address&&(0,o.jsxs)("div",{className:u().infoTable,children:[(0,o.jsx)("h3",{children:"Token info"}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsx)("label",{children:"Symbol:"}),(0,o.jsx)("span",{children:(0,o.jsx)("b",{children:E.symbol})})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsx)("label",{children:"Name:"}),(0,o.jsx)("span",{children:(0,o.jsx)("b",{children:E.name})})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsx)("label",{children:"Decimals:"}),(0,o.jsx)("span",{children:(0,o.jsx)("b",{children:E.decimals})})]})]}),(0,o.jsxs)("div",{className:u().adminFormInputHolder,children:[(0,o.jsx)("label",{children:"Enable KYC:"}),(0,o.jsxs)("select",{value:ee()?b:0,disabled:!ee(),onChange:function(e){j(e.target.value)},children:[(0,o.jsx)("option",{value:0,children:"No"}),(0,o.jsxs)("option",{value:1,children:["Yes (",R.tm[c]||"Not supported",")"]})]}),!ee()&&(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:"* this blockchain not support KYC. "}),(0,o.jsxs)("span",{children:["For more info contact ",(0,o.jsx)("a",{style:{color:"#fff"},href:"https://t.me/onoutsupportbot",target:"_blank",children:"@onoutsupportbot"})]})]})]}),ee()&&1==b&&(0,o.jsx)(o.Fragment,{children:V({label:"KYC BABT contract",type:"address",desc:"This BABT contract will be used for check KYC",value:w,onChange:k,placeholder:"Ender address of KYC BABT token"})})]}),(0,o.jsxs)("div",{className:u().actionsRow,children:[(0,o.jsx)(_,{chainId:c,className:u().adminSubButton,disabled:A,onClick:de,action:"Deploy lottery contract",children:A?"Deploying":"Deploy Lottery contract"}),(0,o.jsx)("button",{className:"".concat(u().adminSubButton," ").concat(u().isCancel),disabled:A,onClick:oe,children:"Cancel"})]})]})}):(0,o.jsxs)(o.Fragment,{children:[V({label:"Lottery contract",type:"address",value:h,desc:"Set up the lottery contract by clicking the 'Deploy new' button, if this is your first time setting it up",onChange:m,placeholder:"Enter address of lottery contract",buttons:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{className:"".concat(u().adminSubButton),disabled:N||A,onClick:re,children:N?"Fetching info":"Fetch Lottery contract info"}),(0,o.jsx)("button",{className:"".concat(u().adminSubButton),disabled:N||A,onClick:ce,children:"Deploy new Lottery contract"})]})}),z&&E&&E.address&&(0,o.jsxs)("div",{className:u().subFormInfo,children:[(0,o.jsx)("h3",{children:"Token for which users buy tickets"}),(0,o.jsxs)("div",{className:u().subForm,children:[(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsx)("label",{children:"Address:"}),(0,o.jsx)("span",{children:(0,o.jsx)("b",{children:E.address})})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsx)("label",{children:"Symbol:"}),(0,o.jsx)("span",{children:(0,o.jsx)("b",{children:E.symbol})})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsx)("label",{children:"Name:"}),(0,o.jsx)("span",{children:(0,o.jsx)("b",{children:E.name})})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsx)("label",{children:"Decimals:"}),(0,o.jsx)("span",{children:(0,o.jsx)("b",{children:E.decimals})})]})]})]})]}),(0,o.jsx)("div",{className:u().actionsRowMain,children:(0,o.jsx)(_,{chainId:"STORAGE",icon:"save",className:u().adminMainButton,disabled:$,onClick:ne,action:"Save changes",children:$?"Saving...":"Save to storage config"})})]})})}}}function J(e,n,t){return(0,o.jsxs)("a",{className:u().openInNewTab,href:e,target:"_blank",alt:n,title:n,children:[t&&(0,o.jsxs)("span",{children:[t," "]}),(0,o.jsx)(w.G,{icon:k.faUpRightFromSquare})]})}var X=t(88765),$=function(e){return new Promise(function(){var n=(0,a.Z)(r().mark((function n(t,a){var i,s,o,c,l,d,u;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.chainId,s=e.contractAddress,!(o=(0,R.T_)(i))){n.next=30;break}return n.prev=3,c=new(P())(o.rpcUrls[0]),l=function(){t({chainId:i,contractAddress:s,support:!1})},d=new c.eth.Contract(H.Mt,s),n.prev=7,n.next=10,d.methods.existKyc().call();case 10:if(!n.sent){n.next=18;break}return n.next=14,d.methods.KYCEnabled().call();case 14:u=n.sent,t({chainId:i,contractAddress:s,support:!0,enabled:u}),n.next=19;break;case 18:l();case 19:n.next=25;break;case 21:n.prev=21,n.t0=n.catch(7),console.log(">>> err",n.t0),l();case 25:n.next=30;break;case 27:n.prev=27,n.t1=n.catch(3),a(n.t1);case 30:case"end":return n.stop()}}),n,null,[[3,27],[7,21]])})));return function(e,t){return n.apply(this,arguments)}}())};function Q(e){e.setDoReloadStorage;var n=e.saveStorageConfig,t=e.openConfirmWindow,a=e.addNotify,s=e.getActiveChain,r=e.storageData,c=(e.getStorageData,(0,y.useState)(0)),l=c[0],d=c[1],h=(0,y.useState)(0),m=h[0],f=h[1],p=(0,y.useState)(0),b=p[0],j=p[1],g=(0,y.useState)(!1),w=g[0],k=g[1],N=(0,y.useState)(r.ticketPrice),S=N[0],C=N[1],I=(0,y.useState)(!1),A=I[0],F=I[1],B=(0,y.useState)(!1),O=(B[0],B[1]),D=(0,y.useState)(r.buyTokenLink),L=D[0],E=D[1];(0,y.useEffect)((function(){r.lotteryAddress&&r.chainId&&(0,X.Z)({isCall:!0,chainId:r.chainId,contractAddress:r.lotteryAddress,method:"numbersCount",args:[]}).then((function(e){te(e)}))}),[r]);var M=(0,y.useState)(r.matchRules||{match_1:39.2,match_2:58.8,match_3:6.125,match_4:12.25,match_5:24.5,match_6:49}),Z=M[0],P=M[1],K=(0,y.useState)([1,2,3,4,5,6]),Y=K[0],W=K[1],H=(0,y.useState)(!1),U=H[0],V=H[1],G=(0,y.useState)(!1),q=G[0],z=G[1],Q=(0,y.useState)(r.burn),ee=Q[0],ne=Q[1],te=function(e){e<2&&(e=2),e>6&&(e=6),j(e),k("".concat(r.balls)!=="".concat(e)),W((function(n){return[1,2,3,4,5,6].filter((function(n){return n<=parseInt(e)}))}))};(0,y.useEffect)((function(){!function(){for(var e=0,n=1;n<=6;n++)n<=b&&(e+=Z["match_".concat(n)]);d(e),f(100-e)}()}),[b,Z]);var ae=function(){t({title:"Save changes to Lottery",message:"Save new count of balls?",onConfirm:function(){V(!0);var e=s().activeWeb3;a("Confirm transaction"),(0,X.Z)({activeWeb3:e,contractAddress:r.lotteryAddress,method:"setNumbersCount",args:[b]}).then((function(e){V(!1),k(!1),a("Changes saved","success")})).catch((function(e){V(!1),a("Fail save balls count. ".concat(e.message?e.message:""),"error")}))}})},ie=function(){t({title:"Save match rules",message:"Save winning balls match rules, burn amount and ticket price to storage config?",onConfirm:function(){z(!0),a("Saving winning rules..."),n({onBegin:function(){a("Confirm transaction")},onReady:function(){z(!1),a("Changed saved","success")},onError:function(e){z(!1),a("Fail save changes. ".concat(e.message?e.message:""),"error")},newData:{matchRules:Z,burn:ee,balls:b,ticketPrice:S,buyTokenLink:L}})}})},se=R.dr[r.chainId],re=(0,y.useState)(!0),oe=re[0],ce=re[1],le=(0,y.useState)(!1),de=le[0],ue=le[1],he=(0,y.useState)(0),me=he[0],fe=he[1],pe=(0,y.useState)(""),xe=pe[0],ve=pe[1],ye=(0,y.useState)(!1),be=ye[0],je=ye[1],ge=(0,y.useState)(r.kycVerifyLink),we=ge[0],ke=ge[1],Te=(0,y.useState)(!1),Ne=Te[0],Se=Te[1];(0,y.useEffect)((function(){ce(!0),r.lotteryAddress&&r.chainId&&$({chainId:r.chainId,contractAddress:r.lotteryAddress}).then((function(e){e.support?(ue(!0),fe(e.enabled?1:0)):ue(!1),ce(!1)})).catch((function(e){ue(!1),ce(!1),console.log(">>> err",e)}))}),[r]);var Ce=function(){t({title:"Save changes to Lottery",message:"Save new KYC verification rule?",onConfirm:function(){je(!0);var e=s().activeWeb3;a("Confirm transaction"),(0,X.Z)({activeWeb3:e,contractAddress:r.lotteryAddress,method:"setKYCEnabled",args:[1==me]}).then((function(e){je(!1),a("Changes saved","success")})).catch((function(e){je(!1),a("Fail save KYC verification rule. ".concat(e.message?e.message:""),"error")}))}})},Ie=function(){t({title:"Save KYC verification settings",message:"Save KYC verification settings to Storage?",onConfirm:function(){Se(!0),a("Saving KYC verification settings..."),n({onBegin:function(){a("Confirm transaction")},onReady:function(){Se(!1),a("Changed saved","success")},onError:function(e){Se(!1),a("Fail save changes. ".concat(e.message?e.message:""),"error")},newData:{kycVerifyLink:we,kycOracle:xe}})}})},Ae="https://github.com/shendel/BABTKycMigrateOracle";return{render:function(){var e;return r.lotteryAddress?(0,o.jsx)("div",{className:u().adminForm,children:(0,o.jsxs)("div",{className:u().subFormInfo,children:[(0,o.jsx)("h3",{children:"KYC settings"}),oe?(0,o.jsx)("div",{className:u().infoBlock,children:(0,o.jsx)("span",{children:"Loading KYC settings"})}):(0,o.jsx)(o.Fragment,{children:de?(0,o.jsxs)(o.Fragment,{children:[!se&&(0,o.jsxs)("div",{className:u().warningBlock,children:[(0,o.jsx)("div",{children:"Selected blockchain not support KYC verification."}),(0,o.jsxs)("div",{children:["For more info contact ",(0,o.jsx)("a",{href:"https://t.me/onoutsupportbot",target:"_blank",children:"@onoutsupportbot"})]})]}),se&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:u().subForm,children:[(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsx)("label",{children:"KYC Enabled:"}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("select",{value:me,onChange:function(e){fe(e.target.value)},children:[(0,o.jsx)("option",{value:0,children:"No"}),(0,o.jsxs)("option",{value:1,children:["Yes (",R.tm[r.chainId]||"Unknown",")"]})]}),(0,o.jsx)(_,{chainId:r.chainId,onClick:Ce,disabled:be,icon:"save",action:"Save KYC Rule",className:u().adminButton,children:be?"Saving...":"Save KYC Rule"})]})})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsx)("div",{children:"Link to KYC verification page. Leave blank for use default for selected blockchain"})]}),"Verify link:"]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{children:(0,o.jsx)("input",{type:"text",value:we,onChange:function(e){ke(e.target.value)}})}),R.wC[r.chainId]&&(0,o.jsxs)("span",{children:["Default link: ",J(R.wC[r.chainId],R.wC[r.chainId],R.wC[r.chainId])]}),(0,o.jsx)("div",{style:{flexDirection:"row-reverse"},children:(0,o.jsx)(_,{chainId:"STORAGE",onClick:Ie,disabled:Ne,icon:"save",action:"Save",className:u().adminButton,children:Ne?"Saving link...":"Save link to KYC verify page"})})]})]})]}),R.Mq[r.chainId]&&(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsx)("div",{children:"Link to KYC Oracle backend"})]}),"Oracle API:"]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{children:(0,o.jsx)("input",{type:"text",value:xe,onChange:function(e){ve(e.target.value)}})}),R.Oe[r.chainId]&&(0,o.jsxs)("span",{children:["Default link: ",J(R.Oe[r.chainId],R.Oe[r.chainId],R.Oe[r.chainId])]}),(0,o.jsx)("div",{children:(0,o.jsxs)("span",{children:["KYC Oracle sources and install instruction: ",J(Ae,Ae,Ae)]})}),(0,o.jsx)("div",{style:{flexDirection:"row-reverse"},children:(0,o.jsx)(_,{chainId:"STORAGE",onClick:Ie,disabled:Ne,icon:"save",action:"Save",className:u().adminButton,children:Ne?"Saving...":"Save KYC Oracle Api"})})]})]})]})]}):(0,o.jsxs)("div",{className:u().warningBlock,children:[(0,o.jsx)("div",{children:"You are use old Lottery contract without support KYC verification"}),(0,o.jsx)("div",{children:"Deploy new version for enable it"})]})}),(0,o.jsx)("h3",{children:"Lottery rules"}),(0,o.jsx)("div",{className:u().subForm,children:(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsx)("div",{children:"The number of balls that will be drawn in your lottery. Number two to six"})]}),"Balls count:"]}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{type:"number",min:"2",max:"6",step:"1",value:b,onChange:function(e){te(e.target.value)}}),(0,o.jsx)(_,{chainId:r.chainId,onClick:ae,disabled:U,icon:"save",action:"Save balls count",className:u().adminButton,children:U?"Saving the number of balls in the lottery contract":"Save the number of balls in the lottery contract"})]})})]})}),(0,o.jsx)("h3",{children:"Distribution of prizes %"}),(0,o.jsxs)("div",{className:u().subForm,children:[(0,o.jsx)("h4",{children:"Distribute the winning percentage based on the number of matched balls"}),(0,o.jsx)("div",{className:u().adminFieldDesc,children:'You can also use the "Equalize the remainder" button to distribute the remaining percentage in the desired field'}),Y.map((function(e){return(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsxs)("div",{children:["The percentage of winnings from the bank when ",e," number matches"]})]}),"Match ",e," ball:"]}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",value:Z["match_".concat(e)],onChange:function(n){var t=0;try{t=parseFloat(n.target.value)}catch(a){t=0}t<0&&(t=0),t>100&&(t=100),P((function(n){return(0,v.Z)((0,i.Z)({},n),(0,x.Z)({},"match_".concat(e),t))}))}}),(0,o.jsx)("strong",{children:"%"}),(0,o.jsxs)("button",{className:u().adminButton,onClick:function(){var n;n=e,P((function(e){return(0,v.Z)((0,i.Z)({},e),(0,x.Z)({},"match_".concat(n),e["match_".concat(n)]+m))}))},children:[(0,o.jsx)(T,{icon:"arrow-left"}),"Equalize the remainder"]})]})})]},e)})),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsx)("div",{children:"The sum of all winning combinations is on top. This number must be equal to 100%"})]}),"Sum:"]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("b",{children:l}),(0,o.jsx)("strong",{children:"%"})]})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsx)("div",{children:"The amount of undistributed winnings from the field above. This number must be 0%"})]}),"Undistributed:"]}),(0,o.jsx)("div",{children:0!==m?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("b",{className:u().hasError,children:[m," %"]})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("b",{children:m}),(0,o.jsx)("strong",{children:"%"})]})})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:"As an administrator, you have the option to set a service fee for each round of the lottery."}),(0,o.jsx)("span",{children:'The service fee is transferred to your wallet address, and a portion of this fee, equal to 1/5 of the service fee, is deducted as the "onout.org" fee.'}),(0,o.jsx)("span",{children:'The "onout.org" fee can be removed by purchasing the premium version of the lottery service.'})]})]}),"Service fee (From 2 to 30):"]}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{type:"number",min:"2",max:"30",value:ee,onChange:function(e){ne(e.target.value)}}),(0,o.jsx)("strong",{children:"%"})]})})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsx)("label",{children:"Ticket price:"}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{type:"number",step:"0.1",min:"0",value:S,onChange:function(e){!function(n){F(!1);try{(n=parseFloat(n))<0&&F(!0),n>5e5&&F(!0)}catch(e){F(!0)}C(n),O(r.ticketPrice!==n)}(e.target.value)}}),(0,o.jsx)("strong",{children:null===r||void 0===r||null===(e=r.tokenInfo)||void 0===e?void 0:e.symbol})]}),A&&(0,o.jsx)("div",{className:u().hasError,children:(0,o.jsx)("strong",{children:"Price must be between 0.00000000001 and 500000"})})]})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsx)("div",{children:(0,o.jsx)("span",{children:"Link to the service where users can buy your token to pay for tickets"})})]}),"Buy Token link:"]}),(0,o.jsx)("div",{children:(0,o.jsx)("div",{children:(0,o.jsx)("input",{type:"text",value:L,onChange:function(e){E(e.target.value)}})})})]}),(0,o.jsxs)("div",{className:u().actionsRow,children:[w&&(0,o.jsx)("strong",{className:u().hasError,children:"Save balls count first!"}),(0,o.jsx)(_,{chainId:"STORAGE",onClick:ie,disabled:q||w,icon:"save",action:"Save changes",className:u().adminSubButton,children:q?"Saving...":"Save match rules, burn amount and ticket price"})]})]})]})}):(0,o.jsxs)("div",{className:u().errorBlock,children:[(0,o.jsx)("span",{children:"Section not accessible"}),(0,o.jsx)("span",{children:"Deploy and save the lottery contract first"})]})}}}var ee=function(e,n){var t=Number(n-e),a=Math.floor(t/3600),i=Math.floor(t%3600/60),s=Math.floor(t%3600%60);return(a>0?a+(1==a?" hour, ":" hours, "):"")+(i>0?i+(1==i?" minute, ":" minutes, "):"")+(s>0?s+(1==s?" second":" seconds"):"")},ne=function(e){var n=e.ownerAddress,t=e.tokenAddress,a=e.chainId,i=e.approveFor;return new Promise((function(e,s){var r=(0,R.T_)(a);if(r)try{new(new(P())(r.rpcUrls[0]).eth.Contract)(M(),t).methods.allowance(n,i).call().then((function(n){e(n)})).catch((function(e){s(e)}))}catch(o){s(o)}else s("NOT_SUPPORTED_CHAIN")}))},te=t(29815),ae=t(53419),ie=function(e){return new Promise((function(n,t){var i=e.activeWeb3,s=(e.chainId,e.tokenAddress),o=e.approveFor,l=e.weiAmount,d=e.onTrx||function(){},u=e.onSuccess||function(){},h=e.onError||function(){},m=e.onFinally||function(){};i.eth.getAccounts().then(function(){var e=(0,a.Z)(r().mark((function e(a){var f,p,x,v,y;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.length>0)){e.next=14;break}return p=a[0],x=new i.eth.Contract(M(),s),e.next=6,(0,ae.A)(p,x,"approve",[o,l]);case 6:return v=e.sent,e.next=9,i.eth.getGasPrice();case 9:y=e.sent,v.gasPrice="0x"+new c.BigNumber(y).toString(16),(f=x.methods).approve.apply(f,(0,te.Z)([o,l])).send(v).on("transactionHash",(function(e){console.log("transaction hash:",e),d(e)})).on("error",(function(e){console.log("transaction error:",e),h(e),t(e)})).on("receipt",(function(e){console.log("transaction receipt:",e),u(e)})).then((function(e){n(e),m(e)})),e.next=15;break;case 14:t("NO_ACTIVE_ACCOUNT");case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log(">>> approveToken",e),t(e)}))}))},se=t(35553),re=t(72023),oe=t.n(re),ce=function(){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=n.length,a=0;a<128;a++)e+=n.charAt(Math.floor(Math.random()*t));return e};function le(e){e.setDoReloadStorage,e.saveStorageConfig;var n=e.openConfirmWindow,t=e.addNotify,a=e.getActiveChain,i=e.storageData,s=(e.getStorageData,(0,y.useState)(!1)),r=s[0],c=s[1],d=(0,y.useState)(!1),h=d[0],m=d[1],f=(0,y.useState)(!1),p=f[0],x=f[1],v=(0,y.useState)(!1),b=v[0],j=v[1],w=(0,y.useState)(!1),k=w[0],N=w[1],S=(0,y.useState)(""),C=S[0],I=S[1],A=(0,y.useState)(0),F=A[0],B=A[1],R=(0,y.useState)(!1),O=R[0],D=R[1],L=(0,y.useState)(!1),E=L[0],M=L[1],Z=(0,y.useState)(!1),P=Z[0],K=Z[1],Y=(0,y.useState)(!1),H=Y[0],U=Y[1];(0,y.useEffect)((function(){if(r&&h){var e=new Date("".concat(r," ").concat(h)).getTime()/1e3,n=ee((0,g.K)(),e);x(n)}}),[r,h]);var V=function(){i.chainId&&i.lotteryAddress&&(t("Fetching lottery status"),W({chainId:i.chainId,contractAddress:i.lotteryAddress}).then((function(e){t("Lottery status fetched","success"),j(e),N(e.currentLotteryInfo)})))};(0,y.useEffect)((function(){U(!1);var e=new(l())(k.amountCollectedInCake).div(new(l())(10).pow(i.tokenInfo.decimals)).toNumber();B(e),D(new Date(1e3*parseInt(k.startTime,10)).toString()),M(new Date(1e3*parseInt(k.endTime,10)).toString()),K(ee((0,g.K)(),parseInt(k.endTime,10)+60)),"1"===k.status&&parseInt(k.endTime,10)-(0,g.K)()<0?(I("lottery_round"),U(!0)):"1"!==b.currentLotteryNumber&&"1"===k.status?I("lottery_round"):"2"===k.status?I("lottery_draw"):"3"===k.status&&I("lottery_start")}),[k]),(0,y.useEffect)((function(){V()}),[i]);var G=(0,y.useState)(!1),q=G[0],z=G[1],J=function(){var e;return void 0===(null===i||void 0===i||null===(e=i.tokenInfo)||void 0===e?void 0:e.decimals)?t("Fail. No information about token. Fetch them first and return","error"):(null===i||void 0===i?void 0:i.ticketPrice)?(null===i||void 0===i?void 0:i.burn)?r&&h?void n({title:"New round",message:"Start new lottery round?",onConfirm:function(){var e=new(l())(i.ticketPrice).multipliedBy(Math.pow(10,i.tokenInfo.decimals)).toFixed(),n=parseInt(100*i.burn,10),s=[1,2,3,4,5,6].map((function(e){return e<=i.balls?parseInt(100*parseFloat(i.matchRules["match_".concat(e)]),10):0})),o=new Date("".concat(r," ").concat(h)).getTime()/1e3;t("Starting new lottery round..."),z(!0);var c=a().activeWeb3;(0,X.Z)({activeWeb3:c,contractAddress:i.lotteryAddress,method:"startLottery",args:[o,e,2e3,s,n]}).then((function(e){z(!1),V(),t("New lottery round started","success")})).catch((function(e){z(!1),t("Fail start new lottery round. ".concat(e.message?e.message:""),"error")}))}}):t("Fail. Enter date of lottery round end","error"):t("Fail. Burn amount not setted","error"):t("Fail. Ticket price not setted.","error")},$=(0,y.useState)(0),Q=$[0],te=$[1],ae=(0,y.useState)(!1),re=(ae[0],ae[1]),le=function(){n({title:"Inject lotery bank amount",message:"Add ".concat(Q," ").concat(null===i||void 0===i?void 0:i.tokenInfo.symbol," to the pot of the lottery round?"),onConfirm:function(){re(!0);var e,n,s=(e=Q,se.vz("".concat(e),n)),r=a();t("Inject bank. Check allovance"),ne({ownerAddress:r.activeAccount,tokenAddress:null===i||void 0===i?void 0:i.tokenAddress,chainId:null===i||void 0===i?void 0:i.chainId,approveFor:null===i||void 0===i?void 0:i.lotteryAddress}).then((function(e){var n=function(){t("Injecting round bank. Confirm transaction"),(0,X.Z)({activeWeb3:r.activeWeb3,contractAddress:i.lotteryAddress,method:"injectFunds",args:[b.currentLotteryNumber,s]}).then((function(e){re(!1),V(),t("The bank or round was replenished","success")})).catch((function(e){re(!1),t("Fail inject funds. ".concat(e.message?e.message:""),"error")}))};new(l())("".concat(s)).isGreaterThan(e)?(t("Inject bank. Need approve"),ie({activeWeb3:r.activeWeb3,chainId:null===i||void 0===i?void 0:i.chainId,tokenAddress:null===i||void 0===i?void 0:i.tokenAddress,approveFor:null===i||void 0===i?void 0:i.lotteryAddress,weiAmount:s}).then((function(e){n()})).catch((function(e){re(!1),t("Fail approve for inject round bank. ".concat(e.message?e.message:""),"error")}))):n()})).catch((function(e){re(!1),t("Fail inject round bank. ".concat(e.message?e.message:""),"error")}))}})},de=(0,y.useState)(!1),ue=de[0],he=de[1],me=function(){var e=a();he(!0),t("Closing lottery round. Confirm transaction"),(0,X.Z)({activeWeb3:e.activeWeb3,contractAddress:i.lotteryAddress,method:"closeLottery",args:[b.currentLotteryNumber]}).then((function(e){he(!1),V(),t("Lottery round was closed","success")})).catch((function(e){he(!1),t("Fail close lottery round. ".concat(e.message?e.message:""),"error")}))},fe=(0,y.useState)(ce()),pe=fe[0],xe=fe[1],ve=function(){xe(ce())},ye=(0,y.useState)(!1),be=ye[0],je=ye[1],ge=function(){var e=ce(),n=oe()("".concat(e).concat(pe));je(!0),t("Drawing winning numbers. Confirm transaction");var s=a();(0,X.Z)({activeWeb3:s.activeWeb3,contractAddress:i.lotteryAddress,method:"drawFinalNumberAndMakeLotteryClaimable",args:[b.currentLotteryNumber,"0x".concat(n),!0]}).then((function(e){je(!1),V(),t("Winning numbers drawed!","success")})).catch((function(e){je(!1),t("Fail draw winning numbers. ".concat(e.message?e.message:""),"error")}))};return{render:function(){var e,n;return i.lotteryAddress?(0,o.jsxs)("div",{className:u().adminForm,children:[(0,o.jsx)("div",{className:u().adminSectionDescription,children:"This section is where the lottery rounds are managed. Start of a new round, end of the round and calculation of winning balls"}),"lottery_start"===C&&(0,o.jsxs)("div",{className:u().subFormInfo,children:[(0,o.jsx)("h3",{children:"Start new lottery round"}),(0,o.jsx)("div",{className:u().adminSubFormDesc,children:"There are currently no rounds running. Start a new lottery round"}),(0,o.jsxs)("div",{className:u().subForm,children:[(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:"The date and time when the sale of tickets will be stopped and the lottery will enter the winning balls calculation mode."}),(0,o.jsx)("span",{children:"The minimum round time is 5 minutes."}),(0,o.jsx)("span",{children:"The maximum round time is 31 days."})]})]}),"Round end in:"]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{type:"date",value:r,onChange:function(e){c(e.target.value)}}),(0,o.jsx)("input",{type:"time",value:h,onChange:function(e){m(e.target.value)}}),(0,o.jsx)("strong",{children:"(min 5 minutes, max 31 days)"})]}),p&&(0,o.jsx)("div",{children:(0,o.jsxs)("strong",{children:["Round length is ",p]})})]})]}),(0,o.jsx)("div",{className:u().actionsRow,children:(0,o.jsx)(_,{className:u().adminSubButton,onClick:J,disabled:q,chainId:null===i||void 0===i?void 0:i.chainId,action:"Start new round",children:q?"Starting new lottery round...":"Start new lottery round"})})]})]}),"lottery_round"===C&&(0,o.jsxs)("div",{className:u().subFormInfo,children:[(0,o.jsx)("h3",{children:"Lottery round is running now"}),(0,o.jsxs)("div",{className:u().subForm,children:[(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsx)("label",{children:"Round started:"}),(0,o.jsx)("div",{children:(0,o.jsx)("div",{children:(0,o.jsx)("strong",{children:O})})})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsx)("label",{children:"Round ends:"}),(0,o.jsx)("div",{children:(0,o.jsx)("div",{children:(0,o.jsx)("strong",{children:E})})})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:"How much time is left until the end of the current round."}),(0,o.jsx)("span",{children:"After this time, the sale of tickets will be terminated and the lottery will switch to the mode of calculating winning balls."})]})]}),"Time left:"]}),(0,o.jsx)("div",{children:H?(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:"The time for the round has passed."}),(0,o.jsx)("span",{children:"You need to close the lottery and move on to generating winning balls"})]})]}),(0,o.jsx)("strong",{children:"Time is over. Close Lottery round."})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:P}),(0,o.jsxs)("button",{className:u().adminButton,onClick:V,children:[(0,o.jsx)(T,{icon:"refresh"}),"Fetch status"]})]})})]}),H&&(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsxs)("div",{children:["The time for the round has passed. You need to close the lottery and move on to generating winning balls",(0,o.jsx)("span",{children:'Click "Close round" to proceed to the calculation of winning balls'})]})]}),"Close Lottery round:"]}),(0,o.jsx)("div",{children:(0,o.jsx)("div",{children:(0,o.jsx)(_,{chainId:null===i||void 0===i?void 0:i.chainId,action:"Close round",onClick:me,disabled:ue,className:u().adminButton,children:ue?"Closing...":"Close Lottery round"})})})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:"How many tokens are raffled off in the current round."}),(0,o.jsx)("span",{children:"If you wish, you can increase the amount of tokens in the bank."}),(0,o.jsx)("span",{children:'To do this, use the "Inject lotery bank funds" section below.'})]})]}),"Round bank:"]}),(0,o.jsx)("div",{children:(0,o.jsx)("div",{children:(0,o.jsxs)("strong",{children:[F," ",null===i||void 0===i||null===(e=i.tokenInfo)||void 0===e?void 0:e.symbol]})})})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:"In this section, you can add tokens to the bank of the current lottery round."}),(0,o.jsx)("span",{children:"The added tokens will be distributed among the winning tickets."}),(0,o.jsx)("span",{children:"Unallocated tokens will be transferred to the general lottery bank and raffled off in the next rounds"})]})]}),"Inject lotery bank funds:"]}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{type:"number",min:"0",step:"0.01",value:Q,onChange:function(e){te(e.target.value)}}),(0,o.jsx)("strong",{children:null===i||void 0===i||null===(n=i.tokenInfo)||void 0===n?void 0:n.symbol})]})})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsx)("label",{}),(0,o.jsx)("div",{children:(0,o.jsx)("div",{children:(0,o.jsx)(_,{className:u().adminButton,onClick:le,chainId:null===i||void 0===i?void 0:i.chainId,action:"Add tokens to lottery bank",icon:"add",children:"Approve and add to round bank"})})})]})]})]}),"lottery_draw"===C&&(0,o.jsxs)("div",{className:u().subFormInfo,children:[(0,o.jsx)("h3",{children:"The lottery round is over. You need to calculate the winning combination"}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:"A unique randomly generated string that will be used as a salt during the calculation of winning balls."}),(0,o.jsx)("span",{children:"The uniqueness of this string guarantees protection against fraud by users."})]})]}),"Uniq salt:"]}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{type:"text",value:pe,readOnly:!0}),(0,o.jsx)("button",{className:u().adminButton,onClick:ve,children:"Generate"})]})})]}),(0,o.jsx)("div",{className:u().actionsRow,children:(0,o.jsx)(_,{className:u().adminButton,onClick:ge,disabled:be,chainId:null===i||void 0===i?void 0:i.chainId,action:"Calculate winning number",children:"Calculate winning numbers"})})]})]}):(0,o.jsxs)("div",{className:u().errorBlock,children:[(0,o.jsx)("span",{children:"Section not accessible"}),(0,o.jsx)("span",{children:"Deploy and save the lottery contract first"})]})}}}var de=t(37826);function ue(e){e.setDoReloadStorage;var n=e.saveStorageConfig,t=e.openConfirmWindow,a=e.addNotify,s=(e.getActiveChain,e.storageData),r=e.storageTexts,c=(0,y.useState)(s.texts),l=c[0],d=c[1],h=(0,y.useState)(!1),m=h[0],f=h[1],p=localStorage.getItem("-nft-stake-preview-text-mode"),b=localStorage.getItem("-nft-stake-preview-texts");try{b=JSON.parse(b),b=(0,i.Z)({},r,b)}catch(D){b=r}var j=(0,y.useState)(null!==p),w=j[0],k=j[1],S=function(){t({title:"Switch to preview mode",message:"Switch to preview mode? You can look changes before save",onConfirm:function(){a("Preview mode on. Go to site for check it","success"),localStorage.setItem("-nft-stake-preview-text-mode",!0),localStorage.setItem("-nft-stake-preview-texts",JSON.stringify(l)),k(!0)}})},C=function(){a("Preview mode turn off","success"),localStorage.removeItem("-nft-stake-preview-text-mode"),localStorage.removeItem("-nft-stake-preview-texts"),k(!1)};(0,y.useEffect)((function(){w&&(localStorage.setItem("-nft-stake-preview-texts",JSON.stringify(l)),localStorage.setItem("-nft-stake-preview-texts-utx",(0,g.K)()))}),[l]);var I=function(){t({title:"Save texts",message:"Save changes to storage config?",onConfirm:function(){f(!0),n({onBegin:function(){C(),a("Confirm transaction for save changed texts")},onReady:function(){a("Texts successfull saved","success"),f(!1)},onError:function(e){a("Fail save texts","error"),f(!1)},newData:{texts:l}})}})},A=function(e,n){d((function(t){return(0,v.Z)((0,i.Z)({},t),(0,x.Z)({},"".concat(e),n))}))},F=function(e){var n=e.code,t=e.desc,a=(e.value,e.defValue),i=e.multiline,s=e.multilineView,r=e.markdown;return(0,o.jsxs)("div",{className:u().adminStorageTextArea,children:[(0,o.jsxs)("label",{children:[t," (",n,") ",r&&(0,o.jsx)("b",{children:"(MarkDown)"})," ",i&&(0,o.jsx)("b",{children:"(Multiline)"})]}),i||s?(0,o.jsx)("textarea",{value:void 0!==l[n]?l[n]:a,onChange:function(e){A(n,e.target.value)}}):(0,o.jsx)("input",{type:"text",value:void 0!==l[n]?l[n]:a,onChange:function(e){A(n,e.target.value)}})]})},B=(0,y.useState)({}),R=B[0],O=B[1];return{render:function(){return(0,o.jsxs)("div",{className:u().adminForm,children:[(0,o.jsx)("div",{className:u().adminSectionDescription,children:"In this section, labels are edited."}),Object.keys(de.D).map((function(e){return N({title:de.D[e].title,isOpened:R[e],onToggle:function(){!function(e){O((function(n){return(0,v.Z)((0,i.Z)({},n),(0,x.Z)({},"".concat(e),void 0===R[e]||!R[e]))}))}(e)},key:e,content:(0,o.jsx)("div",{className:u().adminFormTextGroup,children:de.D[e].items.map((function(e,n){var t=e.code,a=e.desc,i=e.value,s=e.multiline,r=e.markdown,c=e.multilineView;return(0,o.jsx)("div",{children:F({code:t,desc:a,defValue:i,multiline:s,multilineView:c,markdown:r})},n)}))})})})),(0,o.jsx)("div",{className:u().adminSectionDescription,children:"You can turn on the preview mode and look at the changes before saving them to the storage contract"}),(0,o.jsxs)("div",{className:u().actionsRowMain,children:[w?(0,o.jsxs)("button",{onClick:C,className:u().adminSubButton,children:[(0,o.jsx)(T,{icon:"eye-slash"}),"Turn off preview mode"]}):(0,o.jsxs)("button",{onClick:S,className:u().adminSubButton,children:[(0,o.jsx)(T,{icon:"eye"}),"Turn on preview mode"]}),(0,o.jsx)(_,{chainId:"STORAGE",disabled:m,onClick:I,action:"Save changes",icon:"save",className:u().adminSubButton,children:m?"Saving...":"Save changes"})]})]})}}}var he=function(e,n,t){return new Promise((function(a,i){var s=(0,R.T_)(t);if(s)try{var r=new(new(P())(s.rpcUrls[0]).eth.Contract)(M(),n);r.methods.decimals().call().then((function(s){r.methods.balanceOf(e).call().then((function(i){var r=function(e,n){return se.bM(e,n)}(i,s);a({wallet:e,tokenAddress:n,chainId:t,decimals:s,wei:i,normalized:r})})).catch((function(e){i(e)}))})).catch((function(e){i(e)}))}catch(o){i(o)}else i("NOT_SUPPORTED_CHAIN")}))};function me(e){e.setDoReloadStorage,e.saveStorageConfig;var n=e.openConfirmWindow,t=e.addNotify,a=e.getActiveChain,i=e.storageData,s=(e.getStorageData,(0,y.useState)(!1)),r=s[0],c=s[1],l=(0,y.useState)(0),d=l[0],h=l[1],m=(0,y.useState)(0),f=m[0],p=m[1],x=(0,y.useState)(!1),v=x[0],b=x[1],j=(0,y.useState)(0),w=j[0],k=j[1],T=(0,y.useState)(!0),N=T[0],S=T[1],C=function(){n({title:"Withdraw Lottery bank",message:"Do you really want to withdraw the entire bank from the lottery contract?",onConfirm:function(){c(!0);var e=a().activeWeb3;(0,X.Z)({activeWeb3:e,contractAddress:i.lotteryAddress,method:"withdrawBank",args:[v.wei]}).then((function(e){c(!1),S(!0),t("Lottery bank withdrawed","success")})).catch((function(e){c(!1),t("Fail withdraw lottery bank. ".concat(e.message?e.message:""),"error")}))}})};return(0,y.useEffect)((function(){i.chainId&&i.lotteryAddress&&i.tokenAddress&&N&&(t("Fetching lottery status"),W({chainId:i.chainId,contractAddress:i.lotteryAddress}).then((function(e){var n=e.currentLotteryInfo;console.log(">>> lotteryStatus",e),h(n.endTime),p(n.status),k(Number(n.endTime)+2678400-(0,g.K)()),he(i.lotteryAddress,i.tokenAddress,i.chainId).then((function(e){b(e),S(!1)}))})))}),[i]),{render:function(){return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:u().adminForm,children:[(0,o.jsx)("div",{className:u().adminSectionDescription,children:"As an administrator, you have the option to withdraw unclaimed funds from the bank after two months have passed since the last round of the lottery. However, please be aware that a portion of the withdrawal, equal to 1/5 of the total amount, will be deducted as the OnOut fee. If you wish to avoid this fee, you can purchase the premium version of the lottery service."}),(0,o.jsxs)("div",{className:u().subFormInfo,children:[(0,o.jsx)("h3",{children:"Lottery bank info"}),i.tokenInfo&&i.chainId&&i.lotteryAddress&&i.tokenInfo.symbol&&v?(0,o.jsxs)("div",{className:u().subForm,children:[(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsx)("div",{children:"Date when the last round was closed"})]}),"Last round ends in:"]}),(0,o.jsx)("div",{children:(0,o.jsx)("strong",{children:new Date(1e3*Number(d)).toString()})})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsx)("div",{children:"How much time has passed since the last round closed"})]}),"Time left:"]}),(0,o.jsx)("div",{children:w>0?(0,o.jsx)("strong",{children:ee((0,g.K)(),Number(d)+2678400)}):(0,o.jsx)("strong",{children:"Freeze time is up. You can take the bank"})})]}),(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsx)("div",{children:"How much is in the lottery bank now"})]}),"Lottery bank:"]}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:v.normalized}),(0,o.jsx)("strong",{children:i.tokenInfo.symbol})]})})]}),(0,o.jsx)("div",{className:u().actionsRow,children:(0,o.jsx)(_,{chainId:i.chainId,onClick:C,disabled:r||w>0||"3"!=f,icon:"money-bill-transfer",action:"Withdraw bank",className:u().adminButton,children:r?"Withdrawing lottery bank":"Withdraw lottery bank"})})]}):(0,o.jsx)("div",{children:"Fetching info..."})]})]})})}}}var fe=t(828),pe={},xe=[];function ve(e){var n=e.addNotify,t=e.openConfirmWindow,a=e.storageMenu,i=e.saveStorageConfig,s=(0,y.useState)(a&&a.length?a:xe),r=s[0],c=s[1],l=(0,y.useState)(!1),d=l[0],h=l[1],m=(0,y.useState)(0),f=m[0],p=m[1],x=(0,fe.Z)(b("",{notEmpty:!0}),4),v=x[0],j=x[1],g=x[2],w=(x[3],(0,y.useState)("")),k=w[0],N=w[1],C=(0,fe.Z)(b("",{notEmpty:!0}),4),I=C[0],A=C[1],B=C[2],R=(C[3],(0,y.useState)(!1)),O=R[0],L=R[1],E=(0,y.useState)(!1),M=E[0],Z=E[1],P=function(){Z(!1)},K=function(){j(""),N(""),A(""),L(!1),h(!1),Z(!0)},Y=function(){if(g)return n("Title is required","error");if(""==k&&B)return n("Href is required","error");var e={title:v,target:k,link:I,blank:O};d?(Z(!1),n("Menu item changed","success"),c((function(n){return n[f]=e,(0,te.Z)(n)}))):(Z(!1),n("New menu item added","success"),c((function(n){return(0,te.Z)(n).concat([e])})))},W=(0,y.useState)(!1),H=W[0],U=W[1],V=function(){t({title:"Save menu items",message:"Save changes to storage config?",onConfirm:function(){U(!0),i({onBegin:function(){n("Confirm transaction for save changed menu items")},onReady:function(){n("Menu items successfull saved","success"),U(!1)},onError:function(e){n("Fail save menu items","error"),U(!1)},newData:{menu:r}})}})};return{render:function(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"jsx-b83f427d8620324b tab-menu-items",children:[(0,o.jsx)(F(),{id:"b83f427d8620324b",children:'.tab-menu-items.jsx-b83f427d8620324b{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.tab-menu-items.jsx-b83f427d8620324b TABLE.jsx-b83f427d8620324b{width:100%;border:1px solid#fff;margin-bottom:10px;border-spacing:0px;border-right:0px;border-bottom:0px}.tab-menu-items.jsx-b83f427d8620324b TABLE.jsx-b83f427d8620324b THEAD.jsx-b83f427d8620324b TR.jsx-b83f427d8620324b{background:#0b469f}.tab-menu-items.jsx-b83f427d8620324b TABLE.jsx-b83f427d8620324b TD.jsx-b83f427d8620324b{padding:4px;border-bottom:1px solid#fff;border-right:1px solid#fff}.tab-menu-items.jsx-b83f427d8620324b TABLE.jsx-b83f427d8620324b TBODY.jsx-b83f427d8620324b TD.jsx-b83f427d8620324b{text-align:left}.tab-menu-items.jsx-b83f427d8620324b TABLE.jsx-b83f427d8620324b TBODY.jsx-b83f427d8620324b TR.jsx-b83f427d8620324b{border-bottom:1px solid red}.tab-menu-items.jsx-b83f427d8620324b TABLE.jsx-b83f427d8620324b TBODY.jsx-b83f427d8620324b TR.is-edit.jsx-b83f427d8620324b{vertical-align:top}.tab-menu-items.jsx-b83f427d8620324b TR.is-edit.jsx-b83f427d8620324b SELECT.jsx-b83f427d8620324b,.tab-menu-items.jsx-b83f427d8620324b TR.is-edit.jsx-b83f427d8620324b INPUT[type="text"].jsx-b83f427d8620324b{display:block;width:100%}.tab-menu-items.jsx-b83f427d8620324b TR.is-edit.jsx-b83f427d8620324b LABEL.jsx-b83f427d8620324b{display:block}.tab-menu-items.jsx-b83f427d8620324b TD.options.jsx-b83f427d8620324b{white-space:nowrap}.tab-menu-items.jsx-b83f427d8620324b TD.jsx-b83f427d8620324b{width:100%}.tab-menu-items.jsx-b83f427d8620324b TD.jsx-b83f427d8620324b:first-child{width:30%}.tab-menu-items.jsx-b83f427d8620324b TABLE.jsx-b83f427d8620324b TBODY.jsx-b83f427d8620324b TD.empty.jsx-b83f427d8620324b{text-align:center;font-weight:bold}'}),(0,o.jsxs)("div",{className:"jsx-b83f427d8620324b "+(u().adminForm||""),children:[(0,o.jsxs)("table",{className:"jsx-b83f427d8620324b",children:[(0,o.jsx)("thead",{className:"jsx-b83f427d8620324b",children:(0,o.jsxs)("tr",{className:"jsx-b83f427d8620324b",children:[(0,o.jsx)("td",{className:"jsx-b83f427d8620324b",children:"Title"}),(0,o.jsx)("td",{className:"jsx-b83f427d8620324b",children:"Link"}),(0,o.jsx)("td",{className:"jsx-b83f427d8620324b",children:"Options"})]})}),(0,o.jsx)("tbody",{className:"jsx-b83f427d8620324b",children:r.length>0?r.map((function(e,a){var i=e.title,s=e.target,l=e.link,d=e.blank;return(0,o.jsxs)("tr",{className:"jsx-b83f427d8620324b",children:[(0,o.jsx)("td",{className:"jsx-b83f427d8620324b",children:(0,o.jsx)("b",{className:"jsx-b83f427d8620324b",children:i})}),(0,o.jsx)("td",{className:"jsx-b83f427d8620324b",children:(0,o.jsx)("b",{className:"jsx-b83f427d8620324b",children:""==s?(0,o.jsxs)(o.Fragment,{children:[d&&(0,o.jsx)(o.Fragment,{children:"[NEW TAB]\xa0"}),l,J(l,l)]}):(0,o.jsx)(o.Fragment,{children:"[".concat(s," PAGE]")})})}),(0,o.jsxs)("td",{className:"jsx-b83f427d8620324b options",children:[S({title:"Move item up",icon:"arrow-up",onClick:function(){var e;(e=a)>0&&c((function(n){var t=n[e-1];return n[e-1]=n[e],n[e]=t,(0,te.Z)(n)}))}}),S({title:"Move item down",icon:"arrow-down",onClick:function(){var e;(e=a)<r.length-1&&c((function(n){var t=n[e+1];return n[e+1]=n[e],n[e]=t,(0,te.Z)(n)}))}}),S({title:"Edit menu item",icon:"edit",onClick:function(){!function(e){var n=r[e],t=n.title,a=n.target,i=n.link,s=n.blank;p(e),j(t),N(a),A(i),L(s),h(!0),Z(!0)}(a)}}),S({title:"Remove menu item",icon:"trash",onClick:function(){var e;e=a,t({title:"Removing menu item",message:"Remove this menu item?",onConfirm:function(){n("Menu item removed","success"),c((function(n){return n.splice(e,1),(0,te.Z)(n)}))}})}})]})]},a)})):(0,o.jsx)("tr",{className:"jsx-b83f427d8620324b",children:(0,o.jsx)("td",{colSpan:"3",className:"jsx-b83f427d8620324b empty",children:"No menu items"})})})]}),(0,o.jsx)("div",{className:"jsx-b83f427d8620324b "+(u().actionsRow||""),children:(0,o.jsxs)("button",{onClick:K,className:"jsx-b83f427d8620324b "+(u().adminButton||""),children:[(0,o.jsx)(T,{icon:"add"}),"Add new menu item"]})})]}),(0,o.jsx)(D,{title:d?"Edit menu item":"Add new menu item",isOpened:M,children:(0,o.jsx)("div",{className:"jsx-b83f427d8620324b "+(u().adminForm||""),children:(0,o.jsxs)("div",{className:"jsx-b83f427d8620324b "+(u().subFormInfo||""),children:[(0,o.jsxs)("div",{className:"jsx-b83f427d8620324b "+(u().infoRow||""),children:[(0,o.jsx)("label",{className:"jsx-b83f427d8620324b",children:"Title:"}),(0,o.jsxs)("div",{className:"jsx-b83f427d8620324b",children:[g&&(0,o.jsx)("div",{className:"jsx-b83f427d8620324b",children:(0,o.jsx)("b",{className:"jsx-b83f427d8620324b "+(u().hasError||""),children:"The field is required"})}),(0,o.jsx)("div",{className:"jsx-b83f427d8620324b",children:(0,o.jsx)("input",{value:v,onChange:function(e){j(e)},type:"text",className:"jsx-b83f427d8620324b"})})]})]}),(0,o.jsxs)("div",{className:"jsx-b83f427d8620324b "+(u().infoRow||""),children:[(0,o.jsx)("label",{className:"jsx-b83f427d8620324b",children:"Target:"}),(0,o.jsx)("div",{className:"jsx-b83f427d8620324b",children:(0,o.jsxs)("select",{value:k,onChange:function(e){N(e.target.value)},className:"jsx-b83f427d8620324b",children:[Object.keys(pe).map((function(e){return(0,o.jsx)("option",{value:e,className:"jsx-b83f427d8620324b",children:"[".concat(e," PAGE]")},e)})),(0,o.jsx)("option",{value:"",className:"jsx-b83f427d8620324b",children:"Custom link"})]})})]}),""==k&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"jsx-b83f427d8620324b "+(u().infoRow||""),children:[(0,o.jsx)("label",{className:"jsx-b83f427d8620324b",children:"Href (URL):"}),(0,o.jsxs)("div",{className:"jsx-b83f427d8620324b",children:[B&&(0,o.jsx)("div",{className:"jsx-b83f427d8620324b",children:(0,o.jsx)("b",{className:"jsx-b83f427d8620324b "+(u().hasError||""),children:"The field is required"})}),(0,o.jsx)("div",{className:"jsx-b83f427d8620324b",children:(0,o.jsx)("input",{type:"text",value:I,onChange:function(e){A(e)},className:"jsx-b83f427d8620324b"})})]})]}),(0,o.jsxs)("div",{className:"jsx-b83f427d8620324b "+(u().infoRow||""),children:[(0,o.jsx)("label",{className:"jsx-b83f427d8620324b"}),(0,o.jsx)("div",{className:"jsx-b83f427d8620324b",children:(0,o.jsxs)("label",{className:"jsx-b83f427d8620324b",children:[(0,o.jsx)("input",{type:"checkbox",checked:O,onChange:function(e){L(!O)},className:"jsx-b83f427d8620324b"}),(0,o.jsx)("span",{className:"jsx-b83f427d8620324b",children:"Open in new tab"})]})})]})]}),(0,o.jsxs)("div",{className:"jsx-b83f427d8620324b "+(u().actionsRow||""),children:[(0,o.jsx)("button",{onClick:Y,className:"jsx-b83f427d8620324b "+(u().adminButton||""),children:d?"Edit":"Add"}),(0,o.jsx)("button",{onClick:P,className:"jsx-b83f427d8620324b "+(u().adminButton||""),children:"Cancel"})]})]})})})]}),(0,o.jsx)("div",{className:u().actionsRowMain,children:(0,o.jsx)(_,{chainId:"STORAGE",icon:"save",className:u().adminMainButton,disabled:H,onClick:V,action:"Save changes",children:H?"Saving...":"Save to storage config"})})]})}}}var ye,be,je=function(){var e=(0,a.Z)(r().mark((function e(n){var t,a,i,s,o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.symbol,a=n.vsCurrency,e.prev=1,e.next=5,fetch("".concat("https://noxon.wpmix.net/cursAll.php","?fiat=").concat(a,"&tokens=").concat(t)).then((function(e){return e.json()}));case 5:return o=e.sent,c=null===o||void 0===o||null===(i=o.data)||void 0===i||null===(s=i.find)||void 0===s?void 0:s.call(i,(function(e){return(null===e||void 0===e?void 0:e.symbol)===t})),e.abrupt("return",c.quote[a].price);case 10:return e.prev=10,e.t0=e.catch(1),console.group("%c getPrice","color: red;"),console.error(e.t0),console.groupEnd(),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n){return e.apply(this,arguments)}}(),ge=function(){var e=(0,a.Z)(r().mark((function e(n){var t,a,i,s,o,c,l,d;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.provider,a=n.from,i=n.to,s=n.amount,o=n.onHash,c=void 0===o?function(){}:o,l=n.data,d={from:a,to:i,value:se.vz(String(s),"ether").toHexString(),data:l},e.prev=2,e.next=5,t.eth.sendTransaction(d).on("transactionHash",(function(e){return c(e)}));case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(2),console.group("%c send","color: red;"),console.error(e.t0),console.groupEnd(),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(n){return e.apply(this,arguments)}}(),we={LOTTERY_OFF_COPYRIGTH:{title:"LotteryFactory - Disable copyright",desc:"LotteryFactory - Disables copyright of OnOut",price:.1,chainId:56,product:"LotteryFactory",include_packs:[]},LOTTERY_FULL_VERSION:{title:"LotteryFactory - Full version",desc:"LotteryFactory - Full version. Disabled copyright of OnOut. Onout commission disabled",price:1500,isUSDT:!0,chainId:[1,56],product:"LotteryFactory",include_packs:["LOTTERY_OFF_COPYRIGTH"]}},ke=t(34360),Te=t(8433);!function(e){e[e.danger=1]="danger",e[e.success=2]="success",e[e.warning=3]="warning",e[e.attention=4]="attention",e[e.unimportant=5]="unimportant",e[e.voteIdea=6]="voteIdea",e[e.bonusFuel=7]="bonusFuel"}(ye||(ye={}));var Ne=(be={},(0,x.Z)(be,ye.danger,"\u2b55"),(0,x.Z)(be,ye.success,"\ud83d\udfe2"),(0,x.Z)(be,ye.warning,"\ud83d\udd25"),(0,x.Z)(be,ye.attention,"\ud83d\udca5"),(0,x.Z)(be,ye.unimportant,"\ud83d\udca4"),(0,x.Z)(be,ye.voteIdea,"\ud83d\udc24"),(0,x.Z)(be,ye.bonusFuel,"\u26fd"),be),Se=function(e){var n=e.msg,t=e.status,a=window.location.hostname||document.location.host;if("localhost"!==a){var i=["localhost"===a?"".concat(Ne[ye.unimportant]," "):t&&Ne[t]?"".concat(Ne[t]," "):"","[".concat(a,"] "),n].join("");try{(0,Te.Z)({url:"".concat("https://noxon.wpmix.net/counter.php","?msg=").concat(encodeURI(i),"&toonoutdev=1&version=2"),method:"post"}).catch((function(e){return console.error(e)}))}catch(s){console.error(s)}}};function Ce(e){e.setDoReloadStorage;var n=e.saveStorageConfig,t=e.openConfirmWindow,i=e.addNotify,s=e.getActiveChain,c=e.storageData,l=(e.getStorageData,s().activeChainId),d=(0,R.T_)(l),h=(0,y.useState)(""),m=h[0],f=h[1],p=(0,y.useState)(!1),x=p[0],v=p[1],b=(0,y.useState)(0),j=b[0],g=b[1],w=(0,y.useState)(0),k=w[0],N=w[1],S=(0,y.useState)(!1),C=S[0],I=S[1],A=(0,y.useState)(""),B=A[0],O=A[1],L=(0,y.useState)(!1),E=L[0],M=L[1],Z=(0,y.useState)(!1),P=Z[0],K=Z[1],Y=function(){var e=(0,a.Z)(r().mark((function e(){var n,t,a,o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s(),t=n.activeWeb3,a=n.activeAccount,i("Begin purchase... Confirm transaction"),M(!0),e.prev=3,Se({msg:"Begin buy activate key ".concat(B," from ").concat(a),status:ye.attention}),e.next=7,ge({provider:t,from:a,to:"0x873351e707257C28eC6fAB1ADbc850480f6e0633",amount:k,onHash:function(e){i("Pay TX ".concat(e),"success")}});case 7:(null===(o=e.sent)||void 0===o?void 0:o.status)&&(Se({msg:"Activation key bought ".concat(B," from ").concat(a),status:ye.success}),i("Successfull purchesed","success"),M(!1),v(!1),c=(0,ke.Z)(B,a),f(c),V(!0),i("Your key ".concat(c,". Save it"),"success")),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),i("Fail purchase. ".concat(e.t0.message?e.t0.message:""),"error"),M(!1),K(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=(0,a.Z)(r().mark((function e(n){var t,a,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(n),t=we[n],a=d.nativeCurrency.symbol,e.next=5,je({symbol:a,vsCurrency:"USD"});case 5:i=e.sent,t.isUSDT?(g(t.price),N(t.price/i),I(!1)):(N(t.price),g(t.price*i),I(!0)),Se({msg:"Open buy key ".concat(n),status:ye.attention}),v(!0);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),H=(0,y.useState)(!1),U=H[0],V=H[1],q=(0,y.useState)(!1),z=q[0],J=q[1],X=function(){$(m)?(Se({msg:"Activate key ".concat(m),status:ye.attention}),t({title:"Activating license key",message:"Activate license key?",onConfirm:function(){J(!0),n({onBegin:function(){i("Confirm transaction")},onReady:function(){J(!1),i("Key activated","success"),V(!1),f("")},onError:function(e){J(!1),i("Fail activate key. ".concat(e.message?e.message:""),"error")},newData:{licenseKeys:(0,te.Z)(null===c||void 0===c?void 0:c.licenseKeys).concat([m])}})}})):i("You entered an invalid activation key","error")},$=function(e){var n=s().activeAccount,t=Object.keys(we).filter((function(e){return(0,ke.Z)(e,n)==m}));return t.length>0};return{render:function(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:u().adminForm,children:[(0,o.jsx)("div",{className:u().adminSectionDescription,children:"Attention. The activation key will be linked to your active wallet. If you lose access to your wallet, we will not be able to restore your purchase."}),(0,o.jsxs)("div",{className:u().subFormInfo,children:[(0,o.jsx)("h3",{children:"Activating an existing purchase key"}),(0,o.jsxs)("div",{className:u().subForm,children:[(0,o.jsxs)("div",{className:u().infoRow,children:[(0,o.jsxs)("label",{children:[(0,o.jsxs)("div",{className:u().helpTooltip,children:[(0,o.jsx)("span",{children:"?"}),(0,o.jsx)("div",{children:'If you already have an activation key. Specify it in this field and click "Activate"'})]}),"Purchase key:"]}),(0,o.jsx)("div",{children:(0,o.jsx)("div",{children:(0,o.jsx)("input",{type:"text",value:m,onChange:function(e){f(e.target.value)}})})})]}),(0,o.jsx)("div",{className:u().actionsRow,children:(0,o.jsx)(_,{chainId:"STORAGE",onClick:X,disabled:z,icon:"receipt",action:"Active key",className:u().adminButton,children:z?"Key activation...":"Activate key"})})]})]}),(0,o.jsxs)("div",{className:u().subFormInfo,children:[(0,o.jsx)("h3",{children:"Purchasing a product activation key"}),(0,o.jsxs)("div",{className:"jsx-a34ffd9bc7fe9e6a PurchaseKeys",children:[(0,o.jsx)(F(),{id:"a34ffd9bc7fe9e6a",children:".PurchaseKeys.jsx-a34ffd9bc7fe9e6a{}.PurchaseKeys.jsx-a34ffd9bc7fe9e6a .card.jsx-a34ffd9bc7fe9e6a{margin:10px;padding:4px;border:1px solid#fff;-webkit-box-shadow:0 0 2px 2px#4f5760;-moz-box-shadow:0 0 2px 2px#4f5760;box-shadow:0 0 2px 2px#4f5760;background:#403f3f}.PurchaseKeys.jsx-a34ffd9bc7fe9e6a .card.jsx-a34ffd9bc7fe9e6a .title.jsx-a34ffd9bc7fe9e6a{font-size:12pt;font-weight:bold;border-bottom:1px solid#fff;padding:4px;text-shadow:1px 1px black,-1px 1px black,1px -1px black,-1px -1px black}.PurchaseKeys.jsx-a34ffd9bc7fe9e6a .card.jsx-a34ffd9bc7fe9e6a .desc.jsx-a34ffd9bc7fe9e6a{padding:15px;font-size:10pt}.PurchaseKeys.jsx-a34ffd9bc7fe9e6a .card.jsx-a34ffd9bc7fe9e6a .buyHolder.jsx-a34ffd9bc7fe9e6a{padding:4px;border-top:1px solid#fff;text-align:right}.PurchaseKeys.jsx-a34ffd9bc7fe9e6a .card.jsx-a34ffd9bc7fe9e6a .buyHolder.jsx-a34ffd9bc7fe9e6a STRONG.jsx-a34ffd9bc7fe9e6a{color:#64d31f}"}),Object.keys(we).map((function(e){var n=(0,G.Z)(e,c);return(0,o.jsxs)("div",{className:"jsx-a34ffd9bc7fe9e6a card",children:[(0,o.jsx)("div",{className:"jsx-a34ffd9bc7fe9e6a title",children:we[e].title}),(0,o.jsx)("div",{className:"jsx-a34ffd9bc7fe9e6a desc",children:we[e].desc}),(0,o.jsx)("div",{className:"jsx-a34ffd9bc7fe9e6a buyHolder",children:n?(0,o.jsxs)("strong",{className:"jsx-a34ffd9bc7fe9e6a",children:[(0,o.jsx)(T,{icon:"circle-check"})," ","You already got it"]}):(0,o.jsx)(_,{chainId:we[e].chainId,onClick:function(){W(e)},disabled:!1,icon:"money-check-dollar",action:"Buy",className:u().adminButton,children:"Buy an activation key"})})]},e)}))]})]})]}),(0,o.jsx)(D,{isOpened:x,hasClose:!0,onClose:function(){v(!1)},title:"Payment for an activation key",children:(0,o.jsxs)("div",{className:"jsx-8b00dd331cd61514 buyKeyModal",children:[(0,o.jsx)(F(),{id:"8b00dd331cd61514",children:".buyKeyModal.jsx-8b00dd331cd61514{padding:10px}.buyKeyModal.jsx-8b00dd331cd61514 A.jsx-8b00dd331cd61514{display:block;padding:5px;color:#abd4ff;font-weight:bold}.buyKeyModal.jsx-8b00dd331cd61514 A.jsx-8b00dd331cd61514:hover{color:#fff}"}),(0,o.jsx)("p",{className:"jsx-8b00dd331cd61514",children:"You can use this links to buy crypto with a bank card:"}),(0,o.jsxs)("a",{href:"https://changelly.com/buy/".concat(d.nativeCurrency.symbol),target:"_blank",rel:"noreferrer",className:"jsx-8b00dd331cd61514 link paymentLink",children:["Buy ",d.nativeCurrency.symbol," on Changelly"]}),(0,o.jsxs)("a",{href:"https://www.binance.com/en/buy-".concat(d.nativeCurrency.binancePurchaseKey||d.nativeCurrency.symbol),target:"_blank",rel:"noreferrer",className:"jsx-8b00dd331cd61514 link paymentLink",children:["Buy ",d.nativeCurrency.symbol," on Binance"]}),(0,o.jsx)("p",{className:"jsx-8b00dd331cd61514 notice",children:"The price may vary slightly"}),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("p",{className:"jsx-8b00dd331cd61514 warning",children:"Do not leave this page until successful payment. If you have any problems with the payment, please contact us."})}),P&&(0,o.jsxs)("p",{className:"jsx-8b00dd331cd61514 error",children:["Error: ",P]}),(0,o.jsxs)("button",{disabled:E,onClick:Y,className:"jsx-8b00dd331cd61514 "+(u().adminButton||""),children:[(0,o.jsx)(T,{icon:"money-check-dollar"}),C?(0,o.jsx)(o.Fragment,{children:"Buy for ".concat(k," ").concat(d.nativeCurrency.symbol," (~$").concat(Number(j).toFixed(2),") ")}):(0,o.jsx)(o.Fragment,{children:"Buy for $".concat(j," (~").concat(k," ").concat(d.nativeCurrency.symbol,") ")})]})]})}),(0,o.jsx)(D,{isOpened:U,title:"Key activation",children:(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"jsx-e9ded62631f7a3b0 activateKeyBox",children:[(0,o.jsx)(F(),{id:"e9ded62631f7a3b0",children:".activateKeyBox.jsx-e9ded62631f7a3b0{text-align:center;padding:10px}.activateKeyBox.jsx-e9ded62631f7a3b0 STRONG.jsx-e9ded62631f7a3b0{display:block;padding:10px;margin:10px;border:1px solid#262936;-webkit-box-shadow:inset 0 0 7px 1px black;-moz-box-shadow:inset 0 0 7px 1px black;box-shadow:inset 0 0 7px 1px black;color:#000;background:#fff}"}),(0,o.jsx)("span",{className:"jsx-e9ded62631f7a3b0",children:"You have successfully made a payment. Now you need to save your activation key"}),(0,o.jsx)("strong",{className:"jsx-e9ded62631f7a3b0",children:m}),(0,o.jsx)(_,{chainId:"STORAGE",onClick:X,disabled:z,icon:"receipt",action:"Active key",className:u().adminButton,children:z?"Key activation...":"Activate key"})]})})})]})}}}var Ie=t(94360),Ae=t(84575),Fe=function(e){return new Promise((function(n){window.setTimeout((function(){n()}),e)}))},Be={main:"Main settings",gamerules:"Rules",lotterybank:"Lottery Bank",rounds:"Rounds",texts:"Edit texts",menu:"Menu",design:"Design",license:"License"},Re=(function(){var e=Object.keys(R.w5).map((function(e){return{id:R.w5[e].networkVersion,title:R.w5[e].chainName}}));e.unshift({id:0,title:"Select Blockchain"})}(),function(e){var n=(0,O.n)(),t=n.storageChainId,s=n.storageAddress,l=e.storageData,d=(e.storageIsLoading,e.isOwner),h=e.openConfirmWindow,m=e.addNotify,f=e.setDoReloadStorage,x=e.setDoReloadStorageFast,v=e.storageTexts,b=e.storageDesign,j=e.iframeHideMenu,g=e.storageMenu,w=(0,y.useState)(!1),k=w[0],T=w[1],N=(0,y.useState)(!1),S=N[0],C=N[1],I=(0,y.useState)(!1),A=I[0],F=I[1],D=(0,y.useState)(!1),_=D[0],E=D[1],M=function(e,n){var t=!1;try{t=e.message.replace("Internal JSON-RPC error.",""),t=JSON.parse(t)}catch(a){}switch(t&&t.message?t.message:e.message){case"execution reverted: You don't own this token!":console.log("You dont own this token");break;case"MetaMask Tx Signature: User denied transaction signature.":console.log("Transaction denied");break;case"execution reverted: ERC721: invalid token ID":console.log("Invalid token ID");break;default:console.log("Unkrnown error",e.message)}};window.activeWeb3=S;var Z=function(e){T(e)},P=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S||"".concat(k)!="".concat(t)){e.next=4;break}S.eth.getAccounts().then((function(e){F(e[0]);var n=new S.eth.Contract(Ie.Mt,s);H(n)})).catch((function(e){console.log(">>> initOnWeb3Ready",e),M(e)})),e.next=8;break;case 4:return e.next=6,(0,B.IC)();case 6:e.sent&&K();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,y.useEffect)((function(){var e;e="on useEffect activeWeb3 initOnWeb3Ready",console.log(e),P()}),[S]);var K=function(){var e=(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,B.pE)({onBeforeConnect:function(){E(!0)},onSetActiveChain:T,onConnected:function(e,n){C(n),(0,B.uK)(Z),E(!1)},onError:function(e){console.log(">>>> connectWithMetamask",e),M(e),E(!1)},needChainId:t});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=(0,y.useState)(!1),W=Y[0],H=Y[1],U=(0,y.useState)(!1),V=U[0],G=U[1],q=function(){var e=(0,a.Z)(r().mark((function e(n){var s,o,d,u,f,p,v;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.onBegin,o=n.onReady,d=n.onError,u=n.newData,!V){e.next=4;break}return m("Storage already saving...","error"),e.abrupt("return");case 4:f=(0,i.Z)({},l,u),p=function(){var e=(0,a.Z)(r().mark((function e(){var n,t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A||!W){e.next=23;break}return m("Saving config to storage. Confirm transaction"),G(!0),s&&s(),n=f,e.prev=5,e.next=8,(0,ae.A)(A,W,"setKeyData",[(0,Ae.Z)(),{owner:A,info:JSON.stringify(n)}]);case 8:return t=e.sent,e.next=11,S.eth.getGasPrice();case 11:a=e.sent,t.gasPrice="0x"+new c.BigNumber(a).toString(16),W.methods.setKeyData((0,Ae.Z)(),{owner:A,info:JSON.stringify(n)}).send(t).then((function(){G(!1),x(!0),o&&o()})).catch((function(e){console.log(">>> error",e),G(!1),d&&d(e)})),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(5),console.log(">>> error",e.t0),G(!1),d&&d(e.t0);case 21:e.next=24;break;case 23:m("Fail save storage. No active wallet or contract not ready yet","error");case 24:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(){return e.apply(this,arguments)}}(),console.log(">> do save",(0,B.BV)()!==t,(0,B.BV)(),t),(0,B.BV)(t)?p():(v=(0,R.T_)(t),h({title:"Need change active chain for save main config",message:"Please change network Storage chain (".concat(v.chainName,")"),onConfirm:(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m("Switching to Storage chain"),e.next=3,(0,B.M5)(t);case 3:return e.next=5,Fe(2e3);case 5:p();case 6:case"end":return e.stop()}}),e)}))),okLabel:"Switch"}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),J=l&&!l.isInstalled,X=(0,y.useState)(!J),$=X[0],ee=X[1],ne=(0,y.useState)(!1),te=ne[0],ie=ne[1],se=(0,y.useState)("main"),re=se[0],oe=se[1],ce=(0,y.useState)((null===l||void 0===l?void 0:l.chainId)||0),de=(ce[0],ce[1]);(0,y.useEffect)((function(){l&&de(l.chainId)}),[l]);var he=function(){var e=(0,R.T_)(k),n=(0,R.T_)(t);return(0,o.jsxs)("div",{className:u().adminActiveChainInfo,children:[(0,o.jsxs)("span",{children:["Current active network is ",(0,o.jsxs)("b",{children:[(null===e||void 0===e?void 0:e.chainName)||"Unknown"," (",k,")"]})]}),(0,o.jsxs)("span",{children:["Main config storage network is ",(0,o.jsxs)("b",{children:[(null===n||void 0===n?void 0:n.chainName)||"Unknown"," (",t,")"]})]})]})},fe={setDoReloadStorage:f,setDoReloadStorageFast:x,saveStorageConfig:q,openConfirmWindow:h,addNotify:m,getActiveChain:function(){return{activeAccount:A,activeChainId:k,activeWeb3:S}},storageChainId:t,storageData:l,getStorageData:function(){return l},storageDesign:b,storageTexts:v,storageMenu:g},pe=new z(fe),xe=new Q(fe),be=new le(fe),je=new ue(fe),ge=new L(fe),we=new me(fe),ke=new Ce(fe),Te=new ve(fe);return $&&(J=!1),(0,o.jsxs)("div",{className:u().container,children:[!j&&p("settings",!0),(0,o.jsx)("h1",{className:u().h1,children:"Settings"}),null!==l&&(0,o.jsx)(o.Fragment,{children:J?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{children:"App needs to be installed on this domain"}),A?(0,o.jsxs)(o.Fragment,{children:[he(),(0,o.jsx)("button",{disabled:te,className:"".concat(u().mainButton," ").concat(u().autoWidth," primaryButton"),onClick:function(){Se({msg:"Installing lottery from ".concat(A),status:ye.attention}),q({onBegin:function(){ie(!0),m("Confirm transaction for setup Lottery on this domain")},onReady:(0,a.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie(!1),ee(!0),m("Lottery successfull installed on this domain. Now you can configure farm","success"),f(!0),Se({msg:"Lottery installed at domain (".concat(A,")"),status:ye.attention});case 5:case"end":return e.stop()}}),e)}))),onError:function(e){ie(!1),m("Fail setup Lottery on domain","error")},newData:{isInstalled:!0}})},children:te?"Setup on domain...":"Setup Lottery on this domain"})]}):(0,o.jsx)("button",{disabled:_,className:"".concat(u().mainButton," primaryButton"),onClick:K,children:_?"Connecting":"Connect Wallet"})]}):(0,o.jsx)(o.Fragment,{children:A?(0,o.jsx)(o.Fragment,{children:d?(0,o.jsxs)(o.Fragment,{children:[he(),(0,o.jsx)("ul",{className:u().settingsTabsNav,children:Object.keys(Be).map((function(e){return(0,o.jsx)("li",{onClick:function(){oe(e)},className:e===re?u().activeTab:"",children:Be[e]},e)}))}),(0,o.jsx)("hr",{className:"".concat(u().divider," ").concat(u().spacerTop)}),"main"===re&&pe.render(),"gamerules"===re&&xe.render(),"lotterybank"===re&&we.render(),"rounds"===re&&be.render(),"texts"===re&&je.render(),"design"===re&&ge.render(),"license"===re&&ke.render(),"menu"===re&&Te.render()]}):(0,o.jsx)("h2",{children:"Access denied"})}):(0,o.jsx)("button",{disabled:_,className:"".concat(u().mainButton," primaryButton"),onClick:K,children:_?"Connecting":"Connect Wallet"})})})]})})}},function(e){e.O(0,[976,94,774,888,179],(function(){return n=52837,e(e.s=n);var n}));var n=e.O();_N_E=n}]);