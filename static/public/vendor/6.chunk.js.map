{"version":3,"sources":["hooks/useTokenBalance.ts","components/PageSection/svg/CurvedSvg.tsx","components/PageSection/CurvedDivider.tsx","components/PageSection/index.tsx","hooks/useTheme.ts","state/lottery/hooks.ts","views/Lottery/hooks/useGetNextLotteryEvent.ts","views/Lottery/hooks/useStatusTransitions.tsx","components/Balance.tsx","views/Lottery/svgs/TicketPurchaseCard.tsx","views/Lottery/svgs/WhiteBunny.tsx","views/Lottery/svgs/Balls.tsx","hooks/useLastUpdated.ts","hooks/useApproveConfirmTransaction.ts","utils/calls/estimateGas.ts","components/ApproveConfirmButtons.tsx","utils/calls/farms.ts","components/ConnectWalletButton.tsx","views/Lottery/components/BuyTicketsModal/BuyTicketsModal.tsx","views/Lottery/components/BuyTicketsModal/NumTicketsToBuyButton.tsx","views/Lottery/components/BuyTicketsModal/TicketInput.tsx","views/Lottery/components/BuyTicketsModal/EditNumbersModal.tsx","views/Lottery/helpers.tsx","views/Lottery/components/BuyTicketsModal/generateTicketNumbers.tsx","views/Lottery/components/BuyTicketsModal/useTicketsReducer.tsx","views/Lottery/components/BuyTokenButton.tsx","views/Lottery/hooks/useGetUnclaimedRewards.ts","hooks/useCallWithGasPrice.ts","views/Lottery/components/BuyTicketsButton.tsx","views/Lottery/components/Hero.tsx","state/lottery/fetchUnclaimedUserRewards.ts","views/Lottery/components/WinningNumbers.tsx","views/Lottery/components/TicketNumber.tsx","views/Lottery/components/ClaimPrizesModal/ClaimPrizesInner.tsx","views/Lottery/components/ClaimPrizesModal/index.tsx","views/Lottery/components/ViewTicketsModal/PreviousRoundTicketsInner.tsx","views/Lottery/components/ViewTicketsModal/CurrentRoundTicketsInner.tsx","views/Lottery/components/ViewTicketsModal/index.tsx","views/Lottery/components/RewardBracketDetail.tsx","views/Lottery/components/RewardBrackets.tsx","views/Lottery/components/NextDrawCard.tsx","utils/getTimePeriods.ts","views/Lottery/components/Countdown/Timer.tsx","views/Lottery/hooks/useNextEventCountdown.ts","views/Lottery/components/Countdown/index.tsx","views/Lottery/components/HistoryTabMenu.tsx","views/Lottery/components/YourHistoryCard/FinishedRoundRow.tsx","views/Lottery/components/YourHistoryCard/FinishedRoundTable.tsx","views/Lottery/components/PreviousRoundCard/Body.tsx","views/Lottery/components/PreviousRoundCard/FooterExpanded.tsx","views/Lottery/components/PreviousRoundCard/Footer.tsx","views/Lottery/components/YourHistoryCard/index.tsx","views/Lottery/components/AllHistoryCard/RoundSwitcher.tsx","views/Lottery/components/AllHistoryCard/index.tsx","views/Lottery/components/CheckPrizesSection.tsx","views/Lottery/components/HowToPlay.tsx","views/Lottery/hooks/useShowMoreUserRounds.ts","components/ServiceLink/index.tsx","components/Menu/config/config.ts","components/Menu/UserMenu/CopyAddress.tsx","components/Menu/UserMenu/WalletInfo.tsx","state/transactions/hooks.tsx","components/Menu/UserMenu/TransactionRow.tsx","components/Menu/UserMenu/WalletModal.tsx","components/Menu/UserMenu/WalletTransactions.tsx","components/Menu/UserMenu/index.tsx","utils/prices.ts","state/swap/types.ts","state/swap/queries/lastPairDayId.ts","state/swap/queries/pairHourDatas.ts","state/swap/queries/pairDayDatasByIdsQuery.ts","state/swap/fetch/constants.ts","state/swap/queries/pairDayDatas.ts","state/swap/queries/pairHourDatasByIds.ts","state/swap/queries/lastPairHourId.ts","state/swap/hooks.ts","components/Menu/GlobalSettings/TransactionSettings.tsx","components/QuestionHelper/index.tsx","components/Menu/GlobalSettings/SettingsModal.tsx","components/Menu/utils.ts","components/Menu/index.tsx","views/Lottery/index.tsx","views/Lottery/pageSectionStyles.tsx"],"names":["FetchStatus","sharedStyles","theme","clipPath","clipFill","css","isDark","dark","light","colors","background","ConcaveContainer","styled","Box","ConvexContainer","ConvexTop","width","height","id","clipPathUnits","d","ConvexBottom","ConcaveTop","ConcaveBottom","Wrapper","div","dividerFill","index","ComponentWrapper","CurvedDivider","dividerPosition","dividerComponent","concave","showConvexTop","showConvexBottom","showConcaveTop","showConcaveBottom","BackgroundColor","Flex","getPadding","ChildrenWrapper","Container","mediaQueries","sm","lg","PageSection","children","svgFill","hasCurvedDivider","concaveDivider","containerProps","innerProps","props","useTheme","useThemeManager","toggleTheme","useContext","StyledThemeContext","useGetCurrentLotteryId","useSelector","state","lottery","currentLotteryId","useGetUserLotteriesGraphData","userLotteryData","useGetLotteriesGraphData","lotteriesData","useLottery","currentRound","processedCurrentRound","useProcessLotteryResponse","isTransitioning","maxNumberTicketsPerBuyOrClaimAsString","maxNumberTicketsPerBuyOrClaim","useMemo","BigNumber","useGetNextLotteryEvent","endTime","status","t","useTranslation","useState","nextEventTime","preCountdownText","postCountdownText","nextEvent","setNextEvent","useEffect","LotteryStatus","OPEN","CLOSE","CLAIMABLE","useStatusTransitions","account","useWeb3React","dispatch","useAppDispatch","previousStatus","usePreviousValue","fetchPublicLotteries","fetchUserLotteries","fetchCurrentLotteryId","interval","setInterval","a","clearInterval","Balance","value","color","decimals","isDisabled","unit","prefix","onClick","previousValue","useRef","current","start","end","suffix","duration","separator","TicketPurchaseCard","viewBox","filter","fill","fillRule","clipRule","x","y","stroke","strokeWidth","strokeDasharray","filterUnits","colorInterpolationFilters","floodOpacity","result","in","type","values","dx","dy","mode","in2","stdDeviation","WhiteBunny","maskUnits","mask","cx","cy","rx","ry","BallTextWrapper","BallText","Text","rotationTransform","ballsMap","pink","r","style","mixBlendMode","opacity","lilac","teal","aqua","green","yellow","BallWithNumber","number","size","fontSize","BallComponent","alignItems","justifyContent","position","mx","bold","useLastUpdated","Date","now","lastUpdated","setStateLastUpdated","previousLastUpdated","setLastUpdated","useCallback","useTokenBalance","tokenAddress","NOT_FETCHED","SUCCESS","FAILED","balance","BIG_ZERO","fetchStatus","balanceState","setBalanceState","fastRefresh","useRefresh","fetchBalance","contract","getBep20Contract","balanceOf","res","toString","console","error","prev","useGetBnbBalance","setFetchStatus","ethers","from","setBalance","simpleRpcProvider","getBalance","walletBalance","refresh","initialState","approvalState","confirmState","reducer","actions","useApproveConfirmTransaction","onApprove","onConfirm","onRequiresApproval","onSuccess","noop","onApproveSuccess","useReducer","toastError","useToast","then","isEnoughAllowance","isApproving","isApproved","isConfirming","isConfirmed","hasApproveFailed","hasConfirmFailed","handleApprove","tx","wait","receipt","handleConfirm","params","ButtonArrangement","estimateGas","methodName","methodArgs","gasMarginPer10000","Error","address","rawGasEstimation","gasEstimation","mul","add","callWithEstimateGas","overrides","gasLimit","DEFAULT_GAS_LIMIT","ConnectWalletButton","useAuth","login","logout","onPresentConnectModal","useWalletModal","className","BuyingStage","StyledApproveConfirmButtonRow","md","Button","UIKitButton","iconAttrs","ChevronRight","ChevronRightIcon","attrs","ChevronBottom","ChevronDownIcon","spinnerIcon","spin","ApproveConfirmButtons","isApproveDisabled","isConfirmDisabled","buttonArrangement","ROW","confirmLabel","confirmId","confirmButtonText","disabled","endIcon","undefined","isLoading","StyledButton","NumTicketsToBuyButton","scale","p","variant","InputsContainer","isDuplicate","focused","DigitInput","input","countNumbers","window","SO_LotteryConfig","numbersCount","TicketContainer","ticket","duplicateWith","updateTicket","setFocused","containerRef","digit1","digit2","digit3","digit4","digit5","digit6","digitRefs","scrollInputIntoView","scrollIntoView","block","behavior","onPasteHandler","e","preventDefault","pasteContent","clipboardData","getData","length","test","filler","Array","split","onFocusHandler","onBlurHandler","onChangeHandler","event","digitId","currentKey","parseInt","key","includes","newNumbers","numbers","nextDigitId","nextInput","focus","prevDigitId","ref","onKeyDown","placeholder","onChange","onFocus","onBlur","onPaste","inputMode","StyledModal","Modal","ScrollableContainer","cardBorder","EditNumbersModal","totalCost","randomize","tickets","allComplete","onDismiss","isCheckingKYC","isWalletOkKYC","title","headerBackground","gradients","cardHeader","onBack","mb","token","symbol","map","TicketInput","flexDirection","m","kycVerifyLink","open","mt","parseRetrievedNumber","numberAsArray","splice","reverse","join","getDrawnDate","locale","endTimeInMs","toLocaleDateString","dateTimeOptions","dateOptions","year","month","day","timeOptions","hour","minute","processLotteryResponse","lotteryData","priceTicketInCakeAsString","priceTicketInCake","discountDivisorAsString","discountDivisor","amountCollectedInCakeAsString","amountCollectedInCake","lotteryId","userTickets","startTime","treasuryFee","firstTicketId","lastTicketId","finalNumber","cakePerBracket","countWinnersPerBracket","rewardsBreakdown","generateTicketNumbers","numberOfTickets","userCurrentTickets","minNumber","substr","maxNumber","existingTicketNumbers","generatedTicketNumbers","count","randomNumber","random","push","ticketsToBuy","ticketNumber","log","getInitialState","amount","randomTicketsAsStringArray","_","i","isComplete","action","payload","ticketId","newDuplicates","forEach","prevTicketId","dupsToUpdate","indexToRemove","findIndex","duplicate","updatedTicket","every","StyledBuyButton","BuyTokenButton","buyTokenLink","tokenTitle","ShortcutButtonsWrapper","isVisible","BuyTicketsModal","gasPrice","useGasPrice","library","callWithGasPrice","contractMethod","get","hasManualGasPriceOverride","getGasPrice","useCallWithGasPrice","setTicketsToBuy","discountValue","setDiscountValue","setTotalCost","ticketCostBeforeDiscount","setTicketCostBeforeDiscount","BUY","buyingStage","setBuyingStage","maxPossibleTicketPurchase","setMaxPossibleTicketPurchase","maxTicketPurchaseExceeded","setMaxTicketPurchaseExceeded","userNotEnoughCake","setUserNotEnoughCake","lotteryContract","useLotteryV2Contract","cakeContract","useCake","toastSuccess","tokens","cake","userCake","stringifiedUserCake","toJSON","memoisedUserCake","cakePriceBusd","price","hasFetchedBalance","userCakeDisplayBalance","getFullDisplayBalance","TooltipComponent","useTooltip","placement","tooltipOffset","targetRef","tooltip","tooltipVisible","limitNumberByMaxTicketsPerBuy","gt","getTicketCostAfterDiscount","numberTickets","times","plus","minus","getMaxTicketBuyWithDiscount","costAfterDiscount","ticketsBoughtWithDiscount","overallTicketBuy","validateInput","inputNumber","limitedNumberTickets","eq","maxPurchase","maxBalancePurchase","limitedMaxPurchase","lt","maxPlusDiscountTickets","secondTicketDiscountBuy","getMaxPossiblePurchase","setIsCheckingKYC","setIsHasKYC","setIsWalletOkKYC","existKyc","checkWalletKYC","isKycOk","numberOfTicketsToBuy","toFixed","costBeforeDiscount","discountBeingApplied","getNumTicketsByPercentage","percentage","percentageOfMaxTickets","Math","floor","toNumber","tenPercentOfBalance","twentyFivePercentOfBalance","fiftyPercentOfBalance","oneHundredPercentOfBalance","handleNumberButtonClick","reversedTicket","num","unshift","useTicketsReducer","getTicketsForPurchase","allowance","response","currentAllowance","ethersToBigNumber","currentTotalCost","getDecimalAmount","gte","totalCostEthBN","Toast","txHash","transactionHash","ticketsForPurchase","fetchUserTicketsAndLotteries","disableBuying","lte","EDIT","minWidth","mr","isWarning","onUserInput","inputAsInt","inputAsBN","currencyValue","maxTickets","display","percentageAsBn","isNaN","percentageDiscount","ml","borderTop","pt","SEQUENTIAL","BuyTicketsButton","useModal","onPresentBuyTicketsModal","floatingStarsLeft","keyframes","floatingStarsRight","floatingTicketLeft","floatingTicketRight","mainTicketAnimation","PrizeTotalBalance","gold","StyledBuyTicketButton","xs","ButtonWrapper","TicketSvgWrapper","Decorations","StarsDecorations","xl","Hero","prizeInBusd","prizeTotal","getBalanceNumber","ticketBuyIsDisabled","src","alt","my","chainName","lotteryAddress","getLotteryV2Address","fetchCakeRewardsForTickets","winningTickets","calls","winningTicket","roundId","rewardBracket","name","multicallv2","lotteryV2Abi","cakeRewards","cakeTotal","reduce","accum","cakeReward","ticketsWithUnclaimedRewards","getRewardBracketByNumber","ticketNumAsArray","winningNumsAsArray","matchingNumbers","getWinningTickets","roundDataAndUserTickets","ticketsWithRewardBrackets","allWinningTickets","unclaimedWinningTickets","getWinningNumbersForRound","targetRoundId","targetRound","find","pastLottery","fetchUnclaimedUserRewards","rounds","toLowerCase","roundsInRange","round","lastCheckableRoundId","MAX_LOTTERIES_REQUEST_SIZE","claimableRounds","roundsWithPossibleWinnings","claimed","totalTickets","roundsToCheck","slice","NUM_ROUNDS_TO_CHECK_FOR_REWARDS","idsToCheck","fetchUserTicketsForMultipleRounds","userTicketData","roundsWithTickets","roundData","roundDataAndWinningTickets","Promise","all","winningTicketsForPastRounds","roundsWithWinningTickets","winningTicketData","roundsWithUnclaimedWinningTickets","WinningNumbers","rotateText","rotationValues","setRotationValues","numAsArray","maxHeight","uniqueId","maxNumbers","StyledNumberWrapper","radii","default","RewardHighlighter","numberMatches","primary","TicketNumber","localId","digit","_uniqueId","ClaimInnerContainer","roundsToClaim","activeClaimIndex","setActiveClaimIndex","pendingTx","setPendingTx","ceil","pendingBatchClaims","setPendingBatchClaims","activeClaimData","usePriceCakeBusd","dollarReward","rewardAsBalance","getBalanceAmount","dollarRewardAsBalance","claimTicketsCallData","ticketIds","brackets","shouldBatchRequest","handleProgressToNextClaim","getTicketBatches","requests","maxAsNumber","ticketIdsSlice","bracketsSlice","handleClaim","message","handleBatchClaim","ticketBatches","transactionsToFire","receipts","ticketBatch","claimNum","claimTotal","textAlign","lineHeight","ModalContainer","StyledModalHeader","ModalHeader","BunnyDecoration","showConfetti","confetti","particleCount","startVelocity","gravity","spread","origin","ClaimPrizesModal","delay","ClaimPrizesInner","TopBox","dropdown","ScrollBox","TicketSkeleton","PreviousRoundTicketsInner","lotteryInfo","setLotteryInfo","allUserTickets","setAllUserTickets","isFetched","claimData","userWinningTickets","setUserWinningTickets","userRound","onPresentClaimModal","addWinningTicketInfoToAllTickets","_allTickets","_allWinningTickets","winningTicketEquivalent","fetchData","fetchUserTicketsForOneRound","fetchLottery","processedLotteryData","allTicketsWithWinningTicketInfo","ticketsSortedByWinners","sort","ticketA","ticketB","rewardBracket1","textTransform","getFooter","CurrentRoundTicketsInner","ViewTicketsModal","roundStatus","isPreviousRound","RewardBracketDetail","cakeAmount","numberWinners","isHistoricRound","isBurn","numberMatch","getRewardText","viewDecimals","RewardsInner","RewardBrackets","lotteryNodeData","cakeToBurn","rewardsLessTreasuryFee","setState","amountLessTreasuryFee","getCakeRewards","bracket","shareAsPercentage","rewardBrackets","bracketIndex","Grid","HeadingText","StyledCard","Card","NextDrawWrapper","NextDrawCard","currentLanguage","onPresentViewTicketsModal","isExpanded","setIsExpanded","endTimeMs","endDate","isLotteryOpen","userTicketCount","setIsBridgeKYC","checkKycCounter","setCheckKycCounter","kycOracle","axios","data","dest","source","resp","answer","catch","err","youHaveText","ticketsThisRoundText","PENDING","Boolean","toLocaleString","marginTop","whiteSpace","maxWidth","expanded","HOUR_IN_SECONDS","DAY_IN_SECONDS","MONTH_IN_SECONDS","YEAR_IN_SECONDS","getTimePeriods","seconds","delta","abs","timeLeft","years","months","days","hours","minutes","StyledTimerFlex","showTooltip","textSubtle","StyledTimerText","Heading","useNextEventCountdown","secondsRemaining","setSecondsRemaining","timer","setLotteryIsTransitioning","currentSeconds","prevSecondsRemaining","fetchCurrentLottery","Countdown","Timer","HistoryTabMenu","setActiveIndex","activeIndex","onItemClick","StyledSmallDotIcon","SmallDotIcon","textDisabled","FinishedRoundRow","hasWon","endTimeAsDate","toLocaleTimeString","FinishedRoundTable","handleShowMoreClick","numUserRoundsRequested","handleHistoryRowClick","filteredForClaimable","sortedByRoundId","roundA","roundB","px","pb","overflowY","finishedRound","StyledCardBody","CardBody","StyledCardRibbon","CardRibbon","PreviousRoundCardBody","userDataForRound","userLotteryRound","useMatchBreakpoints","isLg","isXl","isXxl","isLargerScreen","currentLotteryIdAsInt","isLatestRound","totalTicketNumber","youHadText","text","PreviousRoundCardFooter","fetchedLotteryGraphData","setFetchedLotteryGraphData","lotteryGraphDataFromState","useGetLotteryGraphDataById","getGraphData","getGraphLotteries","id_in","fetchedGraphData","NaN","formatNumber","totalUsers","getTotalUsers","ExpandableLabel","ExpandableLabelUiKit","FooterExpanded","YourHistoryCard","shouldShowRoundDetail","setShouldShowRoundDetail","selectedLotteryNodeData","setSelectedLotteryNodeData","selectedLotteryId","setSelectedLotteryId","cursor","getBody","StyledInput","Input","StyledIconButton","IconButton","RoundSwitcher","selectedRoundId","mostRecentRound","handleInputChange","handleArrowButtonPress","selectedRoundIdAsInt","pattern","currentTarget","validity","valid","StyledCardHeader","CardHeader","AllHistoryCard","latestRoundId","setLatestRoundId","setSelectedRoundId","numRoundsFetched","mostRecentFinishedRoundId","fetchLotteryData","target","useGetUnclaimedRewards","unclaimedRewards","setUnclaimedRewards","fetchAllRewards","IN_PROGRESS","unclaimedRewardsResponse","TicketImage","img","TornTicketImage","CheckPrizesSection","hasCheckedForRewards","setHasCheckedForRewards","hasRewardsToClaim","setHasRewardsToClaim","isFetchingRewards","lotteryIsNotClaimable","isCheckNowDisabled","Divider","BulletList","ul","StepContainer","StyledStepCard","card","StepCardInner","StepCard","step","label","subtitle","AllocationGrid","Link","AllocationColorCircle","AllocationMatch","PoolAllocations","winPercents","digits","parseFloat","match_1","match_2","match_3","match_4","match_5","match_6","GappedFlex","HowToPlay","steps","flex","useShowMoreUserRounds","MAX_USER_LOTTERIES_REQUEST_SIZE","setNumUserRoundsRequested","handleShowMoreUserRounds","fetchAdditionalUserLotteries","skip","ServiceLinkDiv","ServiceLink","href","rel","config","icon","showItemsOnMobile","items","nftsBaseUrl","hideSubNav","DropdownMenuItemType","DIVIDER","EXTERNAL_LINK","Address","Tooltip","isTooltipDisplayed","contrast","invertedContrast","CopyAddress","setIsTooltipDisplayed","displayTooltip","setTimeout","readOnly","navigator","clipboard","permissions","writeText","document","queryCommandSupported","ele","createElement","body","appendChild","select","execCommand","removeChild","WalletInfo","hasLowBnbBalance","cakeBalance","cakeFetchStatus","fontWeight","as","formatBigNumber","getBscScanLink","useAllTransactions","chainId","useActiveWeb3React","s","transactions","isTransactionRecent","getTime","addedTime","WalletView","TxnIcon","Summary","TxnLink","renderIcon","txn","TransactionRow","hash","external","summary","WalletTransactions","useDispatch","allTransactions","sortedTransactions","orderBy","Object","minHeight","clearAllTransactions","LOW_BNB_BALANCE","parseUnits","UIKitModalHeader","bubblegum","Tabs","WalletModal","initialView","WALLET_INFO","view","setView","newIndex","fullWidth","TRANSACTIONS","UserMenu","useProfile","profile","isInitialized","avatarSrc","nft","image","thumbnail","BASE_FEE","Percent","JSBI","BigInt","ONE_HUNDRED_PERCENT","subtract","PairDataTimeWindowEnum","gql","DAY","WEEK","MONTH","YEAR","SlippageError","DeadlineError","RegExp","getActiveSubMenuItem","pathname","menuItem","activeSubMenuItems","subMenuItem","startsWith","subMenuItem1","subMenuItem2","MenuHolder","NavHolder","NavItem","Logo","Menu","setLanguage","useLocation","usePhishingBannerManager","activeMenuItem","menuConfig","getActiveMenuItem","pageMenu","menu","logoUrl","logo","link","blank","LotteryPage","Lottery","useFetchLottery","historyTabMenuIndex","setHistoryTabMenuIndex","showServiceLink","hideServiceLink","endTimeAsInt","useShowMoreUserHistory","margin","paddingLeft","paddingRight"],"mappings":"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","file":"static/js/6.chunk.js","sourcesContent":["import { useEffect, useState } from 'react'\r\nimport { ethers } from 'ethers'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport tokens from 'config/constants/tokens'\r\nimport { getBep20Contract, getCakeContract } from 'utils/contractHelpers'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { simpleRpcProvider } from 'utils/providers'\r\nimport useRefresh from './useRefresh'\r\nimport useLastUpdated from './useLastUpdated'\r\n\r\ntype UseTokenBalanceState = {\r\n  balance: BigNumber\r\n  fetchStatus: FetchStatus\r\n}\r\n\r\nexport enum FetchStatus {\r\n  NOT_FETCHED = 'not-fetched',\r\n  SUCCESS = 'success',\r\n  FAILED = 'failed',\r\n}\r\n\r\nconst useTokenBalance = (tokenAddress: string) => {\r\n  const { NOT_FETCHED, SUCCESS, FAILED } = FetchStatus\r\n  const [balanceState, setBalanceState] = useState<UseTokenBalanceState>({\r\n    balance: BIG_ZERO,\r\n    fetchStatus: NOT_FETCHED,\r\n  })\r\n  const { account } = useWeb3React()\r\n  const { fastRefresh } = useRefresh()\r\n\r\n  useEffect(() => {\r\n    const fetchBalance = async () => {\r\n      const contract = getBep20Contract(tokenAddress)\r\n      try {\r\n        const res = await contract.balanceOf(account)\r\n        setBalanceState({ balance: new BigNumber(res.toString()), fetchStatus: SUCCESS })\r\n      } catch (e) {\r\n        console.error(e)\r\n        setBalanceState((prev) => ({\r\n          ...prev,\r\n          fetchStatus: FAILED,\r\n        }))\r\n      }\r\n    }\r\n\r\n    if (account) {\r\n      fetchBalance()\r\n    }\r\n  }, [account, tokenAddress, fastRefresh, SUCCESS, FAILED])\r\n\r\n  return balanceState\r\n}\r\n\r\nexport const useTotalSupply = () => {\r\n  const { slowRefresh } = useRefresh()\r\n  const [totalSupply, setTotalSupply] = useState<BigNumber>()\r\n\r\n  useEffect(() => {\r\n    async function fetchTotalSupply() {\r\n      const cakeContract = getCakeContract()\r\n      const supply = await cakeContract.totalSupply()\r\n      setTotalSupply(new BigNumber(supply.toString()))\r\n    }\r\n\r\n    fetchTotalSupply()\r\n  }, [slowRefresh])\r\n\r\n  return totalSupply\r\n}\r\n\r\nexport const useBurnedBalance = (tokenAddress: string) => {\r\n  const [balance, setBalance] = useState(BIG_ZERO)\r\n  const { slowRefresh } = useRefresh()\r\n\r\n  useEffect(() => {\r\n    const fetchBalance = async () => {\r\n      const contract = getBep20Contract(tokenAddress)\r\n      const res = await contract.balanceOf('0x000000000000000000000000000000000000dEaD')\r\n      setBalance(new BigNumber(res.toString()))\r\n    }\r\n\r\n    fetchBalance()\r\n  }, [tokenAddress, slowRefresh])\r\n\r\n  return balance\r\n}\r\n\r\nexport const useGetBnbBalance = () => {\r\n  const [fetchStatus, setFetchStatus] = useState(FetchStatus.NOT_FETCHED)\r\n  const [balance, setBalance] = useState(ethers.BigNumber.from(0))\r\n  const { account } = useWeb3React()\r\n  const { lastUpdated, setLastUpdated } = useLastUpdated()\r\n\r\n  useEffect(() => {\r\n    const fetchBalance = async () => {\r\n      try {\r\n        const walletBalance = await simpleRpcProvider.getBalance(account)\r\n        setBalance(walletBalance)\r\n        setFetchStatus(FetchStatus.SUCCESS)\r\n      } catch {\r\n        setFetchStatus(FetchStatus.FAILED)\r\n      }\r\n    }\r\n\r\n    if (account) {\r\n      fetchBalance()\r\n    }\r\n  }, [account, lastUpdated, setBalance, setFetchStatus])\r\n\r\n  return { balance, fetchStatus, refresh: setLastUpdated }\r\n}\r\n\r\nexport const useGetCakeBalance = () => {\r\n  console.log('>>> use get cake balance', tokens.cake)\r\n  const { balance, fetchStatus } = useTokenBalance(tokens.cake.address)\r\n\r\n  // TODO: Remove ethers conversion once useTokenBalance is converted to ethers.BigNumber\r\n  return { balance: ethers.BigNumber.from(balance.toString()), fetchStatus }\r\n}\r\n\r\nexport default useTokenBalance\r\n","import React from 'react'\r\nimport styled, { css, DefaultTheme } from 'styled-components'\r\nimport { Box } from '@pancakeswap/uikit'\r\nimport { ClipFill } from '../types'\r\n\r\ninterface CurveProps {\r\n  clipFill?: ClipFill\r\n}\r\n\r\ninterface ContainerProps extends CurveProps {\r\n  clipPath: string\r\n}\r\n\r\nconst sharedStyles = (theme: DefaultTheme, clipPath: string, clipFill?: ClipFill) => css`\r\n  width: 100%;\r\n  height: 20px;\r\n  clip-path: url(${clipPath});\r\n\r\n  background: ${() => {\r\n    if (theme.isDark) {\r\n      return clipFill?.dark || clipFill?.light || theme.colors.background\r\n    }\r\n    return clipFill?.light || theme.colors.background\r\n  }};\r\n\r\n  & svg {\r\n    display: block;\r\n  }\r\n`\r\n\r\nconst ConcaveContainer = styled(Box)<ContainerProps>`\r\n  ${({ theme, clipPath, clipFill }) => sharedStyles(theme, clipPath, clipFill)}\r\n  transform: ${({ clipPath }) => (clipPath === '#bottomConcaveCurve' ? 'translate(0, -13px)' : 'translate(0, 1px)')};\r\n`\r\n\r\nconst ConvexContainer = styled(Box)<ContainerProps>`\r\n  ${({ theme, clipPath, clipFill }) => sharedStyles(theme, clipPath, clipFill)}\r\n  transform: ${({ clipPath }) => (clipPath === '#bottomConvexCurve' ? 'translate(0, -13px)' : 'translate(0, -1px)')};\r\n`\r\n\r\nexport const ConvexTop: React.FC<CurveProps> = ({ clipFill }) => (\r\n  <ConvexContainer clipFill={clipFill} clipPath=\"#topConvexCurve\">\r\n    <svg width=\"0\" height=\"0\">\r\n      <defs>\r\n        <clipPath id=\"topConvexCurve\" clipPathUnits=\"objectBoundingBox\">\r\n          <path d=\"M 0,1 L 0,0 L 1,0 L 1,1 C 0.75 0, .25 0, 0 1 Z\" />\r\n        </clipPath>\r\n      </defs>\r\n    </svg>\r\n  </ConvexContainer>\r\n)\r\n\r\nexport const ConvexBottom: React.FC<CurveProps> = ({ clipFill }) => (\r\n  <ConvexContainer clipFill={clipFill} clipPath=\"#bottomConvexCurve\">\r\n    <svg width=\"0\" height=\"0\">\r\n      <defs>\r\n        <clipPath id=\"bottomConvexCurve\" clipPathUnits=\"objectBoundingBox\">\r\n          <path d=\"M 0,0 L 0,1 L 1,1 L 1,0 C .75 1, .25 1, 0 0 Z\" />\r\n        </clipPath>\r\n      </defs>\r\n    </svg>\r\n  </ConvexContainer>\r\n)\r\n\r\nexport const ConcaveTop: React.FC<CurveProps> = ({ clipFill }) => (\r\n  <ConcaveContainer clipFill={clipFill} clipPath=\"#topConcaveCurve\">\r\n    <svg width=\"0\" height=\"0\">\r\n      <defs>\r\n        <clipPath id=\"topConcaveCurve\" clipPathUnits=\"objectBoundingBox\">\r\n          <path d=\"M 0,0 L 0,1 L 1,1 L 1,0 C .75 1, .25 1, 0 0 Z\" />\r\n        </clipPath>\r\n      </defs>\r\n    </svg>\r\n  </ConcaveContainer>\r\n)\r\n\r\nexport const ConcaveBottom: React.FC<CurveProps> = ({ clipFill }) => (\r\n  <ConcaveContainer clipFill={clipFill} clipPath=\"#bottomConcaveCurve\">\r\n    <svg width=\"0\" height=\"0\">\r\n      <defs>\r\n        <clipPath id=\"bottomConcaveCurve\" clipPathUnits=\"objectBoundingBox\">\r\n          <path d=\"M 0,1 L 0,0 L 1,0 L 1,1 C .75 0.1, .25 0.1, 0 1 Z\" />\r\n        </clipPath>\r\n      </defs>\r\n    </svg>\r\n  </ConcaveContainer>\r\n)\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { ConcaveTop, ConcaveBottom, ConvexTop, ConvexBottom } from './svg/CurvedSvg'\r\nimport { DividerFill, ClipFill } from './types'\r\n\r\ninterface CurvedDividerProps extends WrapperProps {\r\n  svgFill?: string\r\n  dividerComponent?: React.ReactNode\r\n  dividerPosition?: 'top' | 'bottom'\r\n  concave?: boolean\r\n  clipFill?: ClipFill\r\n}\r\ninterface WrapperProps {\r\n  index: number\r\n  dividerFill?: DividerFill\r\n}\r\n\r\nconst Wrapper = styled.div<WrapperProps>`\r\n  background: ${({ theme, dividerFill }) => {\r\n    if (theme.isDark) {\r\n      return dividerFill?.dark || dividerFill?.light || 'none'\r\n    }\r\n    return dividerFill?.light || dividerFill?.dark || 'none'\r\n  }};\r\n  z-index: ${({ index }) => index};\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n`\r\n\r\nconst ComponentWrapper = styled.div<WrapperProps>`\r\n  z-index: ${({ index }) => index + 1};\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n`\r\n\r\nconst CurvedDivider: React.FC<CurvedDividerProps> = ({\r\n  index,\r\n  dividerPosition,\r\n  dividerComponent,\r\n  concave,\r\n  clipFill,\r\n  dividerFill,\r\n}) => {\r\n  const showConvexTop = dividerPosition === 'top' && !concave\r\n  const showConvexBottom = dividerPosition === 'bottom' && !concave\r\n  const showConcaveTop = dividerPosition === 'top' && concave\r\n  const showConcaveBottom = dividerPosition === 'bottom' && concave\r\n\r\n  const getConcaveDivider = () => {\r\n    return (\r\n      <>\r\n        {showConcaveTop && <ConcaveTop clipFill={clipFill} />}\r\n        {showConcaveBottom && <ConcaveBottom clipFill={clipFill} />}\r\n      </>\r\n    )\r\n  }\r\n\r\n  const getConvexDivider = () => {\r\n    return (\r\n      <>\r\n        {showConvexTop && <ConvexTop clipFill={clipFill} />}\r\n        {showConvexBottom && <ConvexBottom clipFill={clipFill} />}\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Wrapper index={index} dividerFill={dividerFill}>\r\n      {dividerComponent && <ComponentWrapper index={index}>{dividerComponent}</ComponentWrapper>}\r\n      {getConcaveDivider()}\r\n      {getConvexDivider()}\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default CurvedDivider\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { BoxProps, Box, Flex, FlexProps } from '@pancakeswap/uikit'\r\nimport Container from 'components/Layout/Container'\r\nimport CurvedDivider from './CurvedDivider'\r\nimport { ClipFill, DividerFill } from './types'\r\n\r\ninterface PageSectionProps extends BackgroundColorProps {\r\n  svgFill?: string\r\n  dividerComponent?: React.ReactNode\r\n  hasCurvedDivider?: boolean\r\n  dividerPosition?: 'top' | 'bottom'\r\n  concaveDivider?: boolean\r\n  containerProps?: BoxProps\r\n  innerProps?: BoxProps\r\n  clipFill?: ClipFill\r\n  dividerFill?: DividerFill\r\n}\r\n\r\ninterface BackgroundColorProps extends FlexProps {\r\n  index: number\r\n  background?: string\r\n  getPadding?: () => string\r\n}\r\n\r\nconst BackgroundColor = styled(Flex)<BackgroundColorProps>`\r\n  position: relative;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  z-index: ${({ index }) => index - 1};\r\n  background: ${({ background, theme }) => background || theme.colors.background};\r\n  padding: ${({ getPadding }) => getPadding()};\r\n`\r\n\r\nconst ChildrenWrapper = styled(Container)`\r\n  min-height: auto;\r\n  padding-top: 16px;\r\n  padding-bottom: 16px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    padding-top: 32px;\r\n    padding-bottom: 32px;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    padding-top: 48px;\r\n    padding-bottom: 48px;\r\n  }\r\n`\r\n\r\nconst PageSection: React.FC<PageSectionProps> = ({\r\n  children,\r\n  background,\r\n  svgFill,\r\n  index = 1,\r\n  dividerComponent,\r\n  dividerPosition = 'bottom',\r\n  hasCurvedDivider = true,\r\n  concaveDivider = false,\r\n  clipFill,\r\n  dividerFill,\r\n  containerProps,\r\n  innerProps,\r\n  ...props\r\n}) => {\r\n  const getPadding = () => {\r\n    // No curved divider\r\n    if (!hasCurvedDivider) {\r\n      return '48px 0'\r\n    }\r\n    // Bottom curved divider\r\n    // Less bottom padding, as the divider is present there\r\n    if (dividerPosition === 'bottom') {\r\n      return '48px 0 14px'\r\n    }\r\n    // Top curved divider\r\n    // Less top padding, as the divider is present there\r\n    if (dividerPosition === 'top') {\r\n      return '14px 0 48px'\r\n    }\r\n    return '48px 0'\r\n  }\r\n\r\n  return (\r\n    <Box {...containerProps}>\r\n      {hasCurvedDivider && dividerPosition === 'top' && (\r\n        <CurvedDivider\r\n          svgFill={svgFill}\r\n          index={index}\r\n          concave={concaveDivider}\r\n          dividerPosition={dividerPosition}\r\n          dividerComponent={dividerComponent}\r\n          clipFill={clipFill}\r\n          dividerFill={dividerFill}\r\n        />\r\n      )}\r\n      <BackgroundColor background={background} index={index} getPadding={getPadding} {...props}>\r\n        <ChildrenWrapper {...innerProps}>{children}</ChildrenWrapper>\r\n      </BackgroundColor>\r\n      {hasCurvedDivider && dividerPosition === 'bottom' && (\r\n        <CurvedDivider\r\n          svgFill={svgFill}\r\n          index={index}\r\n          concave={concaveDivider}\r\n          dividerPosition={dividerPosition}\r\n          dividerComponent={dividerComponent}\r\n          clipFill={clipFill}\r\n          dividerFill={dividerFill}\r\n        />\r\n      )}\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default PageSection\r\n","import { useContext } from 'react'\r\nimport { ThemeContext as StyledThemeContext } from 'styled-components'\r\nimport { useThemeManager } from 'state/user/hooks'\r\n\r\nconst useTheme = () => {\r\n  const [isDark, toggleTheme] = useThemeManager()\r\n  const theme = useContext(StyledThemeContext)\r\n  return { isDark, theme, toggleTheme }\r\n}\r\n\r\nexport default useTheme\r\n","import { useEffect, useMemo } from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useSelector } from 'react-redux'\r\nimport { useAppDispatch } from 'state'\r\nimport useRefresh from 'hooks/useRefresh'\r\nimport { State } from '../types'\r\nimport { fetchCurrentLotteryId, fetchCurrentLottery, fetchUserTicketsAndLotteries, fetchPublicLotteries } from '.'\r\nimport { useProcessLotteryResponse } from './helpers'\r\n\r\n// Lottery\r\nexport const useGetCurrentLotteryId = () => {\r\n  return useSelector((state: State) => state.lottery.currentLotteryId)\r\n}\r\n\r\nexport const useGetUserLotteriesGraphData = () => {\r\n  return useSelector((state: State) => state.lottery.userLotteryData)\r\n}\r\n\r\nexport const useGetUserLotteryGraphRoundById = (lotteryId: string) => {\r\n  const userLotteriesData = useGetUserLotteriesGraphData()\r\n  return userLotteriesData.rounds.find((userRound) => userRound.lotteryId === lotteryId)\r\n}\r\n\r\nexport const useGetLotteriesGraphData = () => {\r\n  return useSelector((state: State) => state.lottery.lotteriesData)\r\n}\r\n\r\nexport const useGetLotteryGraphDataById = (lotteryId: string) => {\r\n  const lotteriesData = useGetLotteriesGraphData()\r\n  return lotteriesData?.find((lottery) => lottery.id === lotteryId)\r\n}\r\n\r\nexport const useFetchLottery = () => {\r\n  const { account } = useWeb3React()\r\n  const { fastRefresh } = useRefresh()\r\n  const dispatch = useAppDispatch()\r\n  const currentLotteryId = useGetCurrentLotteryId()\r\n\r\n  useEffect(() => {\r\n    // get current lottery ID & max ticket buy\r\n    dispatch(fetchCurrentLotteryId())\r\n  }, [dispatch])\r\n\r\n  useEffect(() => {\r\n    if (currentLotteryId) {\r\n      // Get historical lottery data from nodes +  last 100 subgraph entries\r\n      dispatch(fetchPublicLotteries({ currentLotteryId }))\r\n      // get public data for current lottery\r\n      dispatch(fetchCurrentLottery({ currentLotteryId }))\r\n    }\r\n  }, [dispatch, currentLotteryId, fastRefresh])\r\n\r\n  useEffect(() => {\r\n    // get user tickets for current lottery, and user lottery subgraph data\r\n    if (account && currentLotteryId) {\r\n      dispatch(fetchUserTicketsAndLotteries({ account, currentLotteryId }))\r\n    }\r\n  }, [dispatch, currentLotteryId, account])\r\n}\r\n\r\nexport const useLottery = () => {\r\n  const currentRound = useSelector((state: State) => state.lottery.currentRound)\r\n  const processedCurrentRound = useProcessLotteryResponse(currentRound)\r\n\r\n  const isTransitioning = useSelector((state: State) => state.lottery.isTransitioning)\r\n\r\n  const currentLotteryId = useGetCurrentLotteryId()\r\n  const userLotteryData = useGetUserLotteriesGraphData()\r\n  const lotteriesData = useGetLotteriesGraphData()\r\n\r\n  const maxNumberTicketsPerBuyOrClaimAsString = useSelector(\r\n    (state: State) => state.lottery.maxNumberTicketsPerBuyOrClaim,\r\n  )\r\n  const maxNumberTicketsPerBuyOrClaim = useMemo(() => {\r\n    return new BigNumber(maxNumberTicketsPerBuyOrClaimAsString)\r\n  }, [maxNumberTicketsPerBuyOrClaimAsString])\r\n\r\n  return {\r\n    currentLotteryId,\r\n    maxNumberTicketsPerBuyOrClaim,\r\n    isTransitioning,\r\n    userLotteryData,\r\n    lotteriesData,\r\n    currentRound: processedCurrentRound,\r\n  }\r\n}\r\n","import { LotteryStatus } from 'config/constants/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useEffect, useState } from 'react'\r\n\r\ninterface LotteryEvent {\r\n  nextEventTime: number\r\n  postCountdownText?: string\r\n  preCountdownText?: string\r\n}\r\n\r\nconst useGetNextLotteryEvent = (endTime: number, status: LotteryStatus): LotteryEvent => {\r\n  const { t } = useTranslation()\r\n  const vrfRequestTime = 180 // 3 mins\r\n  const secondsBetweenRounds = 300 // 5 mins\r\n  const transactionResolvingBuffer = 30 // Delay countdown by 30s to ensure contract transactions have been calculated and broadcast\r\n  const [nextEvent, setNextEvent] = useState({ nextEventTime: null, preCountdownText: null, postCountdownText: null })\r\n\r\n  useEffect(() => {\r\n    // Current lottery is active\r\n    if (status === LotteryStatus.OPEN) {\r\n      setNextEvent({\r\n        nextEventTime: endTime + transactionResolvingBuffer,\r\n        preCountdownText: null,\r\n        postCountdownText: t('until the draw'),\r\n      })\r\n    }\r\n    // Current lottery has finished but not yet claimable\r\n    if (status === LotteryStatus.CLOSE) {\r\n      setNextEvent({\r\n        nextEventTime: endTime + transactionResolvingBuffer + vrfRequestTime,\r\n        preCountdownText: t('Winners announced in'),\r\n        postCountdownText: null,\r\n      })\r\n    }\r\n    // Current lottery claimable. Next lottery has not yet started\r\n    if (status === LotteryStatus.CLAIMABLE) {\r\n      setNextEvent({\r\n        nextEventTime: endTime + transactionResolvingBuffer + secondsBetweenRounds,\r\n        preCountdownText: t('Tickets on sale in'),\r\n        postCountdownText: null,\r\n      })\r\n    }\r\n  }, [status, endTime, t])\r\n\r\n  return nextEvent\r\n}\r\n\r\nexport default useGetNextLotteryEvent\r\n","import { useWeb3React } from '@web3-react/core'\r\nimport { LotteryStatus } from 'config/constants/types'\r\nimport usePreviousValue from 'hooks/usePreviousValue'\r\nimport { useEffect } from 'react'\r\nimport { useAppDispatch } from 'state'\r\nimport { useLottery } from 'state/lottery/hooks'\r\nimport { fetchPublicLotteries, fetchCurrentLotteryId, fetchUserLotteries } from 'state/lottery'\r\n\r\nconst useStatusTransitions = () => {\r\n  const {\r\n    currentLotteryId,\r\n    isTransitioning,\r\n    currentRound: { status },\r\n  } = useLottery()\r\n\r\n  const { account } = useWeb3React()\r\n  const dispatch = useAppDispatch()\r\n  const previousStatus = usePreviousValue(status)\r\n\r\n  useEffect(() => {\r\n    // Only run if there is a status state change\r\n    if (previousStatus !== status && currentLotteryId) {\r\n      // Current lottery transitions from CLOSE > CLAIMABLE\r\n      if (previousStatus === LotteryStatus.CLOSE && status === LotteryStatus.CLAIMABLE) {\r\n        dispatch(fetchPublicLotteries({ currentLotteryId }))\r\n        if (account) {\r\n          dispatch(fetchUserLotteries({ account, currentLotteryId }))\r\n        }\r\n      }\r\n      // Previous lottery to new lottery. From CLAIMABLE (previous round) > OPEN (new round)\r\n      if (previousStatus === LotteryStatus.CLAIMABLE && status === LotteryStatus.OPEN) {\r\n        dispatch(fetchPublicLotteries({ currentLotteryId }))\r\n        if (account) {\r\n          dispatch(fetchUserLotteries({ account, currentLotteryId }))\r\n        }\r\n      }\r\n    }\r\n  }, [currentLotteryId, status, previousStatus, account, dispatch])\r\n\r\n  useEffect(() => {\r\n    // Current lottery is CLAIMABLE and the lottery is transitioning to a NEW round - fetch current lottery ID every 10s.\r\n    // The isTransitioning condition will no longer be true when fetchCurrentLotteryId returns the next lottery ID\r\n    if (previousStatus === LotteryStatus.CLAIMABLE && status === LotteryStatus.CLAIMABLE && isTransitioning) {\r\n      dispatch(fetchCurrentLotteryId())\r\n      dispatch(fetchPublicLotteries({ currentLotteryId }))\r\n      const interval = setInterval(async () => {\r\n        dispatch(fetchCurrentLotteryId())\r\n        dispatch(fetchPublicLotteries({ currentLotteryId }))\r\n      }, 10000)\r\n      return () => clearInterval(interval)\r\n    }\r\n    return () => null\r\n  }, [status, previousStatus, isTransitioning, currentLotteryId, dispatch])\r\n}\r\n\r\nexport default useStatusTransitions\r\n","import React, { useEffect, useRef } from 'react'\r\nimport CountUp from 'react-countup'\r\nimport { Text, TextProps } from '@pancakeswap/uikit'\r\n\r\ninterface BalanceProps extends TextProps {\r\n  value: number\r\n  decimals?: number\r\n  unit?: string\r\n  isDisabled?: boolean\r\n  prefix?: string\r\n  onClick?: (event: React.MouseEvent<HTMLElement>) => void\r\n}\r\n\r\nconst Balance: React.FC<BalanceProps> = ({\r\n  value,\r\n  color = 'text',\r\n  decimals = 3,\r\n  isDisabled = false,\r\n  unit,\r\n  prefix,\r\n  onClick,\r\n  ...props\r\n}) => {\r\n  const previousValue = useRef(0)\r\n\r\n  useEffect(() => {\r\n    previousValue.current = value\r\n  }, [value])\r\n\r\n  return (\r\n    <Text color={isDisabled ? 'textDisabled' : color} onClick={onClick} {...props}>\r\n      <CountUp\r\n        start={previousValue.current}\r\n        end={value}\r\n        prefix={prefix}\r\n        suffix={unit}\r\n        decimals={decimals}\r\n        duration={1}\r\n        separator=\",\"\r\n      />\r\n    </Text>\r\n  )\r\n}\r\n\r\nexport default Balance\r\n","import React from 'react'\r\nimport { Svg, SvgProps } from '@pancakeswap/uikit'\r\n\r\nconst TicketPurchaseCard: React.FC<SvgProps> = (props) => {\r\n  return (\r\n    <Svg viewBox=\"0 0 296 121\" {...props}>\r\n      <g filter=\"url(#filter0_dd_ticket_purchase_card)\">\r\n        <path d=\"M4 16C4 7.16344 11.1634 0 20 0H66V113H20C11.1634 113 4 105.837 4 97V16Z\" fill=\"#FFB237\" />\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M69.4931 2.94568C68.9511 1.38001 67.6569 0 66 0V10H90V0C88.3431 0 87.0489 1.38001 86.5069 2.94568C85.2868 6.4696 81.9389 9 78 9C74.0611 9 70.7132 6.4696 69.4931 2.94568Z\"\r\n          fill=\"#FFB237\"\r\n        />\r\n        <rect x=\"66\" y=\"10\" width=\"10\" height=\"93\" fill=\"#FFB237\" />\r\n        <path d=\"M78 103V10\" stroke=\"#FFB237\" strokeWidth=\"4\" strokeDasharray=\"4 4\" />\r\n        <rect x=\"80\" y=\"10\" width=\"10\" height=\"93\" fill=\"#FFB237\" />\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M69.4931 110.054C68.9511 111.62 67.6569 113 66 113V103H90V113C88.3431 113 87.0489 111.62 86.5069 110.054C85.2868 106.53 81.9389 104 78 104C74.0611 104 70.7132 106.53 69.4931 110.054Z\"\r\n          fill=\"#FFB237\"\r\n        />\r\n        <path d=\"M90 0H276C284.837 0 292 7.16344 292 16V97C292 105.837 284.837 113 276 113H90V0Z\" fill=\"#FFB237\" />\r\n      </g>\r\n      <defs>\r\n        <filter\r\n          id=\"filter0_dd_ticket_purchase_card\"\r\n          x=\"0\"\r\n          y=\"0\"\r\n          width=\"296\"\r\n          height=\"121\"\r\n          filterUnits=\"userSpaceOnUse\"\r\n          colorInterpolationFilters=\"sRGB\"\r\n        >\r\n          <feFlood floodOpacity=\"0\" result=\"BackgroundImageFix\" />\r\n          <feColorMatrix in=\"SourceAlpha\" type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" />\r\n          <feOffset dx=\"2\" dy=\"2\" />\r\n          <feColorMatrix type=\"matrix\" values=\"0 0 0 0 1 0 0 0 0 0.686275 0 0 0 0 0 0 0 0 1 0\" />\r\n          <feBlend mode=\"normal\" in2=\"BackgroundImageFix\" result=\"effect1_dropShadow_ticket_purchase_card\" />\r\n          <feColorMatrix in=\"SourceAlpha\" type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" />\r\n          <feOffset dy=\"4\" />\r\n          <feGaussianBlur stdDeviation=\"2\" />\r\n          <feColorMatrix type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0\" />\r\n          <feBlend\r\n            mode=\"normal\"\r\n            in2=\"effect1_dropShadow_ticket_purchase_card\"\r\n            result=\"effect2_dropShadow_ticket_purchase_card\"\r\n          />\r\n          <feBlend mode=\"normal\" in=\"SourceGraphic\" in2=\"effect2_dropShadow_ticket_purchase_card\" result=\"shape\" />\r\n        </filter>\r\n      </defs>\r\n    </Svg>\r\n  )\r\n}\r\n\r\nexport default TicketPurchaseCard\r\n","import React from 'react'\r\nimport { Svg, SvgProps } from '@pancakeswap/uikit'\r\n\r\nconst WhiteBunny: React.FC<SvgProps> = (props) => {\r\n  return (\r\n    <Svg viewBox=\"0 0 27 26\" {...props}>\r\n      <mask\r\n        id=\"white-bunny-path-1-outside-1\"\r\n        maskUnits=\"userSpaceOnUse\"\r\n        x=\"0.5\"\r\n        y=\"-0.0263672\"\r\n        width=\"26\"\r\n        height=\"26\"\r\n        fill=\"black\"\r\n      >\r\n        <rect fill=\"white\" x=\"0.5\" y=\"-0.0263672\" width=\"26\" height=\"26\" />\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M6.909 3.56941C7.03125 1.79519 8.76206 0.588231 10.4692 1.08677C11.9461 1.51808 12.7937 3.06497 12.3624 4.54184L11.1683 8.63073C11.9225 8.53996 12.7022 8.49237 13.5 8.49237C14.6339 8.49237 15.731 8.58848 16.7708 8.76808L18.74 2.99564C19.2367 1.53947 20.8199 0.761724 22.2761 1.25849C23.9593 1.83269 24.6807 3.81559 23.7601 5.3372L20.9057 10.0551C23.7031 11.3976 25.5 13.4834 25.5 15.8257L25.5 15.8267V17.6934C25.5 21.7435 20.1274 25.0267 13.5 25.0267C6.87258 25.0267 1.5 21.7435 1.5 17.6934V15.8267V15.8257C1.5 13.379 3.46066 11.2122 6.47417 9.88004L6.909 3.56941Z\"\r\n        />\r\n      </mask>\r\n      <path\r\n        d=\"M10.4692 1.08677L10.7142 0.247673V0.247673L10.4692 1.08677ZM6.909 3.56941L7.78108 3.6295V3.62949L6.909 3.56941ZM12.3624 4.54184L13.2015 4.78689V4.78689L12.3624 4.54184ZM11.1683 8.63073L10.3292 8.38568L9.95792 9.65684L11.2727 9.49862L11.1683 8.63073ZM16.7708 8.76808L16.622 9.62947L17.3572 9.75647L17.5981 9.05032L16.7708 8.76808ZM18.74 2.99564L19.5673 3.27788V3.27788L18.74 2.99564ZM22.2761 1.25849L22.5583 0.431153V0.431153L22.2761 1.25849ZM23.7601 5.3372L23.0122 4.88469V4.88469L23.7601 5.3372ZM20.9057 10.0551L20.1578 9.60256L19.6593 10.4265L20.5275 10.8432L20.9057 10.0551ZM25.5 15.8257H24.6258L24.6259 15.8274L25.5 15.8257ZM25.5 15.8267H26.3742L26.3742 15.8251L25.5 15.8267ZM6.47417 9.88004L6.82762 10.6796L7.31 10.4663L7.34626 9.94013L6.47417 9.88004ZM10.7142 0.247673C8.47144 -0.407305 6.19752 1.17838 6.03691 3.50932L7.78108 3.62949C7.86497 2.412 9.05268 1.58377 10.2241 1.92587L10.7142 0.247673ZM13.2015 4.78689C13.7681 2.84659 12.6545 0.814314 10.7142 0.247673L10.2241 1.92587C11.2376 2.22184 11.8192 3.28334 11.5233 4.2968L13.2015 4.78689ZM12.0074 8.87578L13.2015 4.78689L11.5233 4.2968L10.3292 8.38568L12.0074 8.87578ZM13.5 7.61822C12.6675 7.61822 11.853 7.66787 11.0638 7.76284L11.2727 9.49862C11.9921 9.41204 12.7369 9.36652 13.5 9.36652V7.61822ZM16.9195 7.90668C15.8299 7.71847 14.683 7.61822 13.5 7.61822V9.36652C14.5847 9.36652 15.632 9.45848 16.622 9.62947L16.9195 7.90668ZM17.5981 9.05032L19.5673 3.27788L17.9127 2.7134L15.9434 8.48584L17.5981 9.05032ZM19.5673 3.27788C19.9082 2.27864 20.9946 1.74493 21.9938 2.08582L22.5583 0.431153C20.6452 -0.221485 18.5653 0.800311 17.9127 2.7134L19.5673 3.27788ZM21.9938 2.08582C23.1489 2.47985 23.644 3.84054 23.0122 4.88469L24.5081 5.7897C25.7175 3.79064 24.7697 1.18554 22.5583 0.431153L21.9938 2.08582ZM23.0122 4.88469L20.1578 9.60256L21.6536 10.5076L24.5081 5.7897L23.0122 4.88469ZM26.3741 15.8257C26.3741 12.9967 24.2198 10.676 21.284 9.26698L20.5275 10.8432C23.1864 12.1193 24.6259 13.9701 24.6259 15.8257H26.3741ZM26.3742 15.8251L26.3741 15.8241L24.6259 15.8274L24.6259 15.8284L26.3742 15.8251ZM26.3742 17.6934V15.8267H24.6259V17.6934H26.3742ZM13.5 25.9009C16.9478 25.9009 20.1111 25.0486 22.4411 23.6247C24.7561 22.21 26.3742 20.1382 26.3742 17.6934H24.6259C24.6259 19.2987 23.5576 20.8935 21.5295 22.1329C19.5163 23.3632 16.6797 24.1526 13.5 24.1526V25.9009ZM0.62585 17.6934C0.62585 20.1382 2.24387 22.21 4.55889 23.6247C6.88892 25.0486 10.0523 25.9009 13.5 25.9009V24.1526C10.3203 24.1526 7.48367 23.3632 5.47054 22.1329C3.44242 20.8935 2.37415 19.2987 2.37415 17.6934H0.62585ZM0.62585 15.8267V17.6934H2.37415V15.8267H0.62585ZM0.62585 15.8257V15.8267H2.37415V15.8257H0.62585ZM6.12073 9.08053C2.97211 10.4725 0.62585 12.8707 0.62585 15.8257H2.37415C2.37415 13.8874 3.94921 11.952 6.82762 10.6796L6.12073 9.08053ZM6.03691 3.50932L5.60209 9.81995L7.34626 9.94013L7.78108 3.6295L6.03691 3.50932Z\"\r\n        fill=\"#08060B\"\r\n        mask=\"url(#path-1-outside-1)\"\r\n      />\r\n      <path\r\n        d=\"M25.5 17.6933C25.5 21.7434 20.1274 25.0267 13.5 25.0267C6.87258 25.0267 1.5 21.7434 1.5 17.6933V15.8267H25.5V17.6933Z\"\r\n        fill=\"#F4EEFF\"\r\n      />\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        clipRule=\"evenodd\"\r\n        d=\"M6.909 3.56941C7.03125 1.79519 8.76206 0.588231 10.4692 1.08677C11.9461 1.51808 12.7937 3.06497 12.3624 4.54184L11.1683 8.63073C11.9225 8.53996 12.7022 8.49237 13.5 8.49237C14.6339 8.49237 15.731 8.58848 16.7708 8.76808L18.74 2.99564C19.2367 1.53947 20.8199 0.761724 22.2761 1.25849C23.9593 1.83269 24.6807 3.81559 23.7601 5.3372L20.9057 10.0551C23.7031 11.3976 25.5 13.4834 25.5 15.8257C25.5 19.8758 20.1274 23.159 13.5 23.159C6.87258 23.159 1.5 19.8758 1.5 15.8257C1.5 13.379 3.46066 11.2122 6.47417 9.88004L6.909 3.56941Z\"\r\n        fill=\"white\"\r\n      />\r\n      <ellipse cx=\"10.4334\" cy=\"15.292\" rx=\"1.33333\" ry=\"2\" fill=\"#08060B\" />\r\n      <ellipse cx=\"19.6331\" cy=\"15.292\" rx=\"1.33333\" ry=\"2\" fill=\"#08060B\" />\r\n    </Svg>\r\n  )\r\n}\r\n\r\nexport default WhiteBunny\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Svg, SvgProps, Text, Flex } from '@pancakeswap/uikit'\r\n\r\nexport const PinkBall: React.FC<SvgProps> = (props) => {\r\n  return (\r\n    <Svg viewBox=\"0 0 32 32\" {...props}>\r\n      <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"#D750B2\" />\r\n      <g style={{ mixBlendMode: 'multiply' }} opacity=\"0.1\">\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M24.3428 3.13232C28.9191 8.87177 28.5505 17.2573 23.2373 22.5706C17.528 28.2799 8.27148 28.2799 2.56223 22.5706C2.2825 22.2909 2.01648 22.0026 1.76416 21.7067C4.02814 27.3486 9.54881 31.3326 16 31.3326C24.4683 31.3326 31.3332 24.4677 31.3332 15.9994C31.3332 10.6078 28.5504 5.8661 24.3428 3.13232Z\"\r\n          fill=\"black\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'multiply' }} opacity=\"0.1\">\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M25.7713 4.18262C30.6308 10.2119 30.2607 19.061 24.6609 24.6608C19.0615 30.2602 10.2132 30.6307 4.18396 25.7722C6.99643 29.1689 11.2455 31.3329 16 31.3329C24.4683 31.3329 31.3332 24.468 31.3332 15.9997C31.3332 11.2446 29.1687 6.99508 25.7713 4.18262Z\"\r\n          fill=\"black\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'soft-light' }}>\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M3.48969 24.8677C0.151051 18.7651 0.974979 11.0636 6.01931 6.01927C11.0639 0.974682 18.7659 0.15093 24.8687 3.49016C22.365 1.71201 19.3046 0.666603 16 0.666603C7.53165 0.666603 0.666733 7.53152 0.666733 15.9998C0.666733 19.3041 1.7119 22.3642 3.48969 24.8677Z\"\r\n          fill=\"white\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'soft-light' }}>\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M2.10075 9.5143C3.77271 5.93677 6.78528 3.11129 10.4921 1.68422C10.546 1.73235 10.5987 1.78219 10.6502 1.83374C12.4838 3.66728 10.9119 5.7442 8.66145 7.99465C6.411 10.2451 4.33417 11.8169 2.50064 9.98335C2.35338 9.83609 2.22013 9.6793 2.10075 9.5143Z\"\r\n          fill=\"white\"\r\n        />\r\n      </g>\r\n    </Svg>\r\n  )\r\n}\r\n\r\nexport const LilacBall: React.FC<SvgProps> = (props) => {\r\n  return (\r\n    <Svg viewBox=\"0 0 32 32\" {...props}>\r\n      <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"#A881FC\" />\r\n      <g style={{ mixBlendMode: 'multiply' }} opacity=\"0.1\">\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M24.3428 3.13232C28.9191 8.87177 28.5505 17.2573 23.2373 22.5706C17.528 28.2799 8.27148 28.2799 2.56223 22.5706C2.2825 22.2909 2.01648 22.0026 1.76416 21.7067C4.02814 27.3486 9.54881 31.3326 16 31.3326C24.4683 31.3326 31.3332 24.4677 31.3332 15.9994C31.3332 10.6078 28.5504 5.8661 24.3428 3.13232Z\"\r\n          fill=\"black\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'multiply' }} opacity=\"0.1\">\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M25.7713 4.18262C30.6308 10.2119 30.2607 19.061 24.6609 24.6608C19.0615 30.2602 10.2132 30.6307 4.18396 25.7722C6.99643 29.1689 11.2455 31.3329 16 31.3329C24.4683 31.3329 31.3332 24.468 31.3332 15.9997C31.3332 11.2446 29.1687 6.99508 25.7713 4.18262Z\"\r\n          fill=\"black\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'soft-light' }}>\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M3.48969 24.8677C0.151051 18.7651 0.974979 11.0636 6.01931 6.01927C11.0639 0.974682 18.7659 0.15093 24.8687 3.49016C22.365 1.71201 19.3046 0.666603 16 0.666603C7.53165 0.666603 0.666733 7.53152 0.666733 15.9998C0.666733 19.3041 1.7119 22.3642 3.48969 24.8677Z\"\r\n          fill=\"white\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'soft-light' }}>\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M2.10075 9.5143C3.77271 5.93677 6.78528 3.11129 10.4921 1.68422C10.546 1.73235 10.5987 1.78219 10.6502 1.83374C12.4838 3.66728 10.9119 5.7442 8.66145 7.99465C6.411 10.2451 4.33417 11.8169 2.50064 9.98335C2.35338 9.83609 2.22013 9.6793 2.10075 9.5143Z\"\r\n          fill=\"white\"\r\n        />\r\n      </g>\r\n    </Svg>\r\n  )\r\n}\r\n\r\nexport const TealBall: React.FC<SvgProps> = (props) => {\r\n  return (\r\n    <Svg viewBox=\"0 0 32 32\" {...props}>\r\n      <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"#1FC7D4\" />\r\n      <g style={{ mixBlendMode: 'multiply' }} opacity=\"0.1\">\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M24.3428 3.13232C28.9191 8.87177 28.5505 17.2573 23.2373 22.5706C17.528 28.2799 8.27148 28.2799 2.56223 22.5706C2.2825 22.2909 2.01648 22.0026 1.76416 21.7067C4.02814 27.3486 9.54881 31.3326 16 31.3326C24.4683 31.3326 31.3332 24.4677 31.3332 15.9994C31.3332 10.6078 28.5504 5.8661 24.3428 3.13232Z\"\r\n          fill=\"black\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'multiply' }} opacity=\"0.1\">\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M25.7713 4.18262C30.6308 10.2119 30.2607 19.061 24.6609 24.6608C19.0615 30.2602 10.2132 30.6307 4.18396 25.7722C6.99643 29.1689 11.2455 31.3329 16 31.3329C24.4683 31.3329 31.3332 24.468 31.3332 15.9997C31.3332 11.2446 29.1687 6.99508 25.7713 4.18262Z\"\r\n          fill=\"black\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'soft-light' }}>\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M3.48969 24.8677C0.151051 18.7651 0.974979 11.0636 6.01931 6.01927C11.0639 0.974682 18.7659 0.15093 24.8687 3.49016C22.365 1.71201 19.3046 0.666603 16 0.666603C7.53165 0.666603 0.666733 7.53152 0.666733 15.9998C0.666733 19.3041 1.7119 22.3642 3.48969 24.8677Z\"\r\n          fill=\"white\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'soft-light' }}>\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M2.10075 9.5143C3.77271 5.93677 6.78528 3.11129 10.4921 1.68422C10.546 1.73235 10.5987 1.78219 10.6502 1.83374C12.4838 3.66728 10.9119 5.7442 8.66145 7.99465C6.411 10.2451 4.33417 11.8169 2.50064 9.98335C2.35338 9.83609 2.22013 9.6793 2.10075 9.5143Z\"\r\n          fill=\"white\"\r\n        />\r\n      </g>\r\n    </Svg>\r\n  )\r\n}\r\n\r\nexport const AquaBall: React.FC<SvgProps> = (props) => {\r\n  return (\r\n    <Svg viewBox=\"0 0 32 32\" {...props}>\r\n      <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"#31D0AA\" />\r\n      <g style={{ mixBlendMode: 'multiply' }} opacity=\"0.1\">\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M24.3428 3.13232C28.9191 8.87177 28.5505 17.2573 23.2373 22.5706C17.528 28.2799 8.27148 28.2799 2.56223 22.5706C2.2825 22.2909 2.01648 22.0026 1.76416 21.7067C4.02814 27.3486 9.54881 31.3326 16 31.3326C24.4683 31.3326 31.3332 24.4677 31.3332 15.9994C31.3332 10.6078 28.5504 5.8661 24.3428 3.13232Z\"\r\n          fill=\"black\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'multiply' }} opacity=\"0.1\">\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M25.7713 4.18262C30.6308 10.2119 30.2607 19.061 24.6609 24.6608C19.0615 30.2602 10.2132 30.6307 4.18396 25.7722C6.99643 29.1689 11.2455 31.3329 16 31.3329C24.4683 31.3329 31.3332 24.468 31.3332 15.9997C31.3332 11.2446 29.1687 6.99508 25.7713 4.18262Z\"\r\n          fill=\"black\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'soft-light' }}>\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M3.48969 24.8677C0.151051 18.7651 0.974979 11.0636 6.01931 6.01927C11.0639 0.974682 18.7659 0.15093 24.8687 3.49016C22.365 1.71201 19.3046 0.666603 16 0.666603C7.53165 0.666603 0.666733 7.53152 0.666733 15.9998C0.666733 19.3041 1.7119 22.3642 3.48969 24.8677Z\"\r\n          fill=\"white\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'soft-light' }}>\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M2.10075 9.5143C3.77271 5.93677 6.78528 3.11129 10.4921 1.68422C10.546 1.73235 10.5987 1.78219 10.6502 1.83374C12.4838 3.66728 10.9119 5.7442 8.66145 7.99465C6.411 10.2451 4.33417 11.8169 2.50064 9.98335C2.35338 9.83609 2.22013 9.6793 2.10075 9.5143Z\"\r\n          fill=\"white\"\r\n        />\r\n      </g>\r\n    </Svg>\r\n  )\r\n}\r\n\r\nexport const GreenBall: React.FC<SvgProps> = (props) => {\r\n  return (\r\n    <Svg viewBox=\"0 0 32 32\" {...props}>\r\n      <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"#93D45A\" />\r\n      <g style={{ mixBlendMode: 'multiply' }} opacity=\"0.1\">\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M24.3428 3.13232C28.9191 8.87177 28.5505 17.2573 23.2373 22.5706C17.528 28.2799 8.27148 28.2799 2.56223 22.5706C2.2825 22.2909 2.01648 22.0026 1.76416 21.7067C4.02814 27.3486 9.54881 31.3326 16 31.3326C24.4683 31.3326 31.3332 24.4677 31.3332 15.9994C31.3332 10.6078 28.5504 5.8661 24.3428 3.13232Z\"\r\n          fill=\"black\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'multiply' }} opacity=\"0.1\">\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M25.7713 4.18262C30.6308 10.2119 30.2607 19.061 24.6609 24.6608C19.0615 30.2602 10.2132 30.6307 4.18396 25.7722C6.99643 29.1689 11.2455 31.3329 16 31.3329C24.4683 31.3329 31.3332 24.468 31.3332 15.9997C31.3332 11.2446 29.1687 6.99508 25.7713 4.18262Z\"\r\n          fill=\"black\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'soft-light' }}>\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M3.48969 24.8677C0.151051 18.7651 0.974979 11.0636 6.01931 6.01927C11.0639 0.974682 18.7659 0.15093 24.8687 3.49016C22.365 1.71201 19.3046 0.666603 16 0.666603C7.53165 0.666603 0.666733 7.53152 0.666733 15.9998C0.666733 19.3041 1.7119 22.3642 3.48969 24.8677Z\"\r\n          fill=\"white\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'soft-light' }}>\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M2.10075 9.5143C3.77271 5.93677 6.78528 3.11129 10.4921 1.68422C10.546 1.73235 10.5987 1.78219 10.6502 1.83374C12.4838 3.66728 10.9119 5.7442 8.66145 7.99465C6.411 10.2451 4.33417 11.8169 2.50064 9.98335C2.35338 9.83609 2.22013 9.6793 2.10075 9.5143Z\"\r\n          fill=\"white\"\r\n        />\r\n      </g>\r\n    </Svg>\r\n  )\r\n}\r\n\r\nexport const YellowBall: React.FC<SvgProps> = (props) => {\r\n  return (\r\n    <Svg viewBox=\"0 0 32 32\" {...props}>\r\n      <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"#FFC43C\" />\r\n      <g style={{ mixBlendMode: 'multiply' }} opacity=\"0.1\">\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M24.3428 3.13245C28.9191 8.87189 28.5505 17.2575 23.2373 22.5707C17.528 28.28 8.27148 28.28 2.56223 22.5707C2.2825 22.291 2.01648 22.0028 1.76416 21.7068C4.02814 27.3487 9.54881 31.3327 16 31.3327C24.4683 31.3327 31.3332 24.4678 31.3332 15.9995C31.3332 10.6079 28.5504 5.86622 24.3428 3.13245Z\"\r\n          fill=\"black\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'multiply' }} opacity=\"0.1\">\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M25.7714 4.18262C30.6309 10.2119 30.2608 19.061 24.661 24.6608C19.0616 30.2602 10.2134 30.6307 4.18408 25.7722C6.99655 29.1689 11.2456 31.3329 16.0001 31.3329C24.4685 31.3329 31.3334 24.468 31.3334 15.9997C31.3334 11.2446 29.1689 6.99508 25.7714 4.18262Z\"\r\n          fill=\"black\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'soft-light' }}>\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M3.48969 24.8677C0.151051 18.7651 0.974979 11.0636 6.01931 6.01927C11.0639 0.974682 18.7659 0.15093 24.8687 3.49016C22.365 1.71201 19.3046 0.666603 16 0.666603C7.53165 0.666603 0.666733 7.53152 0.666733 15.9998C0.666733 19.3041 1.7119 22.3642 3.48969 24.8677Z\"\r\n          fill=\"white\"\r\n        />\r\n      </g>\r\n      <g style={{ mixBlendMode: 'soft-light' }}>\r\n        <path\r\n          fillRule=\"evenodd\"\r\n          clipRule=\"evenodd\"\r\n          d=\"M2.10087 9.51443C3.77283 5.93689 6.78541 3.11142 10.4922 1.68435C10.5461 1.73247 10.5988 1.78231 10.6504 1.83387C12.4839 3.6674 10.912 5.74432 8.66157 7.99477C6.41112 10.2452 4.33429 11.817 2.50076 9.98347C2.3535 9.83621 2.22025 9.67943 2.10087 9.51443Z\"\r\n          fill=\"white\"\r\n        />\r\n      </g>\r\n    </Svg>\r\n  )\r\n}\r\n\r\nexport const BallTextWrapper = styled.div`\r\n  top: 45%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  position: absolute;\r\n`\r\n\r\nexport const BallText = styled(Text)<{ rotationTransform?: number }>`\r\n  color: #000000;\r\n  text-shadow: -0.75px -0.75px 0 white, 0.75px -0.75px 0 white, -0.75px 0.75px 0 white, 0.75px 0.75px 0 white;\r\n  transform: rotate(${({ rotationTransform }) => rotationTransform || 0}deg);\r\n`\r\n\r\nexport type BallColor = 'pink' | 'lilac' | 'teal' | 'aqua' | 'green' | 'yellow'\r\n\r\ninterface BallWithNumberProps {\r\n  color: BallColor\r\n  number: string\r\n  size?: string\r\n  fontSize?: string\r\n  rotationTransform?: number\r\n}\r\n\r\nconst ballsMap = {\r\n  pink: PinkBall,\r\n  lilac: LilacBall,\r\n  teal: TealBall,\r\n  aqua: AquaBall,\r\n  green: GreenBall,\r\n  yellow: YellowBall,\r\n}\r\n\r\nexport const BallWithNumber: React.FC<BallWithNumberProps> = ({ color, number, size, fontSize, rotationTransform }) => {\r\n  const BallComponent = ballsMap[color]\r\n  return (\r\n    <Flex alignItems=\"center\" justifyContent=\"center\" position=\"relative\" mx=\"2px\">\r\n      <BallComponent width={size ?? '32px'} height={size ?? '32px'} />\r\n      <BallTextWrapper>\r\n        <BallText rotationTransform={rotationTransform} bold fontSize={fontSize ?? '16px'}>\r\n          {number}\r\n        </BallText>\r\n      </BallTextWrapper>\r\n    </Flex>\r\n  )\r\n}\r\n","import { useCallback, useState } from 'react'\r\nimport usePreviousValue from './usePreviousValue'\r\n\r\n/**\r\n * A helper hook to keep track of the time between events\r\n * Can also be used to force an effect to re-run\r\n */\r\nconst useLastUpdated = () => {\r\n  const [lastUpdated, setStateLastUpdated] = useState(Date.now())\r\n  const previousLastUpdated = usePreviousValue(lastUpdated)\r\n\r\n  const setLastUpdated = useCallback(() => {\r\n    setStateLastUpdated(Date.now())\r\n  }, [setStateLastUpdated])\r\n\r\n  return { lastUpdated, previousLastUpdated, setLastUpdated }\r\n}\r\n\r\nexport default useLastUpdated\r\n","import { useEffect, useReducer, useRef } from 'react'\r\nimport { noop } from 'lodash'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { ethers } from 'ethers'\r\nimport useToast from 'hooks/useToast'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\ntype LoadingState = 'idle' | 'loading' | 'success' | 'fail'\r\n\r\ntype Action =\r\n  | { type: 'requires_approval' }\r\n  | { type: 'approve_sending' }\r\n  | { type: 'approve_receipt' }\r\n  | { type: 'approve_error' }\r\n  | { type: 'confirm_sending' }\r\n  | { type: 'confirm_receipt' }\r\n  | { type: 'confirm_error' }\r\n\r\ninterface State {\r\n  approvalState: LoadingState\r\n  confirmState: LoadingState\r\n}\r\n\r\nconst initialState: State = {\r\n  approvalState: 'idle',\r\n  confirmState: 'idle',\r\n}\r\n\r\nconst reducer = (state: State, actions: Action): State => {\r\n  switch (actions.type) {\r\n    case 'requires_approval':\r\n      return {\r\n        ...state,\r\n        approvalState: 'idle',\r\n      }\r\n    case 'approve_sending':\r\n      return {\r\n        ...state,\r\n        approvalState: 'loading',\r\n      }\r\n    case 'approve_receipt':\r\n      return {\r\n        ...state,\r\n        approvalState: 'success',\r\n      }\r\n    case 'approve_error':\r\n      return {\r\n        ...state,\r\n        approvalState: 'fail',\r\n      }\r\n    case 'confirm_sending':\r\n      return {\r\n        ...state,\r\n        confirmState: 'loading',\r\n      }\r\n    case 'confirm_receipt':\r\n      return {\r\n        ...state,\r\n        confirmState: 'success',\r\n      }\r\n    case 'confirm_error':\r\n      return {\r\n        ...state,\r\n        confirmState: 'fail',\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\ninterface OnSuccessProps {\r\n  state: State\r\n  receipt: ethers.providers.TransactionReceipt\r\n}\r\n\r\ninterface ApproveConfirmTransaction {\r\n  onApprove: () => Promise<ethers.providers.TransactionResponse>\r\n  onConfirm: (params?) => Promise<ethers.providers.TransactionResponse>\r\n  onRequiresApproval?: () => Promise<boolean>\r\n  onSuccess: ({ state, receipt }: OnSuccessProps) => void\r\n  onApproveSuccess?: ({ state, receipt }: OnSuccessProps) => void\r\n}\r\n\r\nconst useApproveConfirmTransaction = ({\r\n  onApprove,\r\n  onConfirm,\r\n  onRequiresApproval,\r\n  onSuccess = noop,\r\n  onApproveSuccess = noop,\r\n}: ApproveConfirmTransaction) => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const [state, dispatch] = useReducer(reducer, initialState)\r\n  const { toastError } = useToast()\r\n\r\n  // Check if approval is necessary, re-check if account or totalCost in onRequiresApproval changes\r\n  useEffect(() => {\r\n    if (account && onRequiresApproval) {\r\n      onRequiresApproval().then((isEnoughAllowance) => {\r\n        if (isEnoughAllowance) {\r\n          dispatch({ type: 'approve_receipt' })\r\n        } else {\r\n          dispatch({ type: 'requires_approval' })\r\n        }\r\n      })\r\n    }\r\n  }, [account, onRequiresApproval, dispatch])\r\n\r\n  return {\r\n    isApproving: state.approvalState === 'loading',\r\n    isApproved: state.approvalState === 'success',\r\n    isConfirming: state.confirmState === 'loading',\r\n    isConfirmed: state.confirmState === 'success',\r\n    hasApproveFailed: state.approvalState === 'fail',\r\n    hasConfirmFailed: state.confirmState === 'fail',\r\n    handleApprove: async () => {\r\n      try {\r\n        const tx = await onApprove()\r\n        dispatch({ type: 'approve_sending' })\r\n        const receipt = await tx.wait()\r\n        if (receipt.status) {\r\n          dispatch({ type: 'approve_receipt' })\r\n          onApproveSuccess({ state, receipt })\r\n        }\r\n      } catch (error) {\r\n        dispatch({ type: 'approve_error' })\r\n        toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n      }\r\n    },\r\n    handleConfirm: async (params = {}) => {\r\n      dispatch({ type: 'confirm_sending' })\r\n      try {\r\n        const tx = await onConfirm(params)\r\n        const receipt = await tx.wait()\r\n        if (receipt.status) {\r\n          dispatch({ type: 'confirm_receipt' })\r\n          onSuccess({ state, receipt })\r\n        }\r\n      } catch (error) {\r\n        dispatch({ type: 'confirm_error' })\r\n        toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n      }\r\n    },\r\n  }\r\n}\r\n\r\nexport default useApproveConfirmTransaction\r\n","import { ethers, Contract, Overrides } from 'ethers'\r\n\r\n/**\r\n * Estimate the gas needed to call a function, and add a 10% margin\r\n * @param contract Used to perform the call\r\n * @param methodName The name of the methode called\r\n * @param gasMarginPer10000 The gasMargin per 10000 (i.e. 10% -> 1000)\r\n * @param args An array of arguments to pass to the method\r\n * @returns https://docs.ethers.io/v5/api/providers/types/#providers-TransactionReceipt\r\n */\r\nexport const estimateGas = async (\r\n  contract: Contract,\r\n  methodName: string,\r\n  methodArgs: any[],\r\n  gasMarginPer10000: number,\r\n) => {\r\n  if (!contract[methodName]) {\r\n    throw new Error(`Method ${methodName} doesn't exist on ${contract.address}`)\r\n  }\r\n  const rawGasEstimation = await contract.estimateGas[methodName](...methodArgs)\r\n  // By convention, ethers.BigNumber values are multiplied by 1000 to avoid dealing with real numbers\r\n  const gasEstimation = rawGasEstimation\r\n    .mul(ethers.BigNumber.from(10000).add(ethers.BigNumber.from(gasMarginPer10000)))\r\n    .div(ethers.BigNumber.from(10000))\r\n  return gasEstimation\r\n}\r\n\r\n/**\r\n * Perform a contract call with a gas value returned from estimateGas\r\n * @param contract Used to perform the call\r\n * @param methodName The name of the method called\r\n * @param methodArgs An array of arguments to pass to the method\r\n * @param overrides An overrides object to pass to the method\r\n * @returns https://docs.ethers.io/v5/api/providers/types/#providers-TransactionReceipt\r\n */\r\nexport const callWithEstimateGas = async (\r\n  contract: Contract,\r\n  methodName: string,\r\n  methodArgs: any[] = [],\r\n  overrides: Overrides = {},\r\n  gasMarginPer10000 = 1000,\r\n): Promise<ethers.providers.TransactionResponse> => {\r\n  const gasEstimation = estimateGas(contract, methodName, methodArgs, gasMarginPer10000)\r\n  const tx = await contract[methodName](...methodArgs, {\r\n    gasLimit: gasEstimation,\r\n    ...overrides,\r\n  })\r\n  return tx\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { ChevronRightIcon, Button as UIKitButton, AutoRenewIcon, ChevronDownIcon, Box, Flex } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\nexport enum ButtonArrangement {\r\n  ROW = 'row',\r\n  SEQUENTIAL = 'sequential',\r\n}\r\n\r\ninterface ApproveConfirmButtonsProps {\r\n  isApproveDisabled: boolean\r\n  isApproving: boolean\r\n  isConfirming: boolean\r\n  isConfirmDisabled: boolean\r\n  onApprove: () => void\r\n  onConfirm: () => void\r\n  buttonArrangement?: ButtonArrangement\r\n  confirmLabel?: string\r\n  confirmId?: string\r\n}\r\n\r\nconst StyledApproveConfirmButtonRow = styled.div`\r\n  align-items: center;\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  justify-content: center;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    grid-template-columns: 1fr 24px 1fr;\r\n  }\r\n`\r\n\r\nconst Button = styled(UIKitButton)`\r\n  width: 100%;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    min-width: 160px;\r\n  }\r\n`\r\n\r\nconst iconAttrs = { width: '24px', color: 'textDisabled' }\r\n\r\nconst ChevronRight = styled(ChevronRightIcon).attrs(iconAttrs)`\r\n  display: none;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    display: block;\r\n  }\r\n`\r\n\r\nconst ChevronBottom = styled(ChevronDownIcon).attrs(iconAttrs)`\r\n  display: block;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst spinnerIcon = <AutoRenewIcon spin color=\"currentColor\" />\r\n\r\nconst ApproveConfirmButtons: React.FC<ApproveConfirmButtonsProps> = ({\r\n  isApproveDisabled,\r\n  isApproving,\r\n  isConfirming,\r\n  isConfirmDisabled,\r\n  onApprove,\r\n  onConfirm,\r\n  buttonArrangement = ButtonArrangement.ROW,\r\n  confirmLabel,\r\n  confirmId,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const confirmButtonText = confirmLabel ?? t('Confirm')\r\n\r\n  const ApproveConfirmRow = () => {\r\n    return (\r\n      <StyledApproveConfirmButtonRow>\r\n        <Box>\r\n          <Button\r\n            disabled={isApproveDisabled}\r\n            onClick={onApprove}\r\n            endIcon={isApproving ? spinnerIcon : undefined}\r\n            isLoading={isApproving}\r\n          >\r\n            {isApproving ? t('Enabling') : t('Enable')}\r\n          </Button>\r\n        </Box>\r\n        <Flex justifyContent=\"center\">\r\n          <ChevronRight />\r\n          <ChevronBottom />\r\n        </Flex>\r\n        <Box>\r\n          <Button\r\n            id={confirmId}\r\n            onClick={onConfirm}\r\n            disabled={isConfirmDisabled}\r\n            isLoading={isConfirming}\r\n            endIcon={isConfirming ? spinnerIcon : undefined}\r\n          >\r\n            {isConfirming ? t('Confirming') : confirmButtonText}\r\n          </Button>\r\n        </Box>\r\n      </StyledApproveConfirmButtonRow>\r\n    )\r\n  }\r\n\r\n  const ApproveConfirmSequential = () => {\r\n    return (\r\n      <>\r\n        {isApproveDisabled ? (\r\n          <Box>\r\n            <Button\r\n              id={confirmId}\r\n              onClick={onConfirm}\r\n              disabled={isConfirmDisabled}\r\n              isLoading={isConfirming}\r\n              endIcon={isConfirming ? spinnerIcon : undefined}\r\n            >\r\n              {isConfirming ? t('Confirming') : confirmButtonText}\r\n            </Button>\r\n          </Box>\r\n        ) : (\r\n          <Box>\r\n            <Button onClick={onApprove} endIcon={isApproving ? spinnerIcon : undefined} isLoading={isApproving}>\r\n              {isApproving ? t('Enabling') : t('Enable')}\r\n            </Button>\r\n          </Box>\r\n        )}\r\n      </>\r\n    )\r\n  }\r\n\r\n  return buttonArrangement === ButtonArrangement.ROW ? ApproveConfirmRow() : ApproveConfirmSequential()\r\n}\r\n\r\nexport default ApproveConfirmButtons\r\n","import BigNumber from 'bignumber.js'\r\nimport { DEFAULT_GAS_LIMIT, DEFAULT_TOKEN_DECIMAL } from 'config'\r\nimport getGasPrice from 'utils/getGasPrice'\r\n\r\nconst options = {\r\n  gasLimit: DEFAULT_GAS_LIMIT,\r\n}\r\n\r\nexport const stakeFarm = async (masterChefContract, pid, amount) => {\r\n  const gasPrice = getGasPrice()\r\n  const value = new BigNumber(amount).times(DEFAULT_TOKEN_DECIMAL).toString()\r\n  if (pid === 0) {\r\n    const tx = await masterChefContract.enterStaking(value, { ...options, gasPrice })\r\n    const receipt = await tx.wait()\r\n    return receipt.status\r\n  }\r\n\r\n  const tx = await masterChefContract.deposit(pid, value, { ...options, gasPrice })\r\n  const receipt = await tx.wait()\r\n  return receipt.status\r\n}\r\n\r\nexport const unstakeFarm = async (masterChefContract, pid, amount) => {\r\n  const gasPrice = getGasPrice()\r\n  const value = new BigNumber(amount).times(DEFAULT_TOKEN_DECIMAL).toString()\r\n  if (pid === 0) {\r\n    const tx = await masterChefContract.leaveStaking(value, { ...options, gasPrice })\r\n    const receipt = await tx.wait()\r\n    return receipt.status\r\n  }\r\n\r\n  const tx = await masterChefContract.withdraw(pid, value, { ...options, gasPrice })\r\n  const receipt = await tx.wait()\r\n  return receipt.status\r\n}\r\n\r\nexport const harvestFarm = async (masterChefContract, pid) => {\r\n  const gasPrice = getGasPrice()\r\n  if (pid === 0) {\r\n    const tx = await masterChefContract.leaveStaking('0', { ...options, gasPrice })\r\n    const receipt = await tx.wait()\r\n    return receipt.status\r\n  }\r\n\r\n  const tx = await masterChefContract.deposit(pid, '0', { ...options, gasPrice })\r\n  const receipt = await tx.wait()\r\n  return receipt.status\r\n}\r\n","import React from 'react'\r\nimport { Button, useWalletModal } from '@pancakeswap/uikit'\r\nimport useAuth from 'hooks/useAuth'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\nconst ConnectWalletButton = (props) => {\r\n  const { t } = useTranslation()\r\n  const { login, logout } = useAuth()\r\n  const { onPresentConnectModal } = useWalletModal(login, logout, t)\r\n\r\n  return (\r\n    <Button id='connect-wallet' className='primaryButton' onClick={onPresentConnectModal} {...props}>\r\n      {t('Connect Wallet')}\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default ConnectWalletButton\r\n","import React, { useEffect, useState, useMemo, useCallback } from 'react'\r\nimport styled from 'styled-components'\r\nimport BigNumber from 'bignumber.js'\r\nimport { ethers } from 'ethers'\r\nimport {\r\n  Modal,\r\n  Text,\r\n  Flex,\r\n  HelpIcon,\r\n  BalanceInput,\r\n  Ticket,\r\n  useTooltip,\r\n  Skeleton,\r\n  Button,\r\n  ArrowForwardIcon,\r\n} from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport tokens from 'config/constants/tokens.lottery'\r\nimport * as token from 'config/constants/tokens.lottery'\r\nimport { getDecimalAmount, getFullDisplayBalance } from 'utils/formatBalance'\r\nimport { BIG_ZERO, ethersToBigNumber } from 'utils/bigNumber'\r\nimport { useAppDispatch } from 'state'\r\nimport { useLottery } from 'state/lottery/hooks'\r\nimport { fetchUserTicketsAndLotteries } from 'state/lottery'\r\nimport useTheme from 'hooks/useTheme'\r\nimport useTokenBalance, { FetchStatus } from 'hooks/useTokenBalance'\r\nimport useApproveConfirmTransaction from 'hooks/useApproveConfirmTransaction'\r\nimport { useCake, useLotteryV2Contract } from 'hooks/useContract'\r\nimport { useCallWithGasPrice } from 'hooks/useCallWithGasPrice'\r\nimport { estimateGas } from 'utils/calls'\r\nimport useToast from 'hooks/useToast'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport { ToastDescriptionWithTx } from 'components/Toast'\r\nimport ApproveConfirmButtons, { ButtonArrangement } from 'components/ApproveConfirmButtons'\r\nimport NumTicketsToBuyButton from './NumTicketsToBuyButton'\r\nimport EditNumbersModal from './EditNumbersModal'\r\nimport { useTicketsReducer } from './useTicketsReducer'\r\nimport BuyTokenButton from '../BuyTokenButton'\r\n\r\nconst StyledModal = styled(Modal)`\r\n  min-width: 280px;\r\n  max-width: 320px;\r\n`\r\n\r\nconst ShortcutButtonsWrapper = styled(Flex)<{ isVisible: boolean }>`\r\n  justify-content: space-between;\r\n  margin-top: 8px;\r\n  margin-bottom: 24px;\r\n  display: ${({ isVisible }) => (isVisible ? 'flex' : 'none')};\r\n`\r\n\r\ninterface BuyTicketsModalProps {\r\n  onDismiss?: () => void\r\n}\r\n\r\nenum BuyingStage {\r\n  BUY = 'Buy',\r\n  EDIT = 'Edit',\r\n}\r\n\r\nconst BuyTicketsModal: React.FC<BuyTicketsModalProps> = ({ onDismiss }) => {\r\n  const { account } = useWeb3React()\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n  const {\r\n    maxNumberTicketsPerBuyOrClaim,\r\n    currentLotteryId,\r\n    currentRound: {\r\n      priceTicketInCake,\r\n      discountDivisor,\r\n      userTickets: { tickets: userCurrentTickets },\r\n    },\r\n  } = useLottery()\r\n  const { callWithGasPrice } = useCallWithGasPrice()\r\n  const [ticketsToBuy, setTicketsToBuy] = useState('')\r\n  const [discountValue, setDiscountValue] = useState('')\r\n  const [totalCost, setTotalCost] = useState('')\r\n  const [ticketCostBeforeDiscount, setTicketCostBeforeDiscount] = useState('')\r\n  const [buyingStage, setBuyingStage] = useState<BuyingStage>(BuyingStage.BUY)\r\n  const [maxPossibleTicketPurchase, setMaxPossibleTicketPurchase] = useState(BIG_ZERO)\r\n  const [maxTicketPurchaseExceeded, setMaxTicketPurchaseExceeded] = useState(false)\r\n  const [userNotEnoughCake, setUserNotEnoughCake] = useState(false)\r\n  const lotteryContract = useLotteryV2Contract()\r\n  const cakeContract = useCake()\r\n  const { toastSuccess } = useToast()\r\n  const { balance: userCake, fetchStatus } = useTokenBalance(tokens.cake.address)\r\n  // balance from useTokenBalance causes rerenders in effects as a new BigNumber is instantiated on each render, hence memoising it using the stringified value below.\r\n  const stringifiedUserCake = userCake.toJSON()\r\n  const memoisedUserCake = useMemo(() => new BigNumber(stringifiedUserCake), [stringifiedUserCake])\r\n\r\n  const cakePriceBusd = new BigNumber(token.info().price || 0)\r\n  const dispatch = useAppDispatch()\r\n  const hasFetchedBalance = fetchStatus === FetchStatus.SUCCESS\r\n  const userCakeDisplayBalance = getFullDisplayBalance(userCake, token.info().decimals, 3)\r\n\r\n  const TooltipComponent = () => (\r\n    <>\r\n      <Text mb=\"16px\">\r\n        {t(\r\n          'Buying multiple tickets in a single transaction gives a discount. The discount increases in a linear way, up to the maximum of 100 tickets:',\r\n        )}\r\n      </Text>\r\n      <Text>{t('2 tickets: 0.05%')}</Text>\r\n      <Text>{t('50 tickets: 2.45%')}</Text>\r\n      <Text>{t('100 tickets: 4.95%')}</Text>\r\n    </>\r\n  )\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(<TooltipComponent />, {\r\n    placement: 'bottom-end',\r\n    tooltipOffset: [20, 10],\r\n  })\r\n\r\n  const limitNumberByMaxTicketsPerBuy = useCallback(\r\n    (number: BigNumber) => {\r\n      return number.gt(maxNumberTicketsPerBuyOrClaim) ? maxNumberTicketsPerBuyOrClaim : number\r\n    },\r\n    [maxNumberTicketsPerBuyOrClaim],\r\n  )\r\n\r\n  const getTicketCostAfterDiscount = useCallback(\r\n    (numberTickets: BigNumber) => {\r\n      const totalAfterDiscount = priceTicketInCake\r\n        .times(numberTickets)\r\n        .times(discountDivisor.plus(1).minus(numberTickets))\r\n        .div(discountDivisor)\r\n      return totalAfterDiscount\r\n    },\r\n    [discountDivisor, priceTicketInCake],\r\n  )\r\n\r\n  const getMaxTicketBuyWithDiscount = useCallback(\r\n    (numberTickets: BigNumber) => {\r\n      const costAfterDiscount = getTicketCostAfterDiscount(numberTickets)\r\n      const costBeforeDiscount = priceTicketInCake.times(numberTickets)\r\n      const discountAmount = costBeforeDiscount.minus(costAfterDiscount)\r\n      const ticketsBoughtWithDiscount = discountAmount.div(priceTicketInCake)\r\n      const overallTicketBuy = numberTickets.plus(ticketsBoughtWithDiscount)\r\n      return { overallTicketBuy, ticketsBoughtWithDiscount }\r\n    },\r\n    [getTicketCostAfterDiscount, priceTicketInCake],\r\n  )\r\n\r\n  const validateInput = useCallback(\r\n    (inputNumber: BigNumber) => {\r\n      const limitedNumberTickets = limitNumberByMaxTicketsPerBuy(inputNumber)\r\n      const cakeCostAfterDiscount = getTicketCostAfterDiscount(limitedNumberTickets)\r\n\r\n      if (cakeCostAfterDiscount.gt(userCake)) {\r\n        setUserNotEnoughCake(true)\r\n      } else if (limitedNumberTickets.eq(maxNumberTicketsPerBuyOrClaim)) {\r\n        setMaxTicketPurchaseExceeded(true)\r\n      } else {\r\n        setUserNotEnoughCake(false)\r\n        setMaxTicketPurchaseExceeded(false)\r\n      }\r\n    },\r\n    [limitNumberByMaxTicketsPerBuy, getTicketCostAfterDiscount, maxNumberTicketsPerBuyOrClaim, userCake],\r\n  )\r\n\r\n  useEffect(() => {\r\n    const getMaxPossiblePurchase = () => {\r\n      const maxBalancePurchase = memoisedUserCake.div(priceTicketInCake)\r\n      const limitedMaxPurchase = limitNumberByMaxTicketsPerBuy(maxBalancePurchase)\r\n      let maxPurchase\r\n\r\n      // If the users' max CAKE balance purchase is less than the contract limit - factor the discount logic into the max number of tickets they can purchase\r\n      if (limitedMaxPurchase.lt(maxNumberTicketsPerBuyOrClaim)) {\r\n        // Get max tickets purchasable with the users' balance, as well as using the discount to buy tickets\r\n        const { overallTicketBuy: maxPlusDiscountTickets } = getMaxTicketBuyWithDiscount(limitedMaxPurchase)\r\n\r\n        // Knowing how many tickets they can buy when counting the discount - plug that total in, and see how much that total will get discounted\r\n        const { ticketsBoughtWithDiscount: secondTicketDiscountBuy } =\r\n          getMaxTicketBuyWithDiscount(maxPlusDiscountTickets)\r\n\r\n        // Add the additional tickets that can be bought with the discount, to the original max purchase\r\n        maxPurchase = limitedMaxPurchase.plus(secondTicketDiscountBuy)\r\n      } else {\r\n        maxPurchase = limitedMaxPurchase\r\n      }\r\n\r\n      if (hasFetchedBalance && maxPurchase.lt(1)) {\r\n        setUserNotEnoughCake(true)\r\n      } else {\r\n        setUserNotEnoughCake(false)\r\n      }\r\n\r\n      setMaxPossibleTicketPurchase(maxPurchase)\r\n    }\r\n    getMaxPossiblePurchase()\r\n  }, [\r\n    maxNumberTicketsPerBuyOrClaim,\r\n    priceTicketInCake,\r\n    memoisedUserCake,\r\n    limitNumberByMaxTicketsPerBuy,\r\n    getTicketCostAfterDiscount,\r\n    getMaxTicketBuyWithDiscount,\r\n    hasFetchedBalance,\r\n  ])\r\n\r\n  /* Check KYC */\r\n  const [ isCheckingKYC, setIsCheckingKYC ] = useState(true)\r\n  const [ isHasKYC, setIsHasKYC ] = useState(false)\r\n  const [ isWalletOkKYC, setIsWalletOkKYC ] = useState(false)\r\n  \r\n  // @ts-ignore\r\n  useEffect(async () => {\r\n    setIsCheckingKYC(true)\r\n    if (account && lotteryContract) {\r\n      try {\r\n        const existKyc = await lotteryContract.existKyc()\r\n        if (existKyc) {\r\n          const isKycOk = await lotteryContract.checkWalletKYC(account)\r\n          setIsHasKYC(true)\r\n          setIsWalletOkKYC(isKycOk)\r\n          setIsCheckingKYC(false)\r\n        } else {\r\n          setIsHasKYC(false)\r\n          setIsWalletOkKYC(true)\r\n          setIsCheckingKYC(false)\r\n        }\r\n      } catch (err) {\r\n        setIsHasKYC(false)\r\n        setIsWalletOkKYC(true)\r\n        setIsCheckingKYC(false)\r\n        console.log('>>> NO KYC', err)\r\n      }\r\n    }\r\n  }, [ account, lotteryContract ])\r\n  \r\n  useEffect(() => {\r\n    const numberOfTicketsToBuy = new BigNumber(ticketsToBuy)\r\n    const costAfterDiscount = new BigNumber(getTicketCostAfterDiscount(numberOfTicketsToBuy).toFixed(0))\r\n    const costBeforeDiscount = new BigNumber(priceTicketInCake.times(numberOfTicketsToBuy).toFixed(0))\r\n    const discountBeingApplied = costBeforeDiscount.minus(costAfterDiscount)\r\n    setTicketCostBeforeDiscount(costBeforeDiscount.gt(0) ? getFullDisplayBalance(costBeforeDiscount, token.info().decimals) : '0')\r\n    setTotalCost(costAfterDiscount.gt(0) ? getFullDisplayBalance(costAfterDiscount) : '0')\r\n    setDiscountValue(discountBeingApplied.gt(0) ? getFullDisplayBalance(discountBeingApplied, token.info().decimals, 5) : '0')\r\n  }, [ticketsToBuy, priceTicketInCake, discountDivisor, getTicketCostAfterDiscount])\r\n\r\n  const getNumTicketsByPercentage = (percentage: number): number => {\r\n    const percentageOfMaxTickets = maxPossibleTicketPurchase.gt(0)\r\n      ? maxPossibleTicketPurchase.div(new BigNumber(100)).times(new BigNumber(percentage))\r\n      : BIG_ZERO\r\n    return Math.floor(percentageOfMaxTickets.toNumber())\r\n  }\r\n\r\n  const tenPercentOfBalance = getNumTicketsByPercentage(10)\r\n  const twentyFivePercentOfBalance = getNumTicketsByPercentage(25)\r\n  const fiftyPercentOfBalance = getNumTicketsByPercentage(50)\r\n  const oneHundredPercentOfBalance = getNumTicketsByPercentage(100)\r\n\r\n  const handleInputChange = (input: string) => {\r\n    // Force input to integer\r\n    const inputAsInt = parseInt(input, 10)\r\n    const inputAsBN = new BigNumber(inputAsInt)\r\n    const limitedNumberTickets = limitNumberByMaxTicketsPerBuy(inputAsBN)\r\n    validateInput(inputAsBN)\r\n    setTicketsToBuy(inputAsInt ? limitedNumberTickets.toString() : '')\r\n  }\r\n\r\n  const handleNumberButtonClick = (number: number) => {\r\n    setTicketsToBuy(number.toFixed())\r\n    setUserNotEnoughCake(false)\r\n    setMaxTicketPurchaseExceeded(false)\r\n  }\r\n\r\n  const [updateTicket, randomize, tickets, allComplete, getTicketsForPurchase] = useTicketsReducer(\r\n    parseInt(ticketsToBuy, 10),\r\n    userCurrentTickets,\r\n  )\r\n\r\n  const onRequiresApproval = useCallback(async () => {\r\n    try {\r\n      const response = await cakeContract.allowance(account, lotteryContract.address)\r\n\r\n      const currentAllowance = ethersToBigNumber(response)\r\n      const currentTotalCost = getDecimalAmount(new BigNumber(totalCost), token.info().decimals)\r\n\r\n      const isEnoughAllowance = currentAllowance.gte(currentTotalCost)\r\n\r\n      return isEnoughAllowance\r\n    } catch (error) {\r\n      return false\r\n    }\r\n  }, [totalCost, account])\r\n\r\n  const { isApproving, isApproved, isConfirmed, isConfirming, handleApprove, handleConfirm } =\r\n    useApproveConfirmTransaction({\r\n      onRequiresApproval: useMemo(() => onRequiresApproval, [totalCost, account]),\r\n      onApprove: () => {\r\n        const totalCostEthBN = ethers.BigNumber.from(getDecimalAmount(new BigNumber(totalCost), token.info().decimals).toString())\r\n        return callWithGasPrice(cakeContract, 'approve', [lotteryContract.address, totalCostEthBN])\r\n      },\r\n      onApproveSuccess: async ({ receipt }) => {\r\n        toastSuccess(\r\n          t('Contract enabled - you can now purchase tickets'),\r\n          <ToastDescriptionWithTx txHash={receipt.transactionHash} />,\r\n        )\r\n      },\r\n      onConfirm: async () => {\r\n        const ticketsForPurchase = getTicketsForPurchase()\r\n\r\n        let gasLimit\r\n\r\n        try {\r\n          gasLimit = await estimateGas(lotteryContract, 'buyTickets', [currentLotteryId, ticketsForPurchase], 1000)\r\n        } catch (error) {\r\n          console.error('Estimate Gas Error: ', error)\r\n          gasLimit = 100_000 + (220_000 * ticketsForPurchase.length)\r\n        }\r\n\r\n        return callWithGasPrice(lotteryContract, 'buyTickets', [currentLotteryId, ticketsForPurchase], { gasLimit })\r\n      },\r\n      onSuccess: async ({ receipt }) => {\r\n        onDismiss()\r\n        dispatch(fetchUserTicketsAndLotteries({ account, currentLotteryId }))\r\n        toastSuccess(t('Lottery tickets purchased!'), <ToastDescriptionWithTx txHash={receipt.transactionHash} />)\r\n      },\r\n    })\r\n\r\n\r\n  /* --- KYC */\r\n  const getErrorMessage = () => {\r\n    if (userNotEnoughCake) return t(`Insufficient ${token.info().symbol} balance`)\r\n    return t('The maximum number of tickets you can buy in one transaction is %maxTickets%', {\r\n      maxTickets: maxNumberTicketsPerBuyOrClaim.toString(),\r\n    })\r\n  }\r\n\r\n  const percentageDiscount = () => {\r\n    const percentageAsBn = new BigNumber(discountValue).div(new BigNumber(ticketCostBeforeDiscount)).times(100)\r\n    if (percentageAsBn.isNaN() || percentageAsBn.eq(0)) {\r\n      return 0\r\n    }\r\n    return percentageAsBn.toNumber().toFixed(2)\r\n  }\r\n\r\n  const disableBuying =\r\n    !isApproved ||\r\n    isConfirmed ||\r\n    userNotEnoughCake ||\r\n    !ticketsToBuy ||\r\n    new BigNumber(ticketsToBuy).lte(0) ||\r\n    getTicketsForPurchase().length !== parseInt(ticketsToBuy, 10)\r\n\r\n  if (buyingStage === BuyingStage.EDIT) {\r\n    return (\r\n      <EditNumbersModal\r\n        totalCost={totalCost}\r\n        updateTicket={updateTicket}\r\n        randomize={randomize}\r\n        tickets={tickets}\r\n        allComplete={allComplete}\r\n        onConfirm={handleConfirm}\r\n        isConfirming={isConfirming}\r\n        isCheckingKYC={isCheckingKYC}\r\n        isWalletOkKYC={isWalletOkKYC}\r\n        onDismiss={() => setBuyingStage(BuyingStage.BUY)}\r\n      />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <StyledModal title={t('Buy Tickets')} onDismiss={onDismiss} headerBackground={theme.colors.gradients.cardHeader}>\r\n      {tooltipVisible && tooltip}\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"8px\">\r\n        <Text color=\"textSubtle\">{t('Buy')}:</Text>\r\n        <Flex alignItems=\"center\" minWidth=\"70px\">\r\n          <Text mr=\"4px\" bold>\r\n            {t('Tickets')}\r\n          </Text>\r\n          <Ticket />\r\n        </Flex>\r\n      </Flex>\r\n      <BalanceInput\r\n        isWarning={account && (userNotEnoughCake || maxTicketPurchaseExceeded)}\r\n        placeholder=\"0\"\r\n        value={ticketsToBuy}\r\n        onUserInput={handleInputChange}\r\n        currencyValue={\r\n          cakePriceBusd.gt(0) &&\r\n          `~${ticketsToBuy ? getFullDisplayBalance(priceTicketInCake.times(new BigNumber(ticketsToBuy)), token.info().decimals) : '0.00'} ${token.info().symbol}`\r\n        }\r\n      />\r\n      <Flex alignItems=\"center\" justifyContent=\"flex-end\" mt=\"4px\" mb=\"12px\">\r\n        <Flex justifyContent=\"flex-end\" flexDirection=\"column\">\r\n          {account && (userNotEnoughCake || maxTicketPurchaseExceeded) && (\r\n            <Text fontSize=\"12px\" color=\"failure\">\r\n              {getErrorMessage()}\r\n            </Text>\r\n          )}\r\n          {account && (\r\n            <Flex justifyContent=\"flex-end\">\r\n              <Text fontSize=\"12px\" color=\"textSubtle\" mr=\"4px\">\r\n                {token.info().symbol} {t('Balance')}:\r\n              </Text>\r\n              {hasFetchedBalance ? (\r\n                <Text fontSize=\"12px\" color=\"textSubtle\">\r\n                  {userCakeDisplayBalance}\r\n                </Text>\r\n              ) : (\r\n                <Skeleton width={50} height={12} />\r\n              )}\r\n            </Flex>\r\n          )}\r\n        </Flex>\r\n      </Flex>\r\n\r\n      {account && !hasFetchedBalance ? (\r\n        <Skeleton width=\"100%\" height={20} mt=\"8px\" mb=\"24px\" />\r\n      ) : (\r\n        <ShortcutButtonsWrapper isVisible={account && hasFetchedBalance && oneHundredPercentOfBalance >= 1}>\r\n          {tenPercentOfBalance >= 1 && (\r\n            <NumTicketsToBuyButton onClick={() => handleNumberButtonClick(tenPercentOfBalance)}>\r\n              {hasFetchedBalance ? tenPercentOfBalance : ``}\r\n            </NumTicketsToBuyButton>\r\n          )}\r\n          {twentyFivePercentOfBalance >= 1 && (\r\n            <NumTicketsToBuyButton onClick={() => handleNumberButtonClick(twentyFivePercentOfBalance)}>\r\n              {hasFetchedBalance ? twentyFivePercentOfBalance : ``}\r\n            </NumTicketsToBuyButton>\r\n          )}\r\n          {fiftyPercentOfBalance >= 1 && (\r\n            <NumTicketsToBuyButton onClick={() => handleNumberButtonClick(fiftyPercentOfBalance)}>\r\n              {hasFetchedBalance ? fiftyPercentOfBalance : ``}\r\n            </NumTicketsToBuyButton>\r\n          )}\r\n          {oneHundredPercentOfBalance >= 1 && (\r\n            <NumTicketsToBuyButton onClick={() => handleNumberButtonClick(oneHundredPercentOfBalance)}>\r\n              MAX\r\n            </NumTicketsToBuyButton>\r\n          )}\r\n        </ShortcutButtonsWrapper>\r\n      )}\r\n      <Flex flexDirection=\"column\">\r\n        <Flex mb=\"8px\" justifyContent=\"space-between\">\r\n          <Text color=\"textSubtle\" fontSize=\"14px\">\r\n            {t('Cost')} ({token.info().symbol})\r\n          </Text>\r\n          <Text color=\"textSubtle\" fontSize=\"14px\">\r\n            {priceTicketInCake && getFullDisplayBalance(priceTicketInCake.times(ticketsToBuy || 0), token.info().decimals)} {token.info().symbol}\r\n          </Text>\r\n        </Flex>\r\n        <Flex mb=\"8px\" justifyContent=\"space-between\">\r\n          <Flex>\r\n            <Text display=\"inline\" bold fontSize=\"14px\" mr=\"4px\">\r\n              {discountValue && totalCost ? percentageDiscount() : 0}%\r\n            </Text>\r\n            <Text display=\"inline\" color=\"textSubtle\" fontSize=\"14px\">\r\n              {t('Bulk discount')}\r\n            </Text>\r\n            <Flex alignItems=\"center\" justifyContent=\"center\" ref={targetRef}>\r\n              <HelpIcon ml=\"4px\" width=\"14px\" height=\"14px\" color=\"textSubtle\" />\r\n            </Flex>\r\n          </Flex>\r\n          <Text fontSize=\"14px\" color=\"textSubtle\">\r\n            ~{discountValue} {token.info().symbol}\r\n          </Text>\r\n        </Flex>\r\n        <Flex borderTop={`1px solid ${theme.colors.cardBorder}`} pt=\"8px\" mb=\"24px\" justifyContent=\"space-between\">\r\n          <Text color=\"textSubtle\" fontSize=\"16px\">\r\n            {t('You pay')}\r\n          </Text>\r\n          <Text fontSize=\"16px\" bold>\r\n            ~{totalCost} {token.info().symbol}\r\n          </Text>\r\n        </Flex>\r\n        {account ? (\r\n          <>\r\n            {isCheckingKYC && (\r\n              <Button disabled={true} width=\"100%\" isLoading={true}>{`Loading`}</Button>\r\n            )}\r\n            {!isCheckingKYC && !isWalletOkKYC && (\r\n              <Button\r\n                onClick={() => {\r\n                  // @ts-ignore\r\n                  if (window?.SO_LotteryConfig?.kycVerifyLink) {\r\n                    // @ts-ignore\r\n                    window.open(window.SO_LotteryConfig.kycVerifyLink)\r\n                  }\r\n                }}\r\n              >\r\n                {`Need KYC verify`}\r\n              </Button>\r\n            )}\r\n            {!isCheckingKYC && isWalletOkKYC && (\r\n              <>\r\n                <ApproveConfirmButtons\r\n                  isApproveDisabled={isApproved || isCheckingKYC}\r\n                  isApproving={isApproving}\r\n                  isConfirmDisabled={disableBuying || isCheckingKYC}\r\n                  isConfirming={isConfirming}\r\n                  onApprove={handleApprove}\r\n                  onConfirm={handleConfirm}\r\n                  buttonArrangement={ButtonArrangement.SEQUENTIAL}\r\n                  confirmLabel={t('Buy Instantly')}\r\n                  confirmId=\"lotteryBuyInstant\"\r\n                />\r\n                {isApproved && (\r\n                  <Button\r\n                    variant=\"secondary\"\r\n                    mt=\"8px\"\r\n                    endIcon={\r\n                      <ArrowForwardIcon\r\n                        ml=\"2px\"\r\n                        color={disableBuying || isConfirming ? 'disabled' : 'primary'}\r\n                        height=\"24px\"\r\n                        width=\"24px\"\r\n                      />\r\n                    }\r\n                    disabled={disableBuying || isConfirming || isCheckingKYC}\r\n                    onClick={() => {\r\n                      setBuyingStage(BuyingStage.EDIT)\r\n                    }}\r\n                  >\r\n                    {t('View/Edit Numbers')}\r\n                  </Button>\r\n                )}\r\n                <BuyTokenButton disabled={isCheckingKYC} width=\"100%\" />\r\n              </>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <ConnectWalletButton />\r\n        )}\r\n\r\n        <Text mt=\"24px\" fontSize=\"12px\" color=\"textSubtle\">\r\n          {t(\r\n            '\"Buy Instantly\" chooses random numbers, with no duplicates among your tickets. Prices are set before each round starts, equal to $5 at that time. Purchases are final.',\r\n          )}\r\n        </Text>\r\n      </Flex>\r\n    </StyledModal>\r\n  )\r\n}\r\n\r\nexport default BuyTicketsModal\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Button } from '@pancakeswap/uikit'\r\n\r\ninterface NumTicketsToBuyButtonProps {\r\n  onClick: () => void\r\n  disabled?: boolean\r\n}\r\n\r\nconst StyledButton = styled(Button)`\r\n  flex-grow: 1;\r\n`\r\n\r\nconst NumTicketsToBuyButton: React.FC<NumTicketsToBuyButtonProps> = ({ children, onClick, disabled = false }) => {\r\n  return (\r\n    <StyledButton className=\"numTicketsButton\" disabled={disabled} scale=\"xs\" mx=\"2px\" p=\"4px 16px\" variant=\"tertiary\" onClick={onClick}>\r\n      {children}\r\n    </StyledButton>\r\n  )\r\n}\r\n\r\nexport default NumTicketsToBuyButton\r\n","import React, { useState, useRef } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Flex, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Ticket, UpdateTicketAction } from './useTicketsReducer'\r\n\r\nconst InputsContainer = styled.div<{ focused: boolean; isDuplicate: boolean }>`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 36px;\r\n  box-sizing: border-box;\r\n  border: 1px solid #d7caec;\r\n  background-color: #eeeaf4;\r\n  border-radius: 16px;\r\n  margin-bottom: 8px;\r\n  ${({ isDuplicate }) =>\r\n    isDuplicate &&\r\n    `\r\n    border: 1px solid #FFB237;\r\n    box-shadow: 0px 0px 0px 2px #FFB237;\r\n  `}\r\n  ${({ focused }) =>\r\n    focused &&\r\n    `\r\n    border: 1px solid #7645D9;\r\n    box-shadow: 0px 0px 0px 2px #E4DAF7;\r\n  `}\r\n`\r\n\r\nconst DigitInput = styled.input`\r\n  border: none;\r\n  height: 32px;\r\n  padding: 0 12px;\r\n  font-size: 16px;\r\n  flex: 1;\r\n  width: 16px;\r\n  text-align: center;\r\n  min-width: 0;\r\n  background-color: transparent;\r\n  caret-color: #7a6faa;\r\n\r\n  &::placeholder {\r\n    text-align: center;\r\n  }\r\n\r\n  &:placeholder-shown {\r\n    text-align: left;\r\n  }\r\n\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n\r\n  &::-webkit-outer-spin-button,\r\n  &::-webkit-inner-spin-button {\r\n    /* display: none; <- Crashes Chrome on hover */\r\n    -webkit-appearance: none;\r\n    margin: 0; /* <-- Apparently some margin are still there even though it's hidden */\r\n  }\r\n\r\n  -moz-appearance: textfield; /* Firefox */\r\n`\r\n\r\n// @ts-ignore\r\nconst countNumbers = window.SO_LotteryConfig.numbersCount\r\nconst getIdLabel = (id: number): string => {\r\n  if (id < 10) return `#00${id}`\r\n  if (id < 100) return `#0${id}`\r\n  return `#${id}`\r\n}\r\n\r\nconst TicketContainer: React.FC<{\r\n  ticket: Ticket\r\n  duplicateWith: number[]\r\n  updateTicket: UpdateTicketAction\r\n  disabled: boolean\r\n}> = ({ ticket, duplicateWith, updateTicket, disabled }) => {\r\n  const [focused, setFocused] = useState(false)\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n  const digit1 = useRef<HTMLInputElement>(null)\r\n  const digit2 = useRef<HTMLInputElement>(null)\r\n  const digit3 = useRef<HTMLInputElement>(null)\r\n  const digit4 = useRef<HTMLInputElement>(null)\r\n  const digit5 = useRef<HTMLInputElement>(null)\r\n  const digit6 = useRef<HTMLInputElement>(null)\r\n\r\n  const { t } = useTranslation()\r\n\r\n  const digitRefs = [digit1, digit2, digit3, digit4, digit5, digit6]\r\n\r\n  const scrollInputIntoView = () => {\r\n    if (containerRef.current) {\r\n      containerRef.current.scrollIntoView({ block: 'center', behavior: 'smooth' })\r\n    }\r\n  }\r\n\r\n  const onPasteHandler = (e: React.ClipboardEvent) => {\r\n    e.preventDefault()\r\n    const pasteContent = e.clipboardData.getData('Text')\r\n    if (pasteContent.length <= 6 && /^\\d+$/.test(pasteContent)) {\r\n      const filler = Array(6 - pasteContent.length).fill('')\r\n      updateTicket(ticket.id, [...pasteContent.split(''), ...filler])\r\n    }\r\n  }\r\n\r\n  const onFocusHandler = () => {\r\n    scrollInputIntoView()\r\n    setFocused(true)\r\n  }\r\n\r\n  const onBlurHandler = () => {\r\n    setFocused(false)\r\n  }\r\n\r\n  const onChangeHandler = (event: React.KeyboardEvent, digitId: number) => {\r\n    const currentKey = parseInt(event.key, 10)\r\n\r\n    if (['e', 'E', '.', ',', '-', 'Unidentified'].includes(event.key)) {\r\n      event.preventDefault()\r\n      return\r\n    }\r\n\r\n    // Handling numeric inputs\r\n    if (currentKey >= 0 && currentKey <= 9) {\r\n      event.preventDefault()\r\n      const newNumbers = [...ticket.numbers]\r\n      newNumbers[digitId] = `${currentKey}`\r\n      updateTicket(ticket.id, newNumbers)\r\n      const nextDigitId = digitId + 1\r\n      // if we're not on the last digit - auto-tab\r\n      const nextInput = digitRefs[nextDigitId]\r\n      if (nextDigitId !== countNumbers && nextInput.current) {\r\n        nextInput.current.focus()\r\n      }\r\n    }\r\n\r\n    if (event.key === 'Backspace') {\r\n      event.preventDefault()\r\n      // If some number is there - delete the number\r\n      if (ticket.numbers[digitId]) {\r\n        const newNumbers = [...ticket.numbers]\r\n        newNumbers[digitId] = ''\r\n        updateTicket(ticket.id, newNumbers)\r\n      } else {\r\n        // if the cell is empty and user presses backspace - remove previous\r\n        const prevDigitId = digitId - 1\r\n        const nextInput = digitRefs[prevDigitId]\r\n        // prevent focusing on non-existent input\r\n        if (prevDigitId !== -1 && nextInput.current) {\r\n          nextInput.current.focus()\r\n          const newNumbers = [...ticket.numbers]\r\n          newNumbers[prevDigitId] = ''\r\n          updateTicket(ticket.id, newNumbers)\r\n        }\r\n      }\r\n    }\r\n\r\n    if (event.key === 'Delete') {\r\n      event.preventDefault()\r\n      if (ticket.numbers[digitId]) {\r\n        const newNumbers = [...ticket.numbers]\r\n        newNumbers[digitId] = ''\r\n        updateTicket(ticket.id, newNumbers)\r\n      } else {\r\n        // if the cell is empty and user presses delete - remove next\r\n        const nextDigitId = digitId + 1\r\n        const nextInput = digitRefs[nextDigitId]\r\n        // prevent focusing on non-existent input\r\n        if (nextDigitId !== countNumbers && nextInput.current) {\r\n          nextInput.current.focus()\r\n          const newNumbers = [...ticket.numbers]\r\n          newNumbers[nextDigitId] = ''\r\n          updateTicket(ticket.id, newNumbers)\r\n        }\r\n      }\r\n    }\r\n\r\n    if (event.key === 'ArrowLeft') {\r\n      event.preventDefault()\r\n      const prevDigitId = digitId - 1\r\n      const nextInput = digitRefs[prevDigitId]\r\n      // prevent focusing on non-existent input\r\n      if (prevDigitId !== -1 && nextInput.current) {\r\n        nextInput.current.focus()\r\n      }\r\n    }\r\n\r\n    if (event.key === 'ArrowRight') {\r\n      event.preventDefault()\r\n      const nextDigitId = digitId + 1\r\n      const nextInput = digitRefs[nextDigitId]\r\n      // prevent focusing on non-existent input\r\n      if (nextDigitId !== countNumbers && nextInput.current) {\r\n        nextInput.current.focus()\r\n      }\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      <Flex justifyContent=\"space-between\">\r\n        <Text fontSize=\"12px\" color=\"textSubtle\">\r\n          {getIdLabel(ticket.id)}\r\n        </Text>\r\n        <Text fontSize=\"12px\" color=\"warning\">\r\n          {duplicateWith.length !== 0 && t('Duplicate')}\r\n        </Text>\r\n      </Flex>\r\n      <InputsContainer\r\n        ref={containerRef}\r\n        onClick={scrollInputIntoView}\r\n        focused={focused}\r\n        isDuplicate={duplicateWith.length !== 0}\r\n      >\r\n        {countNumbers >= 1 && (\r\n          <DigitInput\r\n            ref={digit1}\r\n            type=\"number\"\r\n            value={ticket.numbers[0]}\r\n            onKeyDown={(e: React.KeyboardEvent) => onChangeHandler(e, 0)}\r\n            placeholder=\"_\"\r\n            onChange={(e) => e.preventDefault()}\r\n            disabled={disabled}\r\n            onFocus={onFocusHandler}\r\n            onBlur={onBlurHandler}\r\n            onPaste={onPasteHandler}\r\n            inputMode=\"numeric\"\r\n          />\r\n        )}\r\n        {countNumbers >= 2 && (\r\n          <DigitInput\r\n            ref={digit2}\r\n            type=\"number\"\r\n            value={ticket.numbers[1]}\r\n            onKeyDown={(e: React.KeyboardEvent) => onChangeHandler(e, 1)}\r\n            placeholder=\"_\"\r\n            onChange={(e) => e.preventDefault()}\r\n            disabled={disabled}\r\n            onFocus={onFocusHandler}\r\n            onBlur={onBlurHandler}\r\n            onPaste={onPasteHandler}\r\n            inputMode=\"numeric\"\r\n          />\r\n        )}\r\n        {countNumbers >= 3 && (\r\n          <DigitInput\r\n            ref={digit3}\r\n            type=\"number\"\r\n            value={ticket.numbers[2]}\r\n            onKeyDown={(e: React.KeyboardEvent) => onChangeHandler(e, 2)}\r\n            placeholder=\"_\"\r\n            onChange={(e) => e.preventDefault()}\r\n            disabled={disabled}\r\n            onFocus={onFocusHandler}\r\n            onBlur={onBlurHandler}\r\n            onPaste={onPasteHandler}\r\n            inputMode=\"numeric\"\r\n          />\r\n        )}\r\n        {countNumbers >= 4 && (\r\n          <DigitInput\r\n            ref={digit4}\r\n            type=\"number\"\r\n            value={ticket.numbers[3]}\r\n            onKeyDown={(e: React.KeyboardEvent) => onChangeHandler(e, 3)}\r\n            placeholder=\"_\"\r\n            onChange={(e) => e.preventDefault()}\r\n            disabled={disabled}\r\n            onFocus={onFocusHandler}\r\n            onBlur={onBlurHandler}\r\n            onPaste={onPasteHandler}\r\n            inputMode=\"numeric\"\r\n          />\r\n        )}\r\n        {countNumbers >= 5 && (\r\n          <DigitInput\r\n            ref={digit5}\r\n            type=\"number\"\r\n            value={ticket.numbers[4]}\r\n            onKeyDown={(e: React.KeyboardEvent) => onChangeHandler(e, 4)}\r\n            placeholder=\"_\"\r\n            onChange={(e) => e.preventDefault()}\r\n            disabled={disabled}\r\n            onFocus={onFocusHandler}\r\n            onBlur={onBlurHandler}\r\n            onPaste={onPasteHandler}\r\n            inputMode=\"numeric\"\r\n          />\r\n        )}\r\n        {countNumbers >= 6 && (\r\n          <DigitInput\r\n            ref={digit6}\r\n            type=\"number\"\r\n            value={ticket.numbers[5]}\r\n            onKeyDown={(e: React.KeyboardEvent) => onChangeHandler(e, 5)}\r\n            placeholder=\"_\"\r\n            onChange={(e) => e.preventDefault()}\r\n            disabled={disabled}\r\n            onFocus={onFocusHandler}\r\n            onBlur={onBlurHandler}\r\n            onPaste={onPasteHandler}\r\n            inputMode=\"numeric\"\r\n          />\r\n        )}\r\n      </InputsContainer>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default TicketContainer\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Modal, Text, Flex, Button, ArrowBackIcon, AutoRenewIcon } from '@pancakeswap/uikit'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport * as token from 'config/constants/tokens.lottery'\r\nimport TicketInput from './TicketInput'\r\nimport { UpdateTicketAction, Ticket } from './useTicketsReducer'\r\n\r\nconst StyledModal = styled(Modal)`\r\n  min-width: 280px;\r\n  max-width: 320px;\r\n  max-height: 552px;\r\n\r\n  & div:nth-child(2) {\r\n    padding: 0;\r\n  }\r\n`\r\n\r\nconst ScrollableContainer = styled.div`\r\n  height: 310px;\r\n  overflow-y: scroll;\r\n  border-bottom: ${({ theme }) => `1px solid ${theme.colors.cardBorder}`};\r\n  padding: 24px;\r\n`\r\n\r\nconst EditNumbersModal: React.FC<{\r\n  totalCost: string\r\n  updateTicket: UpdateTicketAction\r\n  randomize: () => void\r\n  tickets: Ticket[]\r\n  allComplete: boolean\r\n  onConfirm: () => void\r\n  isConfirming: boolean\r\n  onDismiss?: () => void\r\n  isCheckingKYC?: boolean\r\n  isWalletOkKYC?: boolean\r\n}> = ({ totalCost, updateTicket, randomize, tickets, allComplete, onConfirm, isConfirming, onDismiss, isCheckingKYC, isWalletOkKYC }) => {\r\n  const { theme } = useTheme()\r\n  const { t } = useTranslation()\r\n  return (\r\n    <StyledModal\r\n      title={t('Edit numbers')}\r\n      onDismiss={onDismiss}\r\n      headerBackground={theme.colors.gradients.cardHeader}\r\n      onBack={onDismiss}\r\n    >\r\n      <ScrollableContainer>\r\n        <Flex justifyContent=\"space-between\" mb=\"16px\">\r\n          <Text color=\"textSubtle\">{t('Total cost')}:</Text>\r\n          <Text>~{totalCost} {token.info().symbol}</Text>\r\n        </Flex>\r\n        <Text fontSize=\"12px\" color=\"textSubtle\" mb=\"16px\">\r\n          {t(\r\n            'Numbers are randomized, with no duplicates among your tickets. Tap a number to edit it. Available digits: 0-9',\r\n          )}\r\n        </Text>\r\n        <Button disabled={isConfirming} mb=\"16px\" variant=\"secondary\" width=\"100%\" height=\"32px\" onClick={randomize}>\r\n          {t('Randomize')}\r\n        </Button>\r\n        {tickets.map((ticket) => (\r\n          <TicketInput\r\n            key={ticket.id}\r\n            ticket={ticket}\r\n            duplicateWith={ticket.duplicateWith}\r\n            updateTicket={updateTicket}\r\n            disabled={isConfirming}\r\n          />\r\n        ))}\r\n      </ScrollableContainer>\r\n      <Flex flexDirection=\"column\" justifyContent=\"center\" m=\"24px\">\r\n        {isCheckingKYC && (\r\n          <Button disabled={true} width=\"100%\" isLoading={true}>{`Loading...`}</Button>\r\n        )}\r\n        {!isCheckingKYC && !isWalletOkKYC && (\r\n          <Button\r\n            onClick={() => {\r\n              // @ts-ignore\r\n              if (window?.SO_LotteryConfig?.kycVerifyLink) {\r\n                // @ts-ignore\r\n                window.open(window.SO_LotteryConfig.kycVerifyLink)\r\n              }\r\n            }}\r\n          >\r\n            {`Need KYC verify`}\r\n          </Button>\r\n        )}\r\n        {!isCheckingKYC && isWalletOkKYC && (\r\n          <>\r\n            <Button\r\n              id=\"lotteryBuyEdited\"\r\n              disabled={!allComplete || isConfirming}\r\n              endIcon={isConfirming ? <AutoRenewIcon spin color=\"currentColor\" /> : undefined}\r\n              onClick={() => {\r\n                onConfirm()\r\n              }}\r\n            >\r\n              {isConfirming ? t('Confirming') : t('Confirm and buy')}\r\n            </Button>\r\n            <Button mt=\"8px\" variant={isConfirming ? 'secondary' : 'text'} disabled={isConfirming} onClick={onDismiss}>\r\n              <ArrowBackIcon color={isConfirming ? 'disabled' : 'primary'} height=\"24px\" width=\"24px\" /> {t('Go back')}\r\n            </Button>\r\n          </>\r\n        )}\r\n      </Flex>\r\n    </StyledModal>\r\n  )\r\n}\r\n\r\nexport default EditNumbersModal\r\n","import BigNumber from 'bignumber.js'\r\nimport { LotteryResponse, LotteryRound, LotteryRoundUserTickets } from 'state/types'\r\n\r\n/**\r\n * Remove the '1' and reverse the digits in a lottery number retrieved from the smart contract\r\n */\r\nexport const parseRetrievedNumber = (number: string): string => {\r\n  const numberAsArray = number.split('')\r\n  numberAsArray.splice(0, 1)\r\n  numberAsArray.reverse()\r\n  return numberAsArray.join('')\r\n}\r\n\r\nexport const getDrawnDate = (locale: string, endTime: string) => {\r\n  const endTimeInMs = parseInt(endTime, 10) * 1000\r\n  const endTimeAsDate = new Date(endTimeInMs)\r\n  return endTimeAsDate.toLocaleDateString(locale, dateTimeOptions)\r\n}\r\n\r\nexport const dateOptions: Intl.DateTimeFormatOptions = {\r\n  year: 'numeric',\r\n  month: 'short',\r\n  day: 'numeric',\r\n}\r\n\r\nexport const timeOptions: Intl.DateTimeFormatOptions = {\r\n  hour: 'numeric',\r\n  minute: 'numeric',\r\n}\r\n\r\nexport const dateTimeOptions: Intl.DateTimeFormatOptions = {\r\n  ...dateOptions,\r\n  ...timeOptions,\r\n}\r\n\r\nexport const processLotteryResponse = (\r\n  lotteryData: LotteryResponse & { userTickets?: LotteryRoundUserTickets },\r\n): LotteryRound => {\r\n  const {\r\n    priceTicketInCake: priceTicketInCakeAsString,\r\n    discountDivisor: discountDivisorAsString,\r\n    amountCollectedInCake: amountCollectedInCakeAsString,\r\n  } = lotteryData\r\n\r\n  const discountDivisor = new BigNumber(discountDivisorAsString)\r\n  const priceTicketInCake = new BigNumber(priceTicketInCakeAsString)\r\n  const amountCollectedInCake = new BigNumber(amountCollectedInCakeAsString)\r\n\r\n  return {\r\n    isLoading: lotteryData.isLoading,\r\n    lotteryId: lotteryData.lotteryId,\r\n    userTickets: lotteryData.userTickets,\r\n    status: lotteryData.status,\r\n    startTime: lotteryData.startTime,\r\n    endTime: lotteryData.endTime,\r\n    priceTicketInCake,\r\n    discountDivisor,\r\n    treasuryFee: lotteryData.treasuryFee,\r\n    firstTicketId: lotteryData.firstTicketId,\r\n    lastTicketId: lotteryData.lastTicketId,\r\n    amountCollectedInCake,\r\n    finalNumber: lotteryData.finalNumber,\r\n    cakePerBracket: lotteryData.cakePerBracket,\r\n    countWinnersPerBracket: lotteryData.countWinnersPerBracket,\r\n    rewardsBreakdown: lotteryData.rewardsBreakdown,\r\n  }\r\n}\r\n","import { LotteryTicket } from 'config/constants/types'\r\nimport { random } from 'lodash'\r\n\r\n// @ts-ignore\r\nconst countNumbers = window.SO_LotteryConfig.numbersCount\r\n/**\r\n * Generate a specific number of unique, randomised 7-digit lottery numbers between 1000000 & 1999999\r\n */\r\nconst generateTicketNumbers = (\r\n  numberOfTickets: number,\r\n  userCurrentTickets?: LotteryTicket[],\r\n  minNumber = parseInt('1000000'.substr(0, countNumbers+1), 10),\r\n  maxNumber = parseInt('1999999'.substr(0, countNumbers+1), 10),\r\n): number[] => {\r\n  // Populate array with existing tickets (if they have them) to ensure no duplicates when generating new numbers\r\n  const existingTicketNumbers =\r\n    userCurrentTickets?.length > 0\r\n      ? userCurrentTickets.map((ticket) => {\r\n          return parseInt(ticket?.number)\r\n        })\r\n      : []\r\n  const generatedTicketNumbers = [...existingTicketNumbers]\r\n\r\n  for (let count = 0; count < numberOfTickets; count++) {\r\n    let randomNumber = random(minNumber, maxNumber)\r\n    while (generatedTicketNumbers.includes(randomNumber)) {\r\n      // Catch for duplicates - generate a new number until the array doesn't include the random number generated\r\n      randomNumber = random(minNumber, maxNumber)\r\n    }\r\n    generatedTicketNumbers.push(randomNumber)\r\n  }\r\n\r\n  // Filter out the users' existing tickets\r\n  const ticketsToBuy =\r\n    userCurrentTickets?.length > 0\r\n      ? generatedTicketNumbers.filter((ticketNumber) => {\r\n          return !existingTicketNumbers.includes(ticketNumber)\r\n        })\r\n      : generatedTicketNumbers\r\n\r\n  console.log('>>> ticketsToBuy', ticketsToBuy)\r\n  return ticketsToBuy\r\n}\r\n\r\nexport default generateTicketNumbers\r\n","import { LotteryTicket } from 'config/constants/types'\r\nimport { useEffect, useReducer } from 'react'\r\nimport { parseRetrievedNumber } from '../../helpers'\r\nimport generateTicketNumbers from './generateTicketNumbers'\r\n\r\nexport interface Ticket {\r\n  id: number\r\n  numbers: string[]\r\n  duplicateWith: number[]\r\n  isComplete: boolean\r\n}\r\n\r\nexport interface TicketsState {\r\n  tickets: Ticket[]\r\n  allComplete: boolean\r\n}\r\n\r\nconst getInitialState = ({\r\n  amount,\r\n  userCurrentTickets,\r\n}: {\r\n  amount: number\r\n  userCurrentTickets: LotteryTicket[]\r\n}): TicketsState => {\r\n  const randomTickets = generateTicketNumbers(amount, userCurrentTickets)\r\n  // @ts-ignore\r\n  const randomTicketsAsStringArray = randomTickets.map((ticket) => parseRetrievedNumber(ticket.toString()).split(''))\r\n  const tickets = Array.from({ length: amount }, (_, i) => i + 1).map((index) => ({\r\n    id: index,\r\n    numbers: randomTicketsAsStringArray[index - 1],\r\n    duplicateWith: [],\r\n    isComplete: true,\r\n  }))\r\n  return {\r\n    tickets,\r\n    allComplete: true,\r\n  }\r\n}\r\n\r\n// @ts-ignore\r\nconst countNumbers = window.SO_LotteryConfig.numbersCount\r\n\r\nconst reducer = (state: TicketsState, action: any) => {\r\n  switch (action.type) {\r\n    case 'updateTicket': {\r\n      const tickets = [...state.tickets]\r\n      const { ticketId, newNumbers } = action.payload\r\n\r\n      const newDuplicates = state.tickets.filter(\r\n        (ticket) => ticket.id !== ticketId && ticket.isComplete && ticket.numbers.join('') === newNumbers.join(''),\r\n      )\r\n\r\n      // If ticket was duplicate but not duplicate anymore with this update\r\n      // go through previously considered duplicates and remove id of this ticket\r\n      // from their duplicateWith array\r\n      const prevDuplicates = tickets[ticketId - 1].duplicateWith\r\n      prevDuplicates.forEach((prevTicketId) => {\r\n        if (!newDuplicates.map(({ id }) => id).includes(prevTicketId)) {\r\n          const dupsToUpdate = [...tickets[prevTicketId - 1].duplicateWith]\r\n          const indexToRemove = dupsToUpdate.findIndex((id) => id === ticketId)\r\n          dupsToUpdate.splice(indexToRemove, 1)\r\n          tickets[prevTicketId - 1] = {\r\n            ...tickets[prevTicketId - 1],\r\n            duplicateWith: dupsToUpdate,\r\n          }\r\n        }\r\n      })\r\n\r\n      // If found duplicates - update their duplicateWith array\r\n      if (newDuplicates.length !== 0) {\r\n        newDuplicates.forEach((duplicate) => {\r\n          tickets[duplicate.id - 1] = {\r\n            ...duplicate,\r\n            duplicateWith: [...duplicate.duplicateWith, ticketId],\r\n          }\r\n        })\r\n      }\r\n\r\n      const updatedTicket = {\r\n        id: ticketId,\r\n        numbers: newNumbers,\r\n        duplicateWith: newDuplicates.map((ticket) => ticket.id),\r\n        isComplete: newNumbers.join('').length === countNumbers,\r\n      }\r\n      tickets[ticketId - 1] = updatedTicket\r\n\r\n      // Check if all tickets are filled\r\n      const allComplete = tickets.every((ticket) => ticket.isComplete)\r\n\r\n      return {\r\n        tickets,\r\n        allComplete,\r\n      }\r\n    }\r\n    case 'reset':\r\n      return getInitialState({ amount: action.payload.amount, userCurrentTickets: action.payload.userCurrentTickets })\r\n    default:\r\n      throw new Error()\r\n  }\r\n}\r\n\r\nexport type UpdateTicketAction = (ticketId: number, newNumbers: string[]) => void\r\n\r\nexport const useTicketsReducer = (\r\n  amount: number,\r\n  userCurrentTickets: LotteryTicket[],\r\n): [UpdateTicketAction, () => void, Ticket[], boolean, () => number[]] => {\r\n  const [state, dispatch] = useReducer(reducer, { amount, userCurrentTickets }, getInitialState)\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: 'reset', payload: { amount, userCurrentTickets } })\r\n  }, [amount, userCurrentTickets])\r\n\r\n  const updateTicket = (ticketId: number, newNumbers: string[]) => {\r\n    dispatch({ type: 'updateTicket', payload: { ticketId, newNumbers } })\r\n  }\r\n\r\n  const randomize = () => {\r\n    dispatch({ type: 'reset', payload: { amount, userCurrentTickets } })\r\n  }\r\n\r\n  const getTicketsForPurchase = () => {\r\n    return state.tickets.map((ticket) => {\r\n      const reversedTicket = [...ticket.numbers].map((num) => parseInt(num, 10)).reverse()\r\n      reversedTicket.unshift(1)\r\n      const ticketAsNumber = parseInt(reversedTicket.join(''), 10)\r\n      return ticketAsNumber\r\n    })\r\n  }\r\n\r\n  return [updateTicket, randomize, state.tickets, state.allComplete, getTicketsForPurchase]\r\n}\r\n","import React from 'react'\r\nimport { Button, ButtonProps } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport styled from 'styled-components'\r\n\r\n\r\ninterface BuyTokenButtonProps extends ButtonProps {\r\n  disabled?: boolean\r\n}\r\nconst StyledBuyButton = styled(Button)`\r\n  margin-top: 5px;\r\n  margin-bottom: 5px;\r\n`\r\n\r\nconst BuyTokenButton: React.FC<BuyTokenButtonProps> = ({ disabled, ...props }) => {\r\n  const { t } = useTranslation()\r\n  // @ts-ignore\r\n  const buyTokenLink = window?.SO_LotteryConfig?.buyTokenLink\r\n  // @ts-ignore\r\n  const tokenTitle = window?.SO_LotteryConfig?.token?.symbol\r\n  const onPress = (e) => {\r\n    e.preventDefault()\r\n    window.open(buyTokenLink)\r\n  }\r\n\r\n\r\n  const getBuyButtonText = () => {\r\n    return t(`Buy ${tokenTitle}`)\r\n  }\r\n\r\n  if (!buyTokenLink) return null\r\n\r\n  return (\r\n    // @ts-ignore\r\n    <StyledBuyButton className='primaryButton' {...props} disabled={disabled} onClick={onPress}>\r\n      {getBuyButtonText()}\r\n    </StyledBuyButton>\r\n  )\r\n}\r\n\r\nexport default BuyTokenButton\r\n","import { useState, useEffect } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useGetLotteriesGraphData, useGetUserLotteriesGraphData, useLottery } from 'state/lottery/hooks'\r\nimport fetchUnclaimedUserRewards from 'state/lottery/fetchUnclaimedUserRewards'\r\n\r\nexport enum FetchStatus {\r\n  NOT_FETCHED = 'not-fetched',\r\n  IN_PROGRESS = 'in-progress',\r\n  SUCCESS = 'success',\r\n}\r\n\r\nconst useGetUnclaimedRewards = () => {\r\n  const { account } = useWeb3React()\r\n  const { isTransitioning, currentLotteryId } = useLottery()\r\n  const userLotteryData = useGetUserLotteriesGraphData()\r\n  const lotteriesData = useGetLotteriesGraphData()\r\n  const [unclaimedRewards, setUnclaimedRewards] = useState([])\r\n  const [fetchStatus, setFetchStatus] = useState(FetchStatus.NOT_FETCHED)\r\n\r\n  useEffect(() => {\r\n    // Reset on account change and round transition\r\n    setFetchStatus(FetchStatus.NOT_FETCHED)\r\n  }, [account, isTransitioning])\r\n\r\n  const fetchAllRewards = async () => {\r\n    setFetchStatus(FetchStatus.IN_PROGRESS)\r\n    const unclaimedRewardsResponse = await fetchUnclaimedUserRewards(\r\n      account,\r\n      userLotteryData,\r\n      lotteriesData,\r\n      currentLotteryId,\r\n    )\r\n    setUnclaimedRewards(unclaimedRewardsResponse)\r\n    setFetchStatus(FetchStatus.SUCCESS)\r\n  }\r\n\r\n  return { fetchAllRewards, unclaimedRewards, fetchStatus }\r\n}\r\n\r\nexport default useGetUnclaimedRewards\r\n","import { useCallback } from 'react'\r\nimport ethers, { Contract, CallOverrides } from 'ethers'\r\nimport { useGasPrice } from 'state/user/hooks'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { get } from 'lodash'\r\n\r\n/**\r\n * Perform a contract call with a gas price returned from useGasPrice\r\n * @param contract Used to perform the call\r\n * @param methodName The name of the method called\r\n * @param methodArgs An array of arguments to pass to the method\r\n * @param overrides An overrides object to pass to the method. gasPrice passed in here will take priority over the price returned by useGasPrice\r\n * @returns https://docs.ethers.io/v5/api/providers/types/#providers-TransactionReceipt\r\n */\r\nexport function useCallWithGasPrice() {\r\n  const gasPrice = useGasPrice()\r\n\r\n  const { library } = useWeb3React()\r\n\r\n  const callWithGasPrice = useCallback(\r\n    async (\r\n      contract: Contract,\r\n      methodName: string,\r\n      methodArgs: any[] = [],\r\n      overrides: CallOverrides = null,\r\n    ): Promise<ethers.providers.TransactionResponse> => {\r\n      const contractMethod = get(contract, methodName)\r\n      const hasManualGasPriceOverride = overrides?.gasPrice\r\n      const tx = await contractMethod(\r\n        ...methodArgs,\r\n        hasManualGasPriceOverride\r\n          ? { ...overrides }\r\n          : { ...overrides, gasPrice: await library?.getGasPrice?.() || gasPrice },\r\n      )\r\n\r\n      return tx\r\n    },\r\n    [gasPrice],\r\n  )\r\n\r\n  return { callWithGasPrice }\r\n}\r\n","import React from 'react'\r\nimport { Button, useModal, WaitIcon, ButtonProps } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useLottery } from 'state/lottery/hooks'\r\nimport { LotteryStatus } from 'config/constants/types'\r\nimport BuyTicketsModal from './BuyTicketsModal/BuyTicketsModal'\r\nimport styled from 'styled-components'\r\n\r\n\r\ninterface BuyTicketsButtonProps extends ButtonProps {\r\n  disabled?: boolean\r\n}\r\n\r\nconst StyledBuyButton = styled(Button)`\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n`\r\n\r\nconst BuyTicketsButton: React.FC<BuyTicketsButtonProps> = ({ disabled, ...props }) => {\r\n  const { t } = useTranslation()\r\n  const [onPresentBuyTicketsModal] = useModal(<BuyTicketsModal />)\r\n  const {\r\n    currentRound: { status },\r\n  } = useLottery()\r\n\r\n  const getBuyButtonText = () => {\r\n    if (status === LotteryStatus.OPEN) {\r\n      return t('Buy Tickets')\r\n    }\r\n    return (\r\n      <>\r\n        <WaitIcon mr=\"4px\" color=\"textDisabled\" /> {t('On sale soon!')}\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    // @ts-ignore\r\n    <StyledBuyButton className='primaryButton' {...props} disabled={disabled} onClick={onPresentBuyTicketsModal}>\r\n      {getBuyButtonText()}\r\n    </StyledBuyButton>\r\n  )\r\n}\r\n\r\nexport default BuyTicketsButton\r\n","import React from 'react'\r\nimport styled, { keyframes } from 'styled-components'\r\nimport { Box, Flex, Heading, Skeleton } from '@pancakeswap/uikit'\r\nimport { LotteryStatus } from 'config/constants/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { usePriceCakeBusd } from 'state/farms/hooks'\r\nimport { useLottery } from 'state/lottery/hooks'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport Balance from 'components/Balance'\r\nimport * as token from 'config/constants/tokens.lottery'\r\nimport { TicketPurchaseCard } from '../svgs'\r\nimport BuyTicketsButton from './BuyTicketsButton'\r\n\r\nconst floatingStarsLeft = keyframes`\r\n  from {\r\n    transform: translate(0,  0px);\r\n  }\r\n  50% {\r\n    transform: translate(10px, 10px);\r\n  }\r\n  to {\r\n    transform: translate(0, -0px);\r\n  }  \r\n`\r\n\r\nconst floatingStarsRight = keyframes`\r\n  from {\r\n    transform: translate(0,  0px);\r\n  }\r\n  50% {\r\n    transform: translate(-10px, 10px);\r\n  }\r\n  to {\r\n    transform: translate(0, -0px);\r\n  }  \r\n`\r\n\r\nconst floatingTicketLeft = keyframes`\r\n  from {\r\n    transform: translate(0,  0px);\r\n  }\r\n  50% {\r\n    transform: translate(-10px, 15px);\r\n  }\r\n  to {\r\n    transform: translate(0, -0px);\r\n  }  \r\n`\r\n\r\nconst floatingTicketRight = keyframes`\r\n  from {\r\n    transform: translate(0,  0px);\r\n  }\r\n  50% {\r\n    transform: translate(10px, 15px);\r\n  }\r\n  to {\r\n    transform: translate(0, -0px);\r\n  }  \r\n`\r\n\r\nconst mainTicketAnimation = keyframes`\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  50% {\r\n    transform: rotate(6deg);\r\n  }\r\n  to {\r\n    transform: rotate(0deg);\r\n  }  \r\n`\r\n\r\nconst TicketContainer = styled(Flex)`\r\n  animation: ${mainTicketAnimation} 3s ease-in-out infinite;\r\n`\r\n\r\nconst PrizeTotalBalance = styled(Balance)`\r\n  background: ${({ theme }) => theme.colors.gradients.gold};\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n`\r\n\r\nconst StyledBuyTicketButton = styled(BuyTicketsButton)<{ disabled: boolean }>`\r\n  background: ${({ theme, disabled }) =>\r\n    disabled ? theme.colors.disabled : 'linear-gradient(180deg, #7645d9 0%, #452a7a 100%)'};\r\n  width: 200px;\r\n  ${({ theme }) => theme.mediaQueries.xs} {\r\n    width: 240px;\r\n  }\r\n`\r\n\r\nconst ButtonWrapper = styled.div`\r\n  z-index: 1;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%) rotate(-4deg);\r\n`\r\n\r\nconst TicketSvgWrapper = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  transform: rotate(-4deg);\r\n`\r\n\r\nconst Decorations = styled.div`\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: url(./images/decorations/bg-star.svg);\r\n  background-repeat: no-repeat;\r\n  background-position: center 0;\r\n`\r\n\r\nconst StarsDecorations = styled(Box)`\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  & img {\r\n    position: absolute;\r\n  }\r\n\r\n  & :nth-child(1) {\r\n    animation: ${floatingStarsLeft} 3s ease-in-out infinite;\r\n    animation-delay: 0.25s;\r\n  }\r\n  & :nth-child(2) {\r\n    animation: ${floatingStarsLeft} 3.5s ease-in-out infinite;\r\n    animation-delay: 0.5s;\r\n  }\r\n  & :nth-child(3) {\r\n    animation: ${floatingStarsRight} 4s ease-in-out infinite;\r\n    animation-delay: 0.75s;\r\n  }\r\n  & :nth-child(4) {\r\n    animation: ${floatingTicketLeft} 6s ease-in-out infinite;\r\n    animation-delay: 0.2s;\r\n  }\r\n  & :nth-child(5) {\r\n    animation: ${floatingTicketRight} 6s ease-in-out infinite;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    & :nth-child(1) {\r\n      left: 3%;\r\n      top: 42%;\r\n    }\r\n    & :nth-child(2) {\r\n      left: 9%;\r\n      top: 23%;\r\n    }\r\n    & :nth-child(3) {\r\n      right: 2%;\r\n      top: 24%;\r\n    }\r\n    & :nth-child(4) {\r\n      left: 8%;\r\n      top: 67%;\r\n    }\r\n    & :nth-child(5) {\r\n      right: 8%;\r\n      top: 67%;\r\n    }\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    & :nth-child(1) {\r\n      left: 10%;\r\n      top: 42%;\r\n    }\r\n    & :nth-child(2) {\r\n      left: 17%;\r\n      top: 23%;\r\n    }\r\n    & :nth-child(3) {\r\n      right: 10%;\r\n      top: 24%;\r\n    }\r\n    & :nth-child(4) {\r\n      left: 17%;\r\n      top: 67%;\r\n    }\r\n    & :nth-child(5) {\r\n      right: 17%;\r\n      top: 67%;\r\n    }\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.xl} {\r\n    & :nth-child(1) {\r\n      left: 19%;\r\n      top: 42%;\r\n    }\r\n    & :nth-child(2) {\r\n      left: 25%;\r\n      top: 23%;\r\n    }\r\n    & :nth-child(3) {\r\n      right: 19%;\r\n      top: 24%;\r\n    }\r\n    & :nth-child(4) {\r\n      left: 24%;\r\n      top: 67%;\r\n    }\r\n    & :nth-child(5) {\r\n      right: 24%;\r\n      top: 67%;\r\n    }\r\n  }\r\n`\r\n\r\nconst Hero = () => {\r\n  const { t } = useTranslation()\r\n  const {\r\n    currentRound: { amountCollectedInCake, status },\r\n    isTransitioning,\r\n  } = useLottery()\r\n\r\n  const cakePriceBusd = token.info().price || 0\r\n  const prizeInBusd = amountCollectedInCake.times(cakePriceBusd)\r\n  const prizeTotal = getBalanceNumber(prizeInBusd, token.info().decimals)\r\n  const ticketBuyIsDisabled = status !== LotteryStatus.OPEN || isTransitioning\r\n\r\n  const getHeroHeading = () => {\r\n    if (status === LotteryStatus.OPEN) {\r\n      return (\r\n        <>\r\n          {prizeInBusd.isNaN() ? (\r\n            <Skeleton my=\"7px\" height={60} width={190} />\r\n          ) : (\r\n            <PrizeTotalBalance fontSize=\"64px\" bold prefix=\"$\" value={prizeTotal} mb=\"8px\" decimals={0} />\r\n          )}\r\n          <Heading mb=\"32px\" scale=\"lg\" color=\"#ffffff\">\r\n            {t('in prizes!')}\r\n          </Heading>\r\n        </>\r\n      )\r\n    }\r\n    return (\r\n      <Heading mb=\"24px\" scale=\"xl\" color=\"#ffffff\">\r\n        {t('Tickets on sale soon')}\r\n      </Heading>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Flex flexDirection=\"column\" alignItems=\"center\" justifyContent=\"center\">\r\n      <Decorations />\r\n      <StarsDecorations display={['none', 'none', 'block']}>\r\n        <img src=\"./images/lottery/star-big.png\" width=\"124px\" height=\"109px\" alt=\"\" />\r\n        <img src=\"./images/lottery/star-small.png\" width=\"70px\" height=\"62px\" alt=\"\" />\r\n        <img src=\"./images/lottery/three-stars.png\" width=\"130px\" height=\"144px\" alt=\"\" />\r\n        <img src=\"./images/lottery/ticket-l.png\" width=\"123px\" height=\"83px\" alt=\"\" />\r\n        <img src=\"./images/lottery/ticket-r.png\" width=\"121px\" height=\"72px\" alt=\"\" />\r\n      </StarsDecorations>\r\n      \r\n      {token.info().price && (\r\n        <>{getHeroHeading()}</>\r\n      )}\r\n      {/* @ts-ignore */ }\r\n      {window && window.SO_LotteryConfig && window.SO_LotteryConfig.chainName && (\r\n        <Heading mb=\"8px\" scale=\"md\" color=\"#ffffff\" id=\"lottery-hero-title\">\r\n          {t('The Lottery operates on the %chainName% Network', {\r\n            // @ts-ignore\r\n            chainName: window.SO_LotteryConfig.chainName,\r\n          })}\r\n        </Heading>\r\n      )}\r\n      <TicketContainer\r\n        position=\"relative\"\r\n        width={['240px', '288px']}\r\n        height={['94px', '113px']}\r\n        alignItems=\"center\"\r\n        justifyContent=\"center\"\r\n      >\r\n        <ButtonWrapper>\r\n          <StyledBuyTicketButton className='primaryButton' disabled={ticketBuyIsDisabled} />\r\n        </ButtonWrapper>\r\n        <TicketSvgWrapper>\r\n          <TicketPurchaseCard width=\"100%\" />\r\n        </TicketSvgWrapper>\r\n      </TicketContainer>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default Hero\r\n","import BigNumber from 'bignumber.js'\r\nimport { ethers } from 'ethers'\r\nimport { LotteryStatus, LotteryTicket, LotteryTicketClaimData } from 'config/constants/types'\r\nimport { LotteryUserGraphEntity, LotteryRoundGraphEntity } from 'state/types'\r\nimport { multicallv2 } from 'utils/multicall'\r\nimport lotteryV2Abi from 'config/abi/lotteryV2.json'\r\nimport { NUM_ROUNDS_TO_CHECK_FOR_REWARDS } from 'config/constants/lottery'\r\nimport { getLotteryV2Address } from 'utils/addressHelpers'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { fetchUserTicketsForMultipleRounds } from './getUserTicketsData'\r\nimport { MAX_LOTTERIES_REQUEST_SIZE } from './getLotteriesData'\r\n\r\ninterface RoundDataAndUserTickets {\r\n  roundId: string\r\n  userTickets: LotteryTicket[]\r\n  finalNumber: string\r\n}\r\n\r\nconst lotteryAddress = getLotteryV2Address()\r\n\r\nconst fetchCakeRewardsForTickets = async (\r\n  winningTickets: LotteryTicket[],\r\n): Promise<{ ticketsWithUnclaimedRewards: LotteryTicket[]; cakeTotal: BigNumber }> => {\r\n  const calls = winningTickets.map((winningTicket) => {\r\n    const { roundId, id, rewardBracket } = winningTicket\r\n    return {\r\n      name: 'viewRewardsForTicketId',\r\n      address: lotteryAddress,\r\n      params: [roundId, id, rewardBracket],\r\n    }\r\n  })\r\n\r\n  try {\r\n    const cakeRewards = await multicallv2(lotteryV2Abi, calls)\r\n\r\n    const cakeTotal = cakeRewards.reduce((accum: BigNumber, cakeReward: ethers.BigNumber[]) => {\r\n      return accum.plus(new BigNumber(cakeReward[0].toString()))\r\n    }, BIG_ZERO)\r\n\r\n    const ticketsWithUnclaimedRewards = winningTickets.map((winningTicket, index) => {\r\n      return { ...winningTicket, cakeReward: cakeRewards[index] }\r\n    })\r\n    return { ticketsWithUnclaimedRewards, cakeTotal }\r\n  } catch (error) {\r\n    console.error(error)\r\n    return { ticketsWithUnclaimedRewards: null, cakeTotal: null }\r\n  }\r\n}\r\n\r\nconst getRewardBracketByNumber = (ticketNumber: string, finalNumber: string): number => {\r\n  // Winning numbers are evaluated right-to-left in the smart contract, so we reverse their order for validation here:\r\n  // i.e. '1123456' should be evaluated as '6543211'\r\n  const ticketNumAsArray = ticketNumber.split('').reverse()\r\n  const winningNumsAsArray = finalNumber.split('').reverse()\r\n  const matchingNumbers = []\r\n\r\n  // The number at index 6 in all tickets is 1 and will always match, so finish at index 5\r\n  for (let index = 0; index < winningNumsAsArray.length - 1; index++) {\r\n    if (ticketNumAsArray[index] !== winningNumsAsArray[index]) {\r\n      break\r\n    }\r\n    matchingNumbers.push(ticketNumAsArray[index])\r\n  }\r\n\r\n  // Reward brackets refer to indexes, 0 = 1 match, 5 = 6 matches. Deduct 1 from matchingNumbers' length to get the reward bracket\r\n  const rewardBracket = matchingNumbers.length - 1\r\n  return rewardBracket\r\n}\r\n\r\nexport const getWinningTickets = async (\r\n  roundDataAndUserTickets: RoundDataAndUserTickets,\r\n): Promise<LotteryTicketClaimData> => {\r\n  const { roundId, userTickets, finalNumber } = roundDataAndUserTickets\r\n\r\n  const ticketsWithRewardBrackets = userTickets.map((ticket) => {\r\n    return {\r\n      roundId,\r\n      id: ticket.id,\r\n      number: ticket.number,\r\n      status: ticket.status,\r\n      rewardBracket: getRewardBracketByNumber(ticket.number, finalNumber),\r\n    }\r\n  })\r\n\r\n  // A rewardBracket of -1 means no matches. 0 and above means there has been a match\r\n  const allWinningTickets = ticketsWithRewardBrackets.filter((ticket) => {\r\n    return ticket.rewardBracket >= 0\r\n  })\r\n\r\n  // If ticket.status is true, the ticket has already been claimed\r\n  const unclaimedWinningTickets = allWinningTickets.filter((ticket) => {\r\n    return !ticket.status\r\n  })\r\n\r\n  if (unclaimedWinningTickets.length > 0) {\r\n    const { ticketsWithUnclaimedRewards, cakeTotal } = await fetchCakeRewardsForTickets(unclaimedWinningTickets)\r\n    return { ticketsWithUnclaimedRewards, allWinningTickets, cakeTotal, roundId }\r\n  }\r\n\r\n  if (allWinningTickets.length > 0) {\r\n    return { ticketsWithUnclaimedRewards: null, allWinningTickets, cakeTotal: null, roundId }\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nconst getWinningNumbersForRound = (targetRoundId: string, lotteriesData: LotteryRoundGraphEntity[]) => {\r\n  const targetRound = lotteriesData.find((pastLottery) => pastLottery.id === targetRoundId)\r\n  return targetRound?.finalNumber\r\n}\r\n\r\nconst fetchUnclaimedUserRewards = async (\r\n  account: string,\r\n  userLotteryData: LotteryUserGraphEntity,\r\n  lotteriesData: LotteryRoundGraphEntity[],\r\n  currentLotteryId: string,\r\n): Promise<LotteryTicketClaimData[]> => {\r\n  const { rounds } = userLotteryData\r\n\r\n  // If there is no user round history - return an empty array\r\n  if (rounds.length === 0) {\r\n    return []\r\n  }\r\n\r\n  // If the web3 provider account doesn't equal the userLotteryData account, return an empty array - this is effectively a loading state as the user switches accounts\r\n  if (userLotteryData.account.toLowerCase() !== account.toLowerCase()) {\r\n    return []\r\n  }\r\n\r\n  // Filter out rounds without subgraph data (i.e. >100 rounds ago)\r\n  const roundsInRange = rounds.filter((round) => {\r\n    const lastCheckableRoundId = parseInt(currentLotteryId, 10) - MAX_LOTTERIES_REQUEST_SIZE\r\n    const roundId = parseInt(round.lotteryId, 10)\r\n    return roundId >= lastCheckableRoundId\r\n  })\r\n\r\n  // Filter out non-claimable rounds\r\n  const claimableRounds = roundsInRange.filter((round) => {\r\n    return round.status.toLowerCase() === LotteryStatus.CLAIMABLE\r\n  })\r\n\r\n  // Rounds with no tickets claimed OR rounds where a user has over 100 tickets, could have prizes\r\n  const roundsWithPossibleWinnings = claimableRounds.filter((round) => {\r\n    return !round.claimed || parseInt(round.totalTickets, 10) > 100\r\n  })\r\n\r\n  // Check the X  most recent rounds, where X is NUM_ROUNDS_TO_CHECK_FOR_REWARDS\r\n  const roundsToCheck = roundsWithPossibleWinnings.slice(0, NUM_ROUNDS_TO_CHECK_FOR_REWARDS)\r\n\r\n  if (roundsToCheck.length > 0) {\r\n    const idsToCheck = roundsToCheck.map((round) => round.lotteryId)\r\n    const userTicketData = await fetchUserTicketsForMultipleRounds(idsToCheck, account)\r\n    const roundsWithTickets = userTicketData.filter((roundData) => roundData?.userTickets?.length > 0)\r\n\r\n    const roundDataAndWinningTickets = roundsWithTickets.map((roundData) => {\r\n      return { ...roundData, finalNumber: getWinningNumbersForRound(roundData.roundId, lotteriesData) }\r\n    })\r\n\r\n    const winningTicketsForPastRounds = await Promise.all(\r\n      roundDataAndWinningTickets.map((roundData) => getWinningTickets(roundData)),\r\n    )\r\n\r\n    // Filter out null values (returned when no winning tickets found for past round)\r\n    const roundsWithWinningTickets = winningTicketsForPastRounds.filter(\r\n      (winningTicketData) => winningTicketData !== null,\r\n    )\r\n\r\n    // Filter to only rounds with unclaimed tickets\r\n    const roundsWithUnclaimedWinningTickets = roundsWithWinningTickets.filter(\r\n      (winningTicketData) => winningTicketData.ticketsWithUnclaimedRewards,\r\n    )\r\n\r\n    return roundsWithUnclaimedWinningTickets\r\n  }\r\n  // All rounds claimed, return empty array\r\n  return []\r\n}\r\n\r\nexport default fetchUnclaimedUserRewards\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Flex, FlexProps } from '@pancakeswap/uikit'\r\nimport { random } from 'lodash'\r\nimport uniqueId from 'lodash/uniqueId'\r\nimport { parseRetrievedNumber } from '../helpers'\r\nimport { BallWithNumber } from '../svgs'\r\nimport { BallColor } from '../svgs/Balls'\r\n\r\ninterface WinningNumbersProps extends FlexProps {\r\n  number: string\r\n  size?: string\r\n  fontSize?: string\r\n  rotateText?: boolean\r\n}\r\n\r\nconst WinningNumbers: React.FC<WinningNumbersProps> = ({\r\n  number,\r\n  size = '32px',\r\n  fontSize = '16px',\r\n  rotateText,\r\n  ...containerProps\r\n}) => {\r\n  const [rotationValues, setRotationValues] = useState([])\r\n  const reversedNumber = parseRetrievedNumber(number)\r\n  // @ts-ignore\r\n  const numAsArray = reversedNumber.split('').slice(0, window.SO_LotteryConfig.numbersCount)\r\n  const colors: BallColor[] = ['pink', 'lilac', 'teal', 'aqua', 'green', 'yellow']\r\n\r\n  useEffect(() => {\r\n    if (rotateText && numAsArray && rotationValues.length === 0) {\r\n      setRotationValues(numAsArray.map(() => random(-30, 30)))\r\n    }\r\n  }, [rotateText, numAsArray, rotationValues])\r\n\r\n  return (\r\n    <Flex justifyContent=\"left\" maxHeight=\"71px\" {...containerProps}>\r\n      {numAsArray.map((num, index) => {\r\n        return (\r\n          <BallWithNumber\r\n            key={uniqueId()}\r\n            rotationTransform={rotateText && rotationValues[index]}\r\n            size={size}\r\n            fontSize={fontSize}\r\n            color={colors[index]}\r\n            number={num}\r\n          />\r\n        )\r\n      })}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default WinningNumbers\r\n","import React from 'react'\r\nimport { LotteryTicket } from 'config/constants/types'\r\nimport { Flex, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport styled from 'styled-components'\r\nimport _uniqueId from 'lodash/uniqueId'\r\nimport { parseRetrievedNumber } from '../helpers'\r\n\r\n// @ts-ignore\r\nconst maxNumbers = window.SO_LotteryConfig.numbersCount\r\nconst StyledNumberWrapper = styled(Flex)`\r\n  position: relative;\r\n  padding: 4px 16px;\r\n  border: 1px solid ${({ theme }) => theme.colors.cardBorder};\r\n  border-radius: ${({ theme }) => theme.radii.default};\r\n  background: ${({ theme }) => theme.colors.background};\r\n  justify-content: space-between;\r\n`\r\n\r\nconst RewardHighlighter = styled.div<{ numberMatches: number }>`\r\n  z-index: 1;\r\n  width: ${({ numberMatches }) => `${numberMatches < maxNumbers ? numberMatches * (100 / maxNumbers) : 100}%`};\r\n  height: 34px;\r\n  border-radius: ${({ theme }) => theme.radii.default};\r\n  top: 0;\r\n  left: 0;\r\n  position: absolute;\r\n  border: 2px ${({ theme }) => theme.colors.primary} solid;\r\n`\r\n\r\ninterface TicketNumberProps extends LotteryTicket {\r\n  localId?: number\r\n  rewardBracket?: number\r\n}\r\n\r\nconst TicketNumber: React.FC<TicketNumberProps> = ({ localId, id, number, rewardBracket }) => {\r\n  const { t } = useTranslation()\r\n  const reversedNumber = parseRetrievedNumber(number)\r\n  // @ts-ignore\r\n  const numberAsArray = reversedNumber.split('').slice(0, window.SO_LotteryConfig.numbersCount)\r\n  const numberMatches = rewardBracket + 1\r\n\r\n  return (\r\n    <Flex flexDirection=\"column\" mb=\"12px\">\r\n      <Flex justifyContent=\"space-between\">\r\n        <Text fontSize=\"12px\" color=\"textSubtle\">\r\n          #{parseInt(id, 10) + 1}\r\n        </Text>\r\n        {rewardBracket >= 0 && (\r\n          <Text fontSize=\"12px\">\r\n            {t('Matched first')} {numberMatches}\r\n          </Text>\r\n        )}\r\n      </Flex>\r\n      <StyledNumberWrapper>\r\n        {rewardBracket >= 0 && <RewardHighlighter numberMatches={numberMatches} />}\r\n        {numberAsArray.map((digit) => (\r\n          <Text key={`${localId || id}-${digit}-${_uniqueId()}`} fontSize=\"16px\">\r\n            {digit}\r\n          </Text>\r\n        ))}\r\n      </StyledNumberWrapper>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default TicketNumber\r\n","import React, { useState } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Flex, Button, Text, AutoRenewIcon, PresentWonIcon } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { LotteryTicket, LotteryTicketClaimData } from 'config/constants/types'\r\nimport { getBalanceAmount } from 'utils/formatBalance'\r\nimport { callWithEstimateGas } from 'utils/calls'\r\nimport { usePriceCakeBusd } from 'state/farms/hooks'\r\nimport { useLottery } from 'state/lottery/hooks'\r\nimport { fetchUserLotteries } from 'state/lottery'\r\nimport { useGasPrice } from 'state/user/hooks'\r\nimport { useAppDispatch } from 'state'\r\nimport Balance from 'components/Balance'\r\nimport * as token from 'config/constants/tokens.lottery'\r\nimport { ToastDescriptionWithTx } from 'components/Toast'\r\nimport useToast from 'hooks/useToast'\r\nimport { useLotteryV2Contract } from 'hooks/useContract'\r\n\r\ninterface ClaimInnerProps {\r\n  roundsToClaim: LotteryTicketClaimData[]\r\n  onSuccess?: () => void\r\n}\r\n\r\nconst ClaimInnerContainer: React.FC<ClaimInnerProps> = ({ onSuccess, roundsToClaim }) => {\r\n  const { account, library } = useWeb3React()\r\n  const { t } = useTranslation()\r\n  const dispatch = useAppDispatch()\r\n  const { maxNumberTicketsPerBuyOrClaim, currentLotteryId } = useLottery()\r\n  const gasPrice = useGasPrice()\r\n  const { toastSuccess, toastError } = useToast()\r\n  const [activeClaimIndex, setActiveClaimIndex] = useState(0)\r\n  const [pendingTx, setPendingTx] = useState(false)\r\n  const [pendingBatchClaims, setPendingBatchClaims] = useState(\r\n    Math.ceil(\r\n      roundsToClaim[activeClaimIndex].ticketsWithUnclaimedRewards.length / maxNumberTicketsPerBuyOrClaim.toNumber(),\r\n    ),\r\n  )\r\n  const lotteryContract = useLotteryV2Contract()\r\n  const activeClaimData = roundsToClaim[activeClaimIndex]\r\n\r\n  const cakePriceBusd = usePriceCakeBusd()\r\n  const cakeReward = activeClaimData.cakeTotal\r\n  const dollarReward = cakeReward.times(cakePriceBusd)\r\n  const rewardAsBalance = getBalanceAmount(cakeReward).toNumber()\r\n  const dollarRewardAsBalance = getBalanceAmount(dollarReward).toNumber()\r\n\r\n  const parseUnclaimedTicketDataForClaimCall = (ticketsWithUnclaimedRewards: LotteryTicket[], lotteryId: string) => {\r\n    const ticketIds = ticketsWithUnclaimedRewards.map((ticket) => {\r\n      return ticket.id\r\n    })\r\n    const brackets = ticketsWithUnclaimedRewards.map((ticket) => {\r\n      return ticket.rewardBracket\r\n    })\r\n    return { lotteryId, ticketIds, brackets }\r\n  }\r\n\r\n  const claimTicketsCallData = parseUnclaimedTicketDataForClaimCall(\r\n    activeClaimData.ticketsWithUnclaimedRewards,\r\n    activeClaimData.roundId,\r\n  )\r\n\r\n  const shouldBatchRequest = maxNumberTicketsPerBuyOrClaim.lt(claimTicketsCallData.ticketIds.length)\r\n\r\n  const handleProgressToNextClaim = () => {\r\n    if (roundsToClaim.length > activeClaimIndex + 1) {\r\n      // If there are still rounds to claim, move onto the next claim\r\n      setActiveClaimIndex(activeClaimIndex + 1)\r\n      dispatch(fetchUserLotteries({ account, currentLotteryId }))\r\n    } else {\r\n      onSuccess()\r\n    }\r\n  }\r\n\r\n  const getTicketBatches = (ticketIds: string[], brackets: number[]): { ticketIds: string[]; brackets: number[] }[] => {\r\n    const requests = []\r\n    const maxAsNumber = maxNumberTicketsPerBuyOrClaim.toNumber()\r\n\r\n    for (let i = 0; i < ticketIds.length; i += maxAsNumber) {\r\n      const ticketIdsSlice = ticketIds.slice(i, maxAsNumber + i)\r\n      const bracketsSlice = brackets.slice(i, maxAsNumber + i)\r\n      requests.push({ ticketIds: ticketIdsSlice, brackets: bracketsSlice })\r\n    }\r\n\r\n    return requests\r\n  }\r\n\r\n  const handleClaim = async () => {\r\n    const { lotteryId, ticketIds, brackets } = claimTicketsCallData\r\n    setPendingTx(true)\r\n    try {\r\n      const tx = await callWithEstimateGas(lotteryContract, 'claimTickets', [lotteryId, ticketIds, brackets], {\r\n        gasPrice: await library?.getGasPrice?.() || gasPrice,\r\n      })\r\n      const receipt = await tx.wait()\r\n      if (receipt.status) {\r\n        toastSuccess(\r\n          t('Prizes Collected!'),\r\n          <ToastDescriptionWithTx txHash={receipt.transactionHash}>\r\n            {t('Your %symbol% prizes for round %lotteryId% have been sent to your wallet', { lotteryId , symbol: token.info().symbol })}\r\n          </ToastDescriptionWithTx>,\r\n        )\r\n        setPendingTx(false)\r\n        handleProgressToNextClaim()\r\n      }\r\n    } catch (error) {\r\n      console.error(error)\r\n      toastError(t('Error'), t('%error% - Please try again.', { error: error.message }))\r\n      setPendingTx(false)\r\n    }\r\n  }\r\n\r\n  const handleBatchClaim = async () => {\r\n    const { lotteryId, ticketIds, brackets } = claimTicketsCallData\r\n    const ticketBatches = getTicketBatches(ticketIds, brackets)\r\n    const transactionsToFire = ticketBatches.length\r\n    const receipts = []\r\n    setPendingTx(true)\r\n    // eslint-disable-next-line no-restricted-syntax\r\n    for (const ticketBatch of ticketBatches) {\r\n      try {\r\n        /* eslint-disable no-await-in-loop */\r\n        const tx = await callWithEstimateGas(\r\n          lotteryContract,\r\n          'claimTickets',\r\n          [lotteryId, ticketBatch.ticketIds, ticketBatch.brackets],\r\n          { gasPrice },\r\n        )\r\n        const receipt = await tx.wait()\r\n        /* eslint-enable no-await-in-loop */\r\n        if (receipt.status) {\r\n          // One transaction within batch has succeeded\r\n          receipts.push(receipt)\r\n          setPendingBatchClaims(transactionsToFire - receipts.length)\r\n\r\n          // More transactions are to be done within the batch. Issue toast to give user feedback.\r\n          if (receipts.length !== transactionsToFire) {\r\n            toastSuccess(\r\n              t('Prizes Collected!'),\r\n              <ToastDescriptionWithTx txHash={receipt.transactionHash}>\r\n                {t(\r\n                  'Claim %claimNum% of %claimTotal% for round %lotteryId% was successful. Please confirm the next transaction',\r\n                  {\r\n                    claimNum: receipts.length,\r\n                    claimTotal: transactionsToFire,\r\n                    lotteryId,\r\n                  },\r\n                )}\r\n              </ToastDescriptionWithTx>,\r\n            )\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(error)\r\n        setPendingTx(false)\r\n        toastError(t('Error'), t('%error% - Please try again.', { error: error.message }))\r\n        break\r\n      }\r\n    }\r\n\r\n    // Batch is finished\r\n    if (receipts.length === transactionsToFire) {\r\n      setPendingTx(false)\r\n      toastSuccess(\r\n        t('Prizes Collected!'),\r\n        t('Your %symbol% prizes for round %lotteryId% have been sent to your wallet', { lotteryId, symbol: token.info().symbol }),\r\n      )\r\n      handleProgressToNextClaim()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Flex flexDirection=\"column\">\r\n        <Text mb=\"4px\" textAlign={['center', null, 'left']}>\r\n          {t('You won')}\r\n        </Text>\r\n        <Flex\r\n          alignItems={['flex-start', null, 'center']}\r\n          justifyContent={['flex-start', null, 'space-between']}\r\n          flexDirection={['column', null, 'row']}\r\n        >\r\n          <Balance\r\n            textAlign={['center', null, 'left']}\r\n            lineHeight=\"1.1\"\r\n            value={rewardAsBalance}\r\n            fontSize=\"44px\"\r\n            bold\r\n            color=\"secondary\"\r\n            unit={` ${token.info().symbol}!`}\r\n          />\r\n          <PresentWonIcon ml={['0', null, '12px']} width=\"64px\" />\r\n        </Flex>\r\n        <Balance\r\n          mt={['12px', null, '0']}\r\n          textAlign={['center', null, 'left']}\r\n          value={dollarRewardAsBalance}\r\n          fontSize=\"12px\"\r\n          color=\"textSubtle\"\r\n          unit=\" USD\"\r\n          prefix=\"~\"\r\n        />\r\n      </Flex>\r\n\r\n      <Flex alignItems=\"center\" justifyContent=\"center\">\r\n        <Text mt=\"8px\" fontSize=\"12px\" color=\"textSubtle\">\r\n          {t('Round')} #{activeClaimData.roundId}\r\n        </Text>\r\n      </Flex>\r\n      <Flex alignItems=\"center\" justifyContent=\"center\">\r\n        <Button\r\n          isLoading={pendingTx}\r\n          endIcon={pendingTx ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n          mt=\"20px\"\r\n          width=\"100%\"\r\n          onClick={() => (shouldBatchRequest ? handleBatchClaim() : handleClaim())}\r\n        >\r\n          {pendingTx ? t('Claiming') : t('Claim')} {pendingBatchClaims > 1 ? `(${pendingBatchClaims})` : ''}\r\n        </Button>\r\n      </Flex>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ClaimInnerContainer\r\n","import React, { useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Heading, ModalContainer, ModalHeader, ModalTitle, ModalBody, ModalCloseButton } from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { delay } from 'lodash'\r\nimport confetti from 'canvas-confetti'\r\nimport { LotteryTicketClaimData } from 'config/constants/types'\r\nimport { useAppDispatch } from 'state'\r\nimport { useLottery } from 'state/lottery/hooks'\r\nimport { fetchUserLotteries } from 'state/lottery'\r\nimport ClaimPrizesInner from './ClaimPrizesInner'\r\n\r\nconst StyledModal = styled(ModalContainer)`\r\n  position: relative;\r\n  overflow: visible;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    min-width: 380px;\r\n  }\r\n`\r\n\r\nconst StyledModalHeader = styled(ModalHeader)`\r\n  background: ${({ theme }) => theme.colors.gradients.cardHeader};\r\n  border-top-right-radius: 32px;\r\n  border-top-left-radius: 32px;\r\n`\r\n\r\nconst BunnyDecoration = styled.div`\r\n  position: absolute;\r\n  top: -116px; // line up bunny at the top of the modal\r\n  left: 0px;\r\n  text-align: center;\r\n  width: 100%;\r\n`\r\n\r\nconst showConfetti = () => {\r\n  confetti({\r\n    particleCount: 200,\r\n    startVelocity: 30,\r\n    gravity: 0.5,\r\n    spread: 350,\r\n    origin: {\r\n      x: 0.5,\r\n      y: 0.3,\r\n    },\r\n  })\r\n}\r\n\r\ninterface ClaimPrizesModalModalProps {\r\n  roundsToClaim: LotteryTicketClaimData[]\r\n  onDismiss?: () => void\r\n}\r\n\r\nconst ClaimPrizesModal: React.FC<ClaimPrizesModalModalProps> = ({ onDismiss, roundsToClaim }) => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const { currentLotteryId } = useLottery()\r\n  const dispatch = useAppDispatch()\r\n\r\n  useEffect(() => {\r\n    delay(showConfetti, 100)\r\n  }, [])\r\n\r\n  return (\r\n    <StyledModal minWidth=\"280px\">\r\n      <BunnyDecoration>\r\n        <img src=\"./images/decorations/prize-bunny.png\" alt=\"bunny decoration\" height=\"124px\" width=\"168px\" />\r\n      </BunnyDecoration>\r\n      <StyledModalHeader>\r\n        <ModalTitle>\r\n          <Heading>{t('Collect Winnings')}</Heading>\r\n        </ModalTitle>\r\n        <ModalCloseButton onDismiss={onDismiss} />\r\n      </StyledModalHeader>\r\n      <ModalBody p=\"24px\">\r\n        <ClaimPrizesInner\r\n          onSuccess={() => {\r\n            dispatch(fetchUserLotteries({ account, currentLotteryId }))\r\n            onDismiss()\r\n          }}\r\n          roundsToClaim={roundsToClaim}\r\n        />\r\n      </ModalBody>\r\n    </StyledModal>\r\n  )\r\n}\r\n\r\nexport default ClaimPrizesModal\r\n","import React, { useEffect, useState } from 'react'\r\nimport {\r\n  Box,\r\n  Text,\r\n  Flex,\r\n  Button,\r\n  Skeleton,\r\n  Ticket,\r\n  PresentWonIcon,\r\n  TooltipText,\r\n  InfoIcon,\r\n  useTooltip,\r\n  useModal,\r\n} from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { LotteryTicket, LotteryTicketClaimData } from 'config/constants/types'\r\nimport { fetchLottery } from 'state/lottery/helpers'\r\nimport { getWinningTickets } from 'state/lottery/fetchUnclaimedUserRewards'\r\nimport { fetchUserTicketsForOneRound } from 'state/lottery/getUserTicketsData'\r\nimport { LotteryRound } from 'state/types'\r\nimport { useGetUserLotteryGraphRoundById } from 'state/lottery/hooks'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useTheme from 'hooks/useTheme'\r\nimport WinningNumbers from '../WinningNumbers'\r\nimport { processLotteryResponse } from '../../helpers'\r\nimport TicketNumber from '../TicketNumber'\r\nimport ClaimPrizesModal from '../ClaimPrizesModal'\r\n\r\nconst TopBox = styled(Flex)`\r\n  flex-direction: column;\r\n  margin: -24px;\r\n  padding: 24px;\r\n  background-color: ${({ theme }) => theme.colors.dropdown};\r\n  border-bottom: 1px solid ${({ theme }) => theme.colors.cardBorder};\r\n`\r\n\r\nconst ScrollBox = styled(Box)`\r\n  margin-right: -20px;\r\n  padding-right: 24px;\r\n  max-height: 300px;\r\n  overflow-y: scroll;\r\n  margin-top: 24px;\r\n`\r\n\r\nconst TicketSkeleton = () => {\r\n  return (\r\n    <>\r\n      <Skeleton width=\"32px\" height=\"12px\" mt=\"2px\" mb=\"4px\" />\r\n      <Skeleton width=\"100%\" height=\"34px\" mb=\"12px\" />\r\n    </>\r\n  )\r\n}\r\n\r\nconst PreviousRoundTicketsInner: React.FC<{ roundId: string }> = ({ roundId }) => {\r\n  const [lotteryInfo, setLotteryInfo] = useState<LotteryRound>(null)\r\n  const [allUserTickets, setAllUserTickets] = useState<LotteryTicket[]>(null)\r\n  const [userWinningTickets, setUserWinningTickets] = useState<{\r\n    allWinningTickets: LotteryTicket[]\r\n    ticketsWithUnclaimedRewards: LotteryTicket[]\r\n    isFetched: boolean\r\n    claimData: LotteryTicketClaimData\r\n  }>({ allWinningTickets: null, ticketsWithUnclaimedRewards: null, isFetched: false, claimData: null })\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n  const { account } = useWeb3React()\r\n  const { totalTickets } = useGetUserLotteryGraphRoundById(roundId)\r\n  const [onPresentClaimModal] = useModal(<ClaimPrizesModal roundsToClaim={[userWinningTickets.claimData]} />, false)\r\n\r\n  const TooltipComponent = () => (\r\n    <>\r\n      <Text mb=\"16px\">\r\n        {t('Tickets must match the winning number in the exact same order, starting from the first digit.')}\r\n      </Text>\r\n      <Text mb=\"16px\">{t('If the winning number is “123456”:')}</Text>\r\n      <Text mb=\"4px\">{t('“120000” matches the first 2 digits.')}</Text>\r\n      <Text>\r\n        {t('“000006” matches the last digit, but since the first five digits are wrong, it doesn’t win any prizes.')}\r\n      </Text>\r\n    </>\r\n  )\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(<TooltipComponent />, {\r\n    placement: 'bottom-end',\r\n    tooltipOffset: [20, 10],\r\n  })\r\n\r\n  useEffect(() => {\r\n    const addWinningTicketInfoToAllTickets = (\r\n      _allTickets: LotteryTicket[],\r\n      _allWinningTickets: LotteryTicket[],\r\n    ): LotteryTicket[] => {\r\n      const allTicketsWithWinningTickets = _allTickets.map((ticket) => {\r\n        const winningTicketEquivalent = _allWinningTickets.find((winningTicket) => winningTicket.id === ticket.id)\r\n        if (winningTicketEquivalent) {\r\n          return winningTicketEquivalent\r\n        }\r\n        return ticket\r\n      })\r\n      return allTicketsWithWinningTickets\r\n    }\r\n\r\n    const sortTicketsByWinningBracket = (tickets) => {\r\n      return tickets.sort((ticketA, ticketB) => {\r\n        const rewardBracket1 = ticketA.rewardBracket === undefined ? 0 : ticketA.rewardBracket + 1\r\n        const rewardBracket2 = ticketB.rewardBracket === undefined ? 0 : ticketB.rewardBracket + 1\r\n        return rewardBracket2 - rewardBracket1\r\n      })\r\n    }\r\n\r\n    const fetchData = async () => {\r\n      const userTickets = await fetchUserTicketsForOneRound(account, roundId)\r\n      const lotteryData = await fetchLottery(roundId)\r\n      const processedLotteryData = processLotteryResponse(lotteryData)\r\n      const winningTickets = await getWinningTickets({\r\n        roundId,\r\n        userTickets,\r\n        finalNumber: processedLotteryData.finalNumber.toString(),\r\n      })\r\n\r\n      setUserWinningTickets({\r\n        isFetched: true,\r\n        allWinningTickets: winningTickets?.allWinningTickets,\r\n        ticketsWithUnclaimedRewards: winningTickets?.ticketsWithUnclaimedRewards,\r\n        claimData: winningTickets,\r\n      })\r\n      setLotteryInfo(processedLotteryData)\r\n\r\n      // If the user has some winning tickets - modify the userTickets response to include that data\r\n      if (winningTickets?.allWinningTickets) {\r\n        const allTicketsWithWinningTicketInfo = addWinningTicketInfoToAllTickets(\r\n          userTickets,\r\n          winningTickets.allWinningTickets,\r\n        )\r\n        const ticketsSortedByWinners = sortTicketsByWinningBracket(allTicketsWithWinningTicketInfo)\r\n        setAllUserTickets(ticketsSortedByWinners)\r\n      } else {\r\n        setAllUserTickets(userTickets)\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  }, [roundId, account, totalTickets])\r\n\r\n  const getFooter = () => {\r\n    if (userWinningTickets?.ticketsWithUnclaimedRewards?.length > 0) {\r\n      return (\r\n        <Button onClick={onPresentClaimModal} mt=\"24px\" width=\"100%\">\r\n          {t('Collect Prizes')}\r\n        </Button>\r\n      )\r\n    }\r\n    if (!userWinningTickets.allWinningTickets) {\r\n      return (\r\n        <div ref={targetRef}>\r\n          <Flex alignItems=\"center\" justifyContent=\"center\" mt=\"20px\">\r\n            <InfoIcon height=\"20px\" width=\"20px\" color=\"textSubtle\" mr=\"8px\" />\r\n            <TooltipText color=\"textSubtle\">{t(\"Why didn't I win?\")}</TooltipText>\r\n          </Flex>\r\n        </div>\r\n      )\r\n    }\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {tooltipVisible && tooltip}\r\n      <TopBox>\r\n        <Text bold textTransform=\"uppercase\" color=\"secondary\" fontSize=\"12px\" mb=\"4px\">\r\n          {t('Winning number')}\r\n        </Text>\r\n        {lotteryInfo?.finalNumber ? (\r\n          <WinningNumbers number={lotteryInfo.finalNumber.toString()} />\r\n        ) : (\r\n          <Skeleton width=\"230px\" height=\"34px\" />\r\n        )}\r\n      </TopBox>\r\n      <ScrollBox>\r\n        <Text bold textTransform=\"uppercase\" color=\"secondary\" fontSize=\"12px\" my=\"16px\">\r\n          {t('Your tickets')}\r\n        </Text>\r\n        <Flex mb=\"8px\" justifyContent=\"space-between\">\r\n          <Flex>\r\n            <Ticket width=\"24px\" height=\"24px\" mr=\"8px\" />\r\n            <Text bold color=\"text\">\r\n              {t('Total tickets')}:\r\n            </Text>\r\n          </Flex>\r\n          <Text bold color=\"text\">\r\n            {allUserTickets ? allUserTickets.length : <Skeleton width=\"56px\" height=\"24px\" />}\r\n          </Text>\r\n        </Flex>\r\n        <Flex mb=\"24px\" justifyContent=\"space-between\">\r\n          <Flex>\r\n            <PresentWonIcon width=\"24px\" height=\"24px\" mr=\"8px\" />\r\n            <Text bold color=\"text\">\r\n              {t('Winning tickets')}:\r\n            </Text>\r\n          </Flex>\r\n          <Text bold color=\"text\">\r\n            {userWinningTickets.isFetched ? (\r\n              userWinningTickets?.allWinningTickets?.length || '0'\r\n            ) : (\r\n              <Skeleton width=\"40px\" height=\"24px\" />\r\n            )}\r\n          </Text>\r\n        </Flex>\r\n        {allUserTickets ? (\r\n          allUserTickets.map((ticket) => {\r\n            return (\r\n              <TicketNumber\r\n                key={ticket.id}\r\n                id={ticket.id}\r\n                number={ticket.number}\r\n                rewardBracket={ticket.rewardBracket}\r\n                status={ticket.status}\r\n              />\r\n            )\r\n          })\r\n        ) : (\r\n          <>\r\n            <TicketSkeleton />\r\n            <TicketSkeleton />\r\n            <TicketSkeleton />\r\n            <TicketSkeleton />\r\n          </>\r\n        )}\r\n      </ScrollBox>\r\n      <Flex borderTop={`1px solid ${theme.colors.cardBorder}`} alignItems=\"center\" justifyContent=\"center\">\r\n        {userWinningTickets.isFetched && getFooter()}\r\n      </Flex>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default PreviousRoundTicketsInner\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Flex, Box, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { LotteryStatus } from 'config/constants/types'\r\nimport { useLottery } from 'state/lottery/hooks'\r\nimport useTheme from 'hooks/useTheme'\r\nimport TicketNumber from '../TicketNumber'\r\nimport BuyTicketsButton from '../BuyTicketsButton'\r\n\r\nconst ScrollBox = styled(Box)`\r\n  max-height: 300px;\r\n  overflow-y: scroll;\r\n  margin-left: -24px;\r\n  margin-right: -24px;\r\n  padding-left: 24px;\r\n  padding-right: 20px;\r\n`\r\n\r\nconst CurrentRoundTicketsInner = () => {\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n  const {\r\n    isTransitioning,\r\n    currentRound: { status, userTickets },\r\n  } = useLottery()\r\n  const ticketBuyIsDisabled = status !== LotteryStatus.OPEN || isTransitioning\r\n\r\n  return (\r\n    <>\r\n      <Flex flexDirection=\"column\">\r\n        <Text bold textTransform=\"uppercase\" color=\"secondary\" fontSize=\"12px\" mb=\"16px\">\r\n          {t('Your tickets')}\r\n        </Text>\r\n        <ScrollBox>\r\n          {userTickets.tickets.map((ticket, index) => {\r\n            return (\r\n              <TicketNumber\r\n                key={ticket.id}\r\n                localId={index + 1}\r\n                id={ticket.id}\r\n                number={ticket.number}\r\n                status={ticket.status}\r\n              />\r\n            )\r\n          })}\r\n        </ScrollBox>\r\n      </Flex>\r\n      <Flex borderTop={`1px solid ${theme.colors.cardBorder}`} alignItems=\"center\" justifyContent=\"center\">\r\n        <BuyTicketsButton disabled={ticketBuyIsDisabled} mt=\"24px\" width=\"100%\" />\r\n      </Flex>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default CurrentRoundTicketsInner\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Modal } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { LotteryStatus } from 'config/constants/types'\r\nimport { useLottery } from 'state/lottery/hooks'\r\nimport useTheme from 'hooks/useTheme'\r\nimport PreviousRoundTicketsInner from './PreviousRoundTicketsInner'\r\nimport CurrentRoundTicketsInner from './CurrentRoundTicketsInner'\r\n\r\nconst StyledModal = styled(Modal)`\r\n  min-width: 280px;\r\n  max-width: 320px;\r\n`\r\n\r\ninterface ViewTicketsModalProps {\r\n  roundId: string\r\n  roundStatus?: LotteryStatus\r\n  onDismiss?: () => void\r\n}\r\n\r\nconst ViewTicketsModal: React.FC<ViewTicketsModalProps> = ({ onDismiss, roundId, roundStatus }) => {\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n  const { currentLotteryId } = useLottery()\r\n  const isPreviousRound = roundStatus?.toLowerCase() === LotteryStatus.CLAIMABLE || roundId !== currentLotteryId\r\n\r\n  return (\r\n    <StyledModal\r\n      title={`${t('Round')} ${roundId}`}\r\n      onDismiss={onDismiss}\r\n      headerBackground={theme.colors.gradients.cardHeader}\r\n    >\r\n      {isPreviousRound ? <PreviousRoundTicketsInner roundId={roundId} /> : <CurrentRoundTicketsInner />}\r\n    </StyledModal>\r\n  )\r\n}\r\n\r\nexport default ViewTicketsModal\r\n","import React from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Flex, Skeleton, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { usePriceCakeBusd } from 'state/farms/hooks'\r\nimport * as token from 'config/constants/tokens.lottery'\r\nimport Balance from 'components/Balance'\r\nimport { getBalanceNumber, getFullDisplayBalance } from 'utils/formatBalance'\r\n\r\ninterface RewardBracketDetailProps {\r\n  cakeAmount: BigNumber\r\n  rewardBracket?: number\r\n  numberWinners?: string\r\n  isBurn?: boolean\r\n  isHistoricRound?: boolean\r\n  isLoading?: boolean\r\n}\r\n\r\nconst RewardBracketDetail: React.FC<RewardBracketDetailProps> = ({\r\n  rewardBracket,\r\n  cakeAmount,\r\n  numberWinners,\r\n  isHistoricRound,\r\n  isBurn,\r\n  isLoading,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const cakePriceBusd = usePriceCakeBusd()\r\n\r\n  const getRewardText = () => {\r\n    const numberMatch = rewardBracket + 1\r\n    if (isBurn) {\r\n      return t('Burn')\r\n    }\r\n    if (rewardBracket === 5) {\r\n      return t('Match all %numberMatch%', { numberMatch })\r\n    }\r\n    return t('Match first %numberMatch%', { numberMatch })\r\n  }\r\n\r\n  return (\r\n    <Flex flexDirection=\"column\">\r\n      {isLoading ? (\r\n        <Skeleton mb=\"4px\" mt=\"8px\" height={16} width={80} />\r\n      ) : (\r\n        <Text bold color={isBurn ? 'failure' : 'secondary'}>\r\n          {getRewardText()}\r\n        </Text>\r\n      )}\r\n      <>\r\n        {isLoading || cakeAmount.isNaN() ? (\r\n          <Skeleton my=\"4px\" mr=\"10px\" height={20} width={110} />\r\n        ) : (\r\n          <Balance fontSize=\"20px\" bold unit={` ${token.info().symbol}`} value={getBalanceNumber(cakeAmount, token.info().decimals)} decimals={token.info().viewDecimals} />\r\n        )}\r\n        {isLoading || cakeAmount.isNaN() ? (\r\n          <>\r\n            <Skeleton mt=\"4px\" mb=\"16px\" height={12} width={70} />\r\n          </>\r\n        ) : (\r\n          <Balance\r\n            fontSize=\"12px\"\r\n            color=\"textSubtle\"\r\n            prefix=\"~$\"\r\n            value={getBalanceNumber(cakeAmount.times(cakePriceBusd), token.info().decimals)}\r\n            decimals={token.info().viewDecimals}\r\n          />\r\n        )}\r\n        {isHistoricRound && cakeAmount && (\r\n          <>\r\n            {numberWinners !== '0' && (\r\n              <Text fontSize=\"12px\" color=\"textSubtle\">\r\n                {getFullDisplayBalance(cakeAmount.div(parseInt(numberWinners, 10)), token.info().decimals, 2)} {token.info().symbol} {t('each')}\r\n              </Text>\r\n            )}\r\n            <Text fontSize=\"12px\" color=\"textSubtle\">\r\n              {numberWinners} {t('Winners')}\r\n            </Text>\r\n          </>\r\n        )}\r\n      </>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default RewardBracketDetail\r\n","import React, { useState, useEffect } from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Flex, Text } from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { LotteryRound } from 'state/types'\r\nimport RewardBracketDetail from './RewardBracketDetail'\r\n\r\nconst Wrapper = styled(Flex)`\r\n  width: 100%;\r\n  flex-direction: column;\r\n`\r\n\r\nconst RewardsInner = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(2, auto);\r\n  row-gap: 16px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    grid-template-columns: repeat(4, 1fr);\r\n  }\r\n`\r\n\r\ninterface RewardMatchesProps {\r\n  lotteryNodeData: LotteryRound\r\n  isHistoricRound?: boolean\r\n}\r\n\r\ninterface RewardsState {\r\n  isLoading: boolean\r\n  cakeToBurn: BigNumber\r\n  rewardsLessTreasuryFee: BigNumber\r\n  rewardsBreakdown: string[]\r\n  countWinnersPerBracket: string[]\r\n}\r\n\r\nconst RewardBrackets: React.FC<RewardMatchesProps> = ({ lotteryNodeData, isHistoricRound }) => {\r\n  const { t } = useTranslation()\r\n  const [state, setState] = useState<RewardsState>({\r\n    isLoading: true,\r\n    cakeToBurn: BIG_ZERO,\r\n    rewardsLessTreasuryFee: BIG_ZERO,\r\n    rewardsBreakdown: null,\r\n    countWinnersPerBracket: null,\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (lotteryNodeData) {\r\n      const { treasuryFee, amountCollectedInCake, rewardsBreakdown, countWinnersPerBracket } = lotteryNodeData\r\n\r\n      const feeAsPercentage = new BigNumber(treasuryFee).div(100)\r\n      const cakeToBurn = feeAsPercentage.div(100).times(new BigNumber(amountCollectedInCake))\r\n      const amountLessTreasuryFee = new BigNumber(amountCollectedInCake).minus(cakeToBurn)\r\n      setState({\r\n        isLoading: false,\r\n        cakeToBurn,\r\n        rewardsLessTreasuryFee: amountLessTreasuryFee,\r\n        rewardsBreakdown,\r\n        countWinnersPerBracket,\r\n      })\r\n    } else {\r\n      setState({\r\n        isLoading: true,\r\n        cakeToBurn: BIG_ZERO,\r\n        rewardsLessTreasuryFee: BIG_ZERO,\r\n        rewardsBreakdown: null,\r\n        countWinnersPerBracket: null,\r\n      })\r\n    }\r\n  }, [lotteryNodeData])\r\n\r\n  const getCakeRewards = (bracket: number) => {\r\n    const shareAsPercentage = new BigNumber(state.rewardsBreakdown[bracket]).div(100)\r\n    return state.rewardsLessTreasuryFee.div(100).times(shareAsPercentage)\r\n  }\r\n\r\n  const { isLoading, countWinnersPerBracket, cakeToBurn } = state\r\n\r\n  // @ts-ignore\r\n  const rewardBrackets = [0, 1, 2, 3, 4, 5].slice(0, window.SO_LotteryConfig.numbersCount)\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Text fontSize=\"14px\" mb=\"24px\">\r\n        {t('Match the winning number in the same order to share prizes.')}{' '}\r\n        {!isHistoricRound && t('Current prizes up for grabs:')}\r\n      </Text>\r\n      <RewardsInner>\r\n        {rewardBrackets.map((bracketIndex) => (\r\n          <RewardBracketDetail\r\n            key={bracketIndex}\r\n            rewardBracket={bracketIndex}\r\n            cakeAmount={!isLoading && getCakeRewards(bracketIndex)}\r\n            numberWinners={!isLoading && countWinnersPerBracket[bracketIndex]}\r\n            isHistoricRound={isHistoricRound}\r\n            isLoading={isLoading}\r\n          />\r\n        ))}\r\n        <RewardBracketDetail rewardBracket={0} cakeAmount={cakeToBurn} isBurn isLoading={isLoading} />\r\n      </RewardsInner>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default RewardBrackets\r\n","import React, { useState, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  CardBody,\r\n  Flex,\r\n  Heading,\r\n  Text,\r\n  Skeleton,\r\n  Button,\r\n  useModal,\r\n  Box,\r\n  CardFooter,\r\n  ExpandableLabel,\r\n} from '@pancakeswap/uikit'\r\nimport * as token from 'config/constants/tokens.lottery'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { LotteryStatus } from 'config/constants/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { usePriceCakeBusd } from 'state/farms/hooks'\r\nimport { useLottery } from 'state/lottery/hooks'\r\nimport { useLotteryV2Contract } from 'hooks/useContract'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport Balance from 'components/Balance'\r\nimport ViewTicketsModal from './ViewTicketsModal'\r\nimport BuyTicketsButton from './BuyTicketsButton'\r\nimport BuyTokenButton from './BuyTokenButton'\r\nimport { dateTimeOptions } from '../helpers'\r\nimport RewardBrackets from './RewardBrackets'\r\nimport axios from 'axios'\r\n\r\n\r\nconst Grid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: auto;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    grid-column-gap: 32px;\r\n    grid-template-columns: auto 1fr;\r\n  }\r\n`\r\n\r\nconst HeadingText = styled(Text)`\r\n  margin-top: 14px;\r\n`\r\n\r\nconst StyledCard = styled(Card)`\r\n  width: 100%;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    width: 520px;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    width: 756px;\r\n  }\r\n`\r\n\r\nconst NextDrawWrapper = styled.div`\r\n  background: ${({ theme }) => theme.colors.background};\r\n  padding: 24px;\r\n`\r\n\r\nconst NextDrawCard = () => {\r\n  const {\r\n    t,\r\n    currentLanguage: { locale },\r\n  } = useTranslation()\r\n  \r\n   \r\n  const { account } = useWeb3React()\r\n  const lotteryContract = useLotteryV2Contract()\r\n  const { currentLotteryId, isTransitioning, currentRound } = useLottery()\r\n  const { endTime, amountCollectedInCake, userTickets, status } = currentRound\r\n\r\n  const [onPresentViewTicketsModal] = useModal(<ViewTicketsModal roundId={currentLotteryId} roundStatus={status} />)\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n  const ticketBuyIsDisabled = status !== LotteryStatus.OPEN || isTransitioning\r\n\r\n  const cakePriceBusd = token.info().price || 0\r\n  const prizeInBusd = amountCollectedInCake.times(cakePriceBusd)\r\n  const endTimeMs = parseInt(endTime, 10) * 1000\r\n  const endDate = new Date(endTimeMs)\r\n  const isLotteryOpen = status === LotteryStatus.OPEN\r\n  const userTicketCount = userTickets?.tickets?.length || 0\r\n\r\n  /* Check KYC */\r\n  const [ isCheckingKYC, setIsCheckingKYC ] = useState(true)\r\n  const [ isBridgeKYC, setIsBridgeKYC ] = useState(false)\r\n  const [ isHasKYC, setIsHasKYC ] = useState(false)\r\n  const [ isWalletOkKYC, setIsWalletOkKYC ] = useState(false)\r\n  const [ checkKycCounter, setCheckKycCounter ] = useState(0)\r\n  // @ts-ignore\r\n  useEffect(async () => {\r\n    setIsCheckingKYC(true)\r\n    if (account && lotteryContract) {\r\n      try {\r\n        const existKyc = await lotteryContract.existKyc()\r\n        if (existKyc) {\r\n          const isKycOk = await lotteryContract.checkWalletKYC(account)\r\n          // @ts-ignore\r\n          if (window && window.SO_LotteryConfig && window.SO_LotteryConfig.kycOracle && !isKycOk) {\r\n            // @ts-ignore\r\n            axios.get(window.SO_LotteryConfig.kycOracle + `check/` + account)\r\n              .then((response) => {\r\n                const {\r\n                  data: {\r\n                    dest,\r\n                    source\r\n                  }\r\n                } = response\r\n                if (source) {\r\n                  // handle success\r\n                  console.log(response)\r\n                  console.log('>>> need bridge')\r\n                  setIsBridgeKYC(true)\r\n                  // @ts-ignore\r\n                  axios.get(window.SO_LotteryConfig.kycOracle + 'attest/' + account)\r\n                    .then((resp) => {\r\n                      const {\r\n                        data,\r\n                        data: {\r\n                          error,\r\n                          answer\r\n                        }\r\n                      } = resp\r\n                      console.log('>>>> bridge answer', data)\r\n                      if (error == 'already attested'\r\n                        || answer == 'attested'\r\n                      ) {\r\n                        setIsWalletOkKYC(true)\r\n                      } else {\r\n                        setIsWalletOkKYC(false)\r\n                      }\r\n                      setIsHasKYC(true)\r\n                      setIsCheckingKYC(false)\r\n                      setIsBridgeKYC(false)\r\n                    })\r\n                    .catch((err) => {\r\n                      console.log(err)\r\n                      setIsHasKYC(true)\r\n                      setIsWalletOkKYC(false)\r\n                      setIsCheckingKYC(false)\r\n                      setIsBridgeKYC(false)\r\n                    })\r\n                } else {\r\n                  setIsHasKYC(true)\r\n                  setIsWalletOkKYC(false)\r\n                  setIsCheckingKYC(false)\r\n                }\r\n              })\r\n              .catch((error) => {\r\n                // handle error\r\n                console.log(error)\r\n                setIsHasKYC(true)\r\n                setIsWalletOkKYC(false)\r\n                setIsCheckingKYC(false)\r\n              })\r\n          } else {\r\n            setIsHasKYC(true)\r\n            setIsWalletOkKYC(isKycOk)\r\n            setIsCheckingKYC(false)\r\n          }\r\n        } else {\r\n          setIsHasKYC(false)\r\n          setIsWalletOkKYC(true)\r\n          setIsCheckingKYC(false)\r\n        }\r\n      } catch (err) {\r\n        if (checkKycCounter > 0) {\r\n          setIsHasKYC(false)\r\n          setIsWalletOkKYC(true)\r\n          setIsCheckingKYC(false)\r\n          console.log('>>> NO KYC', checkKycCounter, account, lotteryContract, err)\r\n        } else {\r\n          setCheckKycCounter(checkKycCounter+1)\r\n        }\r\n      }\r\n    }\r\n  }, [ account, lotteryContract, checkKycCounter ])\r\n  \r\n  const getPrizeBalances = () => {\r\n    if (status === LotteryStatus.CLOSE || status === LotteryStatus.CLAIMABLE) {\r\n      return (\r\n        <Heading scale=\"xl\" color=\"secondary\" style={{marginTop: '4px'}} textAlign={['center', null, null, 'left']}>\r\n          {t('Calculating')}...\r\n        </Heading>\r\n      )\r\n    }\r\n\r\n    if (!token.info().price) {\r\n      return (\r\n        <Balance\r\n          fontSize=\"40px\"\r\n          color=\"secondary\"\r\n          textAlign={['center', null, null, 'left']}\r\n          lineHeight=\"1\"\r\n          bold\r\n          unit={` ${token.info().symbol}`}\r\n          value={getBalanceNumber(amountCollectedInCake, token.info().decimals)}\r\n          decimals={token.info().viewDecimals}\r\n        />\r\n      )\r\n    }\r\n    return (\r\n      <>\r\n        {prizeInBusd.isNaN() ? (\r\n          <Skeleton my=\"7px\" height={40} width={160} />\r\n        ) : (\r\n          <Balance\r\n            fontSize=\"40px\"\r\n            color=\"secondary\"\r\n            textAlign={['center', null, null, 'left']}\r\n            lineHeight=\"1\"\r\n            bold\r\n            prefix=\"~$\"\r\n            value={getBalanceNumber(prizeInBusd, token.info().decimals)}\r\n            decimals={0}\r\n          />\r\n        )}\r\n        {prizeInBusd.isNaN() ? (\r\n          <Skeleton my=\"2px\" height={14} width={90} />\r\n        ) : (\r\n          <Balance\r\n            fontSize=\"14px\"\r\n            color=\"textSubtle\"\r\n            textAlign={['center', null, null, 'left']}\r\n            unit={` ${token.info().symbol}`}\r\n            value={getBalanceNumber(amountCollectedInCake, token.info().decimals)}\r\n            decimals={0}\r\n          />\r\n        )}\r\n      </>\r\n    )\r\n  }\r\n\r\n  const getNextDrawId = () => {\r\n    if (status === LotteryStatus.OPEN) {\r\n      return `${currentLotteryId} |`\r\n    }\r\n    if (status === LotteryStatus.PENDING) {\r\n      return ''\r\n    }\r\n    return parseInt(currentLotteryId, 10) + 1\r\n  }\r\n\r\n  const getNextDrawDateTime = () => {\r\n    if (status === LotteryStatus.OPEN) {\r\n      return `${t('Draw')}: ${endDate.toLocaleString(locale, dateTimeOptions)}`\r\n    }\r\n    return ''\r\n  }\r\n\r\n  const ticketRoundText =\r\n    userTicketCount > 1\r\n      ? t('You have %amount% tickets this round', { amount: userTicketCount })\r\n      : t('You have %amount% ticket this round', { amount: userTicketCount })\r\n  const [youHaveText, ticketsThisRoundText] = ticketRoundText.split(userTicketCount.toString())\r\n\r\n  return (\r\n    <StyledCard>\r\n      <CardHeader p=\"16px 24px\">\r\n        <Flex justifyContent=\"space-between\">\r\n          <Heading mr=\"12px\">{t('Next Draw')}</Heading>\r\n          { /* @ts-ignore */ }\r\n          <HeadingText>\r\n            {currentLotteryId && `#${getNextDrawId()}`} {Boolean(endTime) && getNextDrawDateTime()}\r\n          </HeadingText>\r\n        </Flex>\r\n      </CardHeader>\r\n      <CardBody>\r\n        <Grid>\r\n          <Flex justifyContent={['center', null, null, 'flex-start']}>\r\n            <Heading>{t('Prize Pot')}</Heading>\r\n          </Flex>\r\n          <Flex flexDirection=\"column\" mb=\"18px\">\r\n            {getPrizeBalances()}\r\n          </Flex>\r\n          <Box display={['none', null, null, 'flex']}>\r\n            <Heading>{t('Your tickets')}</Heading>\r\n          </Box>\r\n          <Flex flexDirection={['column', null, null, 'row']} alignItems={['center', null, null, 'center']}>\r\n            {isLotteryOpen && (\r\n              <Flex\r\n                flexDirection=\"column\"\r\n                mr={[null, null, null, '24px']}\r\n                alignItems={['center', null, null, 'flex-start']}\r\n              >\r\n                {account && (\r\n                  <Flex justifyContent={['center', null, null, 'flex-start']} style={{ whiteSpace: `nowrap` }} >\r\n                    <Text display=\"inline\">{youHaveText} </Text>\r\n                    {!userTickets.isLoading ? (\r\n                      <Balance value={userTicketCount} decimals={0} display=\"inline\" bold mx=\"4px\" />\r\n                    ) : (\r\n                      <Skeleton mx=\"4px\" height={20} width={40} />\r\n                    )}\r\n                    <Text display=\"inline\"> {ticketsThisRoundText}</Text>\r\n                  </Flex>\r\n                )}\r\n                {!userTickets.isLoading && userTicketCount > 0 && (\r\n                  <Button\r\n                    className='textButton'\r\n                    onClick={onPresentViewTicketsModal}\r\n                    height=\"auto\"\r\n                    width=\"fit-content\"\r\n                    p=\"0\"\r\n                    mb={['32px', null, null, '0']}\r\n                    variant=\"text\"\r\n                    scale=\"sm\"\r\n                  >\r\n                    {t('View your tickets')}\r\n                  </Button>\r\n                )}\r\n              </Flex>\r\n            )}\r\n            {isCheckingKYC && (\r\n              <Button disabled={true}>{`Checking KYC...`}</Button>\r\n            )}\r\n            {!isCheckingKYC && !isWalletOkKYC && (\r\n              <Button\r\n                onClick={() => {\r\n                  // @ts-ignore\r\n                  if (window?.SO_LotteryConfig?.kycVerifyLink) {\r\n                    // @ts-ignore\r\n                    window.open(window.SO_LotteryConfig.kycVerifyLink)\r\n                  }\r\n                }}\r\n              >\r\n                {`Need KYC verify`}\r\n              </Button>\r\n            )}\r\n            {!isCheckingKYC && isWalletOkKYC && (\r\n              <BuyTicketsButton disabled={ticketBuyIsDisabled} maxWidth=\"280px\" />\r\n            )}\r\n            <BuyTokenButton disabled={false} maxWidth=\"280px\" />\r\n          </Flex>\r\n        </Grid>\r\n      </CardBody>\r\n      <CardFooter p=\"0\">\r\n        {isExpanded && (\r\n          <NextDrawWrapper>\r\n            <RewardBrackets lotteryNodeData={currentRound} />\r\n          </NextDrawWrapper>\r\n        )}\r\n        {(status === LotteryStatus.OPEN || status === LotteryStatus.CLOSE) && (\r\n          <Flex p=\"8px 24px\" alignItems=\"center\" justifyContent=\"center\">\r\n            <ExpandableLabel expanded={isExpanded} onClick={() => setIsExpanded(!isExpanded)}>\r\n              {isExpanded ? t('Hide') : t('Details')}\r\n            </ExpandableLabel>\r\n          </Flex>\r\n        )}\r\n      </CardFooter>\r\n    </StyledCard>\r\n  )\r\n}\r\n\r\nexport default NextDrawCard\r\n","const MINUTE_IN_SECONDS = 60\r\nconst HOUR_IN_SECONDS = 3600\r\nconst DAY_IN_SECONDS = 86400\r\nconst MONTH_IN_SECONDS = 2629800\r\nconst YEAR_IN_SECONDS = 31557600\r\n\r\n/**\r\n * Format number of seconds into year, month, day, hour, minute, seconds\r\n *\r\n * @param seconds\r\n */\r\nconst getTimePeriods = (seconds: number) => {\r\n  let delta = Math.abs(seconds)\r\n  const timeLeft = {\r\n    years: 0,\r\n    months: 0,\r\n    days: 0,\r\n    hours: 0,\r\n    minutes: 0,\r\n    seconds: 0,\r\n  }\r\n\r\n  if (delta >= YEAR_IN_SECONDS) {\r\n    timeLeft.years = Math.floor(delta / YEAR_IN_SECONDS)\r\n    delta -= timeLeft.years * YEAR_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= MONTH_IN_SECONDS) {\r\n    timeLeft.months = Math.floor(delta / MONTH_IN_SECONDS)\r\n    delta -= timeLeft.months * MONTH_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= DAY_IN_SECONDS) {\r\n    timeLeft.days = Math.floor(delta / DAY_IN_SECONDS)\r\n    delta -= timeLeft.days * DAY_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= HOUR_IN_SECONDS) {\r\n    timeLeft.hours = Math.floor(delta / HOUR_IN_SECONDS)\r\n    delta -= timeLeft.hours * HOUR_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= MINUTE_IN_SECONDS) {\r\n    timeLeft.minutes = Math.floor(delta / MINUTE_IN_SECONDS)\r\n    delta -= timeLeft.minutes * MINUTE_IN_SECONDS\r\n  }\r\n\r\n  timeLeft.seconds = delta\r\n\r\n  return timeLeft\r\n}\r\n\r\nexport default getTimePeriods\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Flex, Heading } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\nexport interface TimerProps {\r\n  minutes?: number\r\n  hours?: number\r\n  days?: number\r\n}\r\n\r\nconst StyledTimerFlex = styled(Flex)<{ showTooltip?: boolean }>`\r\n  ${({ theme, showTooltip }) => (showTooltip ? ` border-bottom: 1px dashed ${theme.colors.textSubtle};` : ``)}\r\n  div:last-of-type {\r\n    margin-right: 0;\r\n  }\r\n`\r\n\r\nconst StyledTimerText = styled(Heading)`\r\n  background: ${({ theme }) => theme.colors.gradients.gold};\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n`\r\n\r\nconst Wrapper: React.FC<TimerProps> = ({ minutes, hours, days }) => {\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <StyledTimerFlex alignItems=\"flex-end\">\r\n      {Boolean(days) && (\r\n        <>\r\n          <StyledTimerText mb=\"-4px\" scale=\"xl\" mr=\"4px\">\r\n            {days}\r\n          </StyledTimerText>\r\n          <StyledTimerText mr=\"12px\">{t('d')}</StyledTimerText>\r\n        </>\r\n      )}\r\n      {Boolean(hours) && (\r\n        <>\r\n          <StyledTimerText mb=\"-4px\" scale=\"xl\" mr=\"4px\">\r\n            {hours}\r\n          </StyledTimerText>\r\n          <StyledTimerText mr=\"12px\">{t('h')}</StyledTimerText>\r\n        </>\r\n      )}\r\n      {Boolean(minutes) && (\r\n        <>\r\n          <StyledTimerText mb=\"-4px\" scale=\"xl\" mr=\"4px\">\r\n            {minutes}\r\n          </StyledTimerText>\r\n          <StyledTimerText mr=\"12px\">{t('m')}</StyledTimerText>\r\n        </>\r\n      )}\r\n    </StyledTimerFlex>\r\n  )\r\n}\r\n\r\nexport default Wrapper\r\n","import { useEffect, useState, useRef } from 'react'\r\nimport { useAppDispatch } from 'state'\r\nimport { useLottery } from 'state/lottery/hooks'\r\nimport { fetchCurrentLottery, setLotteryIsTransitioning } from 'state/lottery'\r\n\r\nconst useNextEventCountdown = (nextEventTime: number): number => {\r\n  const dispatch = useAppDispatch()\r\n  const [secondsRemaining, setSecondsRemaining] = useState(null)\r\n  const timer = useRef(null)\r\n  const { currentLotteryId } = useLottery()\r\n\r\n  useEffect(() => {\r\n    dispatch(setLotteryIsTransitioning({ isTransitioning: false }))\r\n    const currentSeconds = Math.floor(Date.now() / 1000)\r\n    const secondsRemainingCalc = nextEventTime - currentSeconds\r\n    setSecondsRemaining(secondsRemainingCalc)\r\n\r\n    timer.current = setInterval(() => {\r\n      setSecondsRemaining((prevSecondsRemaining) => {\r\n        // Clear current interval at end of countdown and fetch current lottery to get updated state\r\n        if (prevSecondsRemaining <= 1) {\r\n          clearInterval(timer.current)\r\n          dispatch(setLotteryIsTransitioning({ isTransitioning: true }))\r\n          dispatch(fetchCurrentLottery({ currentLotteryId }))\r\n        }\r\n        return prevSecondsRemaining - 1\r\n      })\r\n    }, 1000)\r\n\r\n    return () => clearInterval(timer.current)\r\n  }, [setSecondsRemaining, nextEventTime, currentLotteryId, timer, dispatch])\r\n\r\n  return secondsRemaining\r\n}\r\n\r\nexport default useNextEventCountdown\r\n","import React from 'react'\r\nimport { Flex, Heading, Skeleton } from '@pancakeswap/uikit'\r\nimport getTimePeriods from 'utils/getTimePeriods'\r\nimport Timer from './Timer'\r\nimport useNextEventCountdown from '../../hooks/useNextEventCountdown'\r\n\r\ninterface CountdownProps {\r\n  nextEventTime: number\r\n  preCountdownText?: string\r\n  postCountdownText?: string\r\n}\r\n\r\nconst Countdown: React.FC<CountdownProps> = ({ nextEventTime, preCountdownText, postCountdownText }) => {\r\n  const secondsRemaining = useNextEventCountdown(nextEventTime)\r\n  const { days, hours, minutes } = getTimePeriods(secondsRemaining)\r\n\r\n  return (\r\n    <>\r\n      {secondsRemaining ? (\r\n        <Flex display=\"inline-flex\" justifyContent=\"flex-end\" alignItems=\"flex-end\">\r\n          {preCountdownText && (\r\n            <Heading mr=\"12px\" color=\"#ffff\">\r\n              {preCountdownText}\r\n            </Heading>\r\n          )}\r\n          {secondsRemaining > 0 && (\r\n            <>\r\n              <Timer\r\n                minutes={minutes + 1} // We don't show seconds - so values from 0 - 59s should be shown as 1 min\r\n                hours={hours}\r\n                days={days}\r\n              />\r\n              {postCountdownText && <Heading color=\"#ffff\">{postCountdownText}</Heading>}\r\n            </>\r\n          )}\r\n          {secondsRemaining < 0 && (\r\n            <Heading color=\"#ffff\">Waiting for draw winning combinations</Heading>\r\n          )}\r\n        </Flex>\r\n      ) : (\r\n        <Skeleton height=\"41px\" width=\"250px\" />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Countdown\r\n","import React from 'react'\r\nimport { ButtonMenu, ButtonMenuItem } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\nconst HistoryTabMenu = ({ setActiveIndex, activeIndex }) => {\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <ButtonMenu activeIndex={activeIndex} onItemClick={setActiveIndex} scale=\"sm\" variant=\"subtle\">\r\n      <ButtonMenuItem className={`menuButton${activeIndex === 0 ? ' active' : ''}`}>{t('All History')}</ButtonMenuItem>\r\n      <ButtonMenuItem className={`menuButton${activeIndex === 1 ? ' active' : ''}`}>{t('Your History')}</ButtonMenuItem>\r\n    </ButtonMenu>\r\n  )\r\n}\r\n\r\nexport default HistoryTabMenu\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Text, Flex, ChevronRightIcon, Box, SmallDotIcon, PrizeIcon } from '@pancakeswap/uikit'\r\nimport { dateOptions, timeOptions } from '../../helpers'\r\n\r\ninterface FinishedRoundRowProps {\r\n  roundId: string\r\n  numberTickets: string\r\n  endTime: string\r\n  onClick: (string) => void\r\n  hasWon?: boolean\r\n}\r\n\r\nconst Grid = styled(Box)`\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr) auto;\r\n  margin-bottom: 8px;\r\n  cursor: pointer;\r\n`\r\n\r\nconst StyledSmallDotIcon = styled(SmallDotIcon)`\r\n  path {\r\n    fill: ${({ theme }) => theme.colors.textDisabled};\r\n  }\r\n`\r\n\r\nconst FinishedRoundRow: React.FC<FinishedRoundRowProps> = ({\r\n  roundId,\r\n  numberTickets,\r\n  endTime,\r\n  onClick,\r\n  hasWon = false,\r\n}) => {\r\n  const {\r\n    currentLanguage: { locale },\r\n  } = useTranslation()\r\n  const endTimeInMs = parseInt(endTime, 10) * 1000\r\n  const endTimeAsDate = new Date(endTimeInMs)\r\n\r\n  return (\r\n    <Grid onClick={() => onClick(roundId)}>\r\n      <Flex alignItems=\"center\">\r\n        <Text fontSize=\"16px\" color=\"textSubtle\">\r\n          {roundId}\r\n        </Text>\r\n      </Flex>\r\n      <Flex\r\n        mx=\"6px\"\r\n        alignItems={['flex-start', null, 'center']}\r\n        justifyContent={['center', null, 'flex-start']}\r\n        flexDirection={['column', null, 'row']}\r\n      >\r\n        <Text fontSize=\"12px\" mr={['0', null, '6px']}>\r\n          {endTimeAsDate.toLocaleDateString(locale, dateOptions)}\r\n        </Text>\r\n        <Text fontSize=\"12px\" color=\"textSubtle\">\r\n          {endTimeAsDate.toLocaleTimeString(undefined, timeOptions)}\r\n        </Text>\r\n      </Flex>\r\n      <Flex mx=\"6px\" alignItems=\"center\" justifyContent=\"space-between\">\r\n        <Text>{numberTickets}</Text>\r\n        {hasWon ? <PrizeIcon color=\"warning\" /> : <StyledSmallDotIcon />}\r\n      </Flex>\r\n      <Flex alignItems=\"center\" justifyContent=\"center\">\r\n        <ChevronRightIcon color=\"primary\" />\r\n      </Flex>\r\n    </Grid>\r\n  )\r\n}\r\n\r\nexport default FinishedRoundRow\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Text, Box, Flex, Button } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { LotteryStatus } from 'config/constants/types'\r\nimport { useGetUserLotteriesGraphData } from 'state/lottery/hooks'\r\nimport FinishedRoundRow from './FinishedRoundRow'\r\n\r\nconst Grid = styled(Box)`\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr) auto;\r\n`\r\n\r\ninterface FinishedRoundTableProps {\r\n  handleHistoryRowClick: (string) => void\r\n  handleShowMoreClick: () => void\r\n  numUserRoundsRequested: number\r\n}\r\n\r\nconst FinishedRoundTable: React.FC<FinishedRoundTableProps> = ({\r\n  handleShowMoreClick,\r\n  numUserRoundsRequested,\r\n  handleHistoryRowClick,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const userLotteryData = useGetUserLotteriesGraphData()\r\n\r\n  const filteredForClaimable = userLotteryData?.rounds.filter((round) => {\r\n    return round.status.toLowerCase() === LotteryStatus.CLAIMABLE\r\n  })\r\n\r\n  const sortedByRoundId = filteredForClaimable?.sort((roundA, roundB) => {\r\n    return parseInt(roundB.lotteryId, 10) - parseInt(roundA.lotteryId, 10)\r\n  })\r\n\r\n  return (\r\n    <>\r\n      <Grid px=\"24px\" pt=\"24px\" mb=\"8px\">\r\n        <Text bold fontSize=\"12px\" color=\"secondary\">\r\n          #\r\n        </Text>\r\n        <Text bold fontSize=\"12px\" color=\"secondary\" textTransform=\"uppercase\">\r\n          {t('Date')}\r\n        </Text>\r\n        <Text bold fontSize=\"12px\" color=\"secondary\" textTransform=\"uppercase\">\r\n          {t('Your Tickets')}\r\n        </Text>\r\n        <Box width=\"20px\" />\r\n      </Grid>\r\n      <Flex px=\"24px\" pb=\"24px\" flexDirection=\"column\" overflowY=\"scroll\" height=\"240px\">\r\n        {userLotteryData &&\r\n          sortedByRoundId.map((finishedRound) => (\r\n            <FinishedRoundRow\r\n              key={finishedRound.lotteryId}\r\n              roundId={finishedRound.lotteryId}\r\n              hasWon={finishedRound.claimed}\r\n              numberTickets={finishedRound.totalTickets}\r\n              endTime={finishedRound.endTime}\r\n              onClick={handleHistoryRowClick}\r\n            />\r\n          ))}\r\n        {userLotteryData?.rounds?.length === numUserRoundsRequested && (\r\n          <Flex justifyContent=\"center\">\r\n            <Button mt=\"12px\" variant=\"text\" width=\"fit-content\" onClick={handleShowMoreClick}>\r\n              {t('Show More')}\r\n            </Button>\r\n          </Flex>\r\n        )}\r\n      </Flex>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default FinishedRoundTable\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport {\r\n  CardBody,\r\n  Heading,\r\n  Flex,\r\n  Skeleton,\r\n  Text,\r\n  Box,\r\n  Button,\r\n  useModal,\r\n  CardRibbon,\r\n  useMatchBreakpoints,\r\n  BunnyPlaceholderIcon,\r\n} from '@pancakeswap/uikit'\r\nimport { LotteryRound } from 'state/types'\r\nimport { useGetUserLotteriesGraphData, useLottery } from 'state/lottery/hooks'\r\nimport { LotteryStatus } from 'config/constants/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport WinningNumbers from '../WinningNumbers'\r\nimport ViewTicketsModal from '../ViewTicketsModal'\r\n\r\nconst StyledCardBody = styled(CardBody)`\r\n  position: relative;\r\n  overflow: hidden;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`\r\nconst Grid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: auto;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    grid-column-gap: 72px;\r\n    grid-row-gap: 36px;\r\n    grid-template-columns: auto 1fr;\r\n  }\r\n`\r\n\r\nconst StyledCardRibbon = styled(CardRibbon)`\r\n  right: -20px;\r\n  top: -20px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.xs} {\r\n    right: -10px;\r\n    top: -10px;\r\n  }\r\n`\r\n\r\nconst PreviousRoundCardBody: React.FC<{ lotteryNodeData: LotteryRound; lotteryId: string }> = ({\r\n  lotteryNodeData,\r\n  lotteryId,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const {\r\n    currentLotteryId,\r\n    currentRound: { status },\r\n  } = useLottery()\r\n  const userLotteryData = useGetUserLotteriesGraphData()\r\n  const userDataForRound = userLotteryData.rounds.find((userLotteryRound) => userLotteryRound.lotteryId === lotteryId)\r\n  const { isLg, isXl, isXxl } = useMatchBreakpoints()\r\n  const isLargerScreen = isLg || isXl || isXxl\r\n\r\n  const currentLotteryIdAsInt = parseInt(currentLotteryId)\r\n  const mostRecentFinishedRoundId =\r\n    status === LotteryStatus.CLAIMABLE ? currentLotteryIdAsInt : currentLotteryIdAsInt - 1\r\n  const isLatestRound = mostRecentFinishedRoundId.toString() === lotteryId\r\n\r\n  const [onPresentViewTicketsModal] = useModal(\r\n    <ViewTicketsModal roundId={lotteryId} roundStatus={lotteryNodeData?.status} />,\r\n  )\r\n\r\n  const totalTicketNumber = userDataForRound ? userDataForRound.totalTickets : 0\r\n  const ticketRoundText =\r\n    totalTicketNumber > 1\r\n      ? t('You had %amount% tickets this round', { amount: totalTicketNumber })\r\n      : t('You had %amount% ticket this round', { amount: totalTicketNumber })\r\n  const [youHadText, ticketsThisRoundText] = ticketRoundText.split(totalTicketNumber.toString())\r\n\r\n  return (\r\n    <StyledCardBody>\r\n      {isLatestRound && <StyledCardRibbon text={t('Latest')} />}\r\n      <Grid>\r\n        <Flex justifyContent={['center', null, null, 'flex-start']}>\r\n          <Heading mb=\"24px\">{t('Winning Number')}</Heading>\r\n        </Flex>\r\n        <Flex maxWidth={['240px', null, null, '100%']} justifyContent={['center', null, null, 'flex-start']}>\r\n          {lotteryId ? (\r\n            lotteryNodeData ? (\r\n              <WinningNumbers\r\n                rotateText={isLargerScreen || false}\r\n                number={lotteryNodeData?.finalNumber.toString()}\r\n                mr={[null, null, null, '32px']}\r\n                size=\"100%\"\r\n                fontSize={isLargerScreen ? '42px' : '16px'}\r\n                maxHeight=\"71px\"\r\n              />\r\n            ) : (\r\n              <Skeleton\r\n                width={['240px', null, null, '450px']}\r\n                height={['34px', null, null, '71px']}\r\n                mr={[null, null, null, '32px']}\r\n              />\r\n            )\r\n          ) : (\r\n            <>\r\n              <Flex flexDirection=\"column\" alignItems=\"center\" width={['240px', null, null, '480px']}>\r\n                <Text mb=\"8px\">{t('Please specify Round')}</Text>\r\n                <BunnyPlaceholderIcon height=\"64px\" width=\"64px\" />\r\n              </Flex>\r\n            </>\r\n          )}\r\n        </Flex>\r\n        {userDataForRound && (\r\n          <>\r\n            <Box display={['none', null, null, 'flex']}>\r\n              <Heading>{t('Your tickets')}</Heading>\r\n            </Box>\r\n            <Flex\r\n              flexDirection=\"column\"\r\n              mr={[null, null, null, '24px']}\r\n              alignItems={['center', null, null, 'flex-start']}\r\n            >\r\n              <Box mt={['32px', null, null, 0]}>\r\n                <Text display=\"inline\">{youHadText} </Text>\r\n                <Text display=\"inline\" bold>\r\n                  {userDataForRound.totalTickets}\r\n                </Text>\r\n                <Text display=\"inline\">{ticketsThisRoundText}</Text>\r\n              </Box>\r\n              <Button\r\n                className=\"textButton\"\r\n                onClick={onPresentViewTicketsModal}\r\n                height=\"auto\"\r\n                width=\"fit-content\"\r\n                p=\"0\"\r\n                variant=\"text\"\r\n                scale=\"sm\"\r\n              >\r\n                {t('View your tickets')}\r\n              </Button>\r\n            </Flex>\r\n          </>\r\n        )}\r\n      </Grid>\r\n    </StyledCardBody>\r\n  )\r\n}\r\n\r\nexport default PreviousRoundCardBody\r\n","import React, { useState, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Flex, Skeleton, Heading, Box, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { LotteryRound, LotteryRoundGraphEntity } from 'state/types'\r\nimport { usePriceCakeBusd } from 'state/farms/hooks'\r\nimport { useGetLotteryGraphDataById } from 'state/lottery/hooks'\r\nimport * as token from 'config/constants/tokens.lottery'\r\nimport { getGraphLotteries } from 'state/lottery/getLotteriesData'\r\nimport { formatNumber, getBalanceNumber } from 'utils/formatBalance'\r\nimport Balance from 'components/Balance'\r\nimport RewardBrackets from '../RewardBrackets'\r\n\r\nconst NextDrawWrapper = styled(Flex)`\r\n  background: ${({ theme }) => theme.colors.background};\r\n  padding: 24px;\r\n  flex-direction: column;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    flex-direction: row;\r\n  }\r\n`\r\n\r\nconst PreviousRoundCardFooter: React.FC<{ lotteryNodeData: LotteryRound; lotteryId: string }> = ({\r\n  lotteryNodeData,\r\n  lotteryId,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const [fetchedLotteryGraphData, setFetchedLotteryGraphData] = useState<LotteryRoundGraphEntity>()\r\n  const lotteryGraphDataFromState = useGetLotteryGraphDataById(lotteryId)\r\n  const cakePriceBusd = token.info().price || 0\r\n\r\n  useEffect(() => {\r\n    const getGraphData = async () => {\r\n      const fetchedGraphData = await getGraphLotteries(undefined, undefined, { id_in: [lotteryId] })\r\n      setFetchedLotteryGraphData(fetchedGraphData[0])\r\n    }\r\n    if (!lotteryGraphDataFromState) {\r\n      getGraphData()\r\n    }\r\n  }, [lotteryGraphDataFromState, lotteryId])\r\n\r\n  let prizeInBusd = new BigNumber(NaN)\r\n  if (lotteryNodeData) {\r\n    const { amountCollectedInCake } = lotteryNodeData\r\n    prizeInBusd = amountCollectedInCake.times(cakePriceBusd)\r\n  }\r\n\r\n  const getTotalUsers = (): string => {\r\n    if (!lotteryGraphDataFromState && fetchedLotteryGraphData) {\r\n      return fetchedLotteryGraphData?.totalUsers?.toLocaleString()\r\n    }\r\n\r\n    if (lotteryGraphDataFromState) {\r\n      return lotteryGraphDataFromState?.totalUsers?.toLocaleString()\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  const getPrizeBalances = () => {\r\n    return (\r\n      <>\r\n        {token.info().price ? (\r\n          <>\r\n            {prizeInBusd.isNaN() ? (\r\n              <Skeleton my=\"7px\" height={40} width={200} />\r\n            ) : (\r\n              <Heading scale=\"xl\" lineHeight=\"1\" color=\"secondary\">\r\n                ~${formatNumber(getBalanceNumber(prizeInBusd, token.info().decimals), 0, 0)}\r\n              </Heading>\r\n            )}\r\n            {prizeInBusd.isNaN() ? (\r\n              <Skeleton my=\"2px\" height={14} width={90} />\r\n            ) : (\r\n              <Balance\r\n                fontSize=\"14px\"\r\n                color=\"textSubtle\"\r\n                unit={` ${token.info().symbol}`}\r\n                value={getBalanceNumber(lotteryNodeData?.amountCollectedInCake, token.info().decimals)}\r\n                decimals={token.info().viewDecimals}\r\n              />\r\n            )}\r\n          </>\r\n        ) : (\r\n          <Heading scale=\"xl\" lineHeight=\"1\" color=\"secondary\">\r\n            <Balance\r\n              fontSize=\"14px\"\r\n              color=\"textSubtle\"\r\n              unit={` ${token.info().symbol}`}\r\n              value={getBalanceNumber(lotteryNodeData?.amountCollectedInCake, token.info().decimals)}\r\n              decimals={token.info().viewDecimals}\r\n            />\r\n          </Heading>\r\n        )}\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <NextDrawWrapper>\r\n      <Flex mr=\"24px\" flexDirection=\"column\" justifyContent=\"space-between\">\r\n        <Box>\r\n          <Heading>{t('Prize pot')}</Heading>\r\n          {getPrizeBalances()}\r\n        </Box>\r\n        <Box mb=\"24px\">\r\n          <Flex>\r\n            <Text fontSize=\"14px\" display=\"inline\">\r\n              {t('Total players this round')}:{' '}\r\n              {lotteryNodeData && (lotteryGraphDataFromState || fetchedLotteryGraphData) ? (\r\n                getTotalUsers()\r\n              ) : (\r\n                <Skeleton height={14} width={31} />\r\n              )}\r\n            </Text>\r\n          </Flex>\r\n        </Box>\r\n      </Flex>\r\n      <RewardBrackets lotteryNodeData={lotteryNodeData} isHistoricRound />\r\n    </NextDrawWrapper>\r\n  )\r\n}\r\n\r\nexport default PreviousRoundCardFooter\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Flex, ExpandableLabel as ExpandableLabelUiKit, CardFooter } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { LotteryRound } from 'state/types'\r\nimport FooterExpanded from './FooterExpanded'\r\nimport styled from 'styled-components'\r\n\r\nconst ExpandableLabel = styled(ExpandableLabelUiKit)`\r\n  &:hover {\r\n    color: #1FC7D4;\r\n    background-color: transparent;\r\n  }\r\n\r\n  &:active {\r\n    color: #1FC7D4;\r\n    background-color: transparent;\r\n  }\r\n\r\n  &:focus {\r\n    color: #1FC7D4;\r\n    background-color: transparent;\r\n  }\r\n`\r\n\r\ninterface PreviousRoundCardFooterProps {\r\n  lotteryNodeData: LotteryRound\r\n  lotteryId: string\r\n}\r\n\r\nconst PreviousRoundCardFooter: React.FC<PreviousRoundCardFooterProps> = ({ lotteryNodeData, lotteryId }) => {\r\n  const { t } = useTranslation()\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if (!lotteryId) {\r\n      setIsExpanded(false)\r\n    }\r\n  }, [lotteryId])\r\n\r\n  return (\r\n    <CardFooter p=\"0\">\r\n      {isExpanded && <FooterExpanded lotteryNodeData={lotteryNodeData} lotteryId={lotteryId} />}\r\n      <Flex p=\"8px 24px\" alignItems=\"center\" justifyContent=\"center\">\r\n        <ExpandableLabel\r\n          expanded={isExpanded}\r\n          onClick={() => {\r\n            if (lotteryId) {\r\n              setIsExpanded(!isExpanded)\r\n            }\r\n          }}\r\n        >\r\n          {isExpanded ? t('Hide') : t('Details')}\r\n        </ExpandableLabel>\r\n      </Flex>\r\n    </CardFooter>\r\n  )\r\n}\r\n\r\nexport default PreviousRoundCardFooter\r\n","import React, { useState } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport styled from 'styled-components'\r\nimport {\r\n  CardHeader,\r\n  Card,\r\n  CardBody,\r\n  Text,\r\n  CardFooter,\r\n  ArrowBackIcon,\r\n  Flex,\r\n  Heading,\r\n  Skeleton,\r\n  Box,\r\n} from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { LotteryStatus } from 'config/constants/types'\r\nimport { useGetUserLotteriesGraphData, useLottery } from 'state/lottery/hooks'\r\nimport { fetchLottery } from 'state/lottery/helpers'\r\nimport { LotteryRound } from 'state/types'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport FinishedRoundTable from './FinishedRoundTable'\r\nimport { WhiteBunny } from '../../svgs'\r\nimport BuyTicketsButton from '../BuyTicketsButton'\r\nimport PreviousRoundCardBody from '../PreviousRoundCard/Body'\r\nimport { processLotteryResponse, getDrawnDate } from '../../helpers'\r\nimport PreviousRoundCardFooter from '../PreviousRoundCard/Footer'\r\n\r\ninterface YourHistoryCardProps {\r\n  handleShowMoreClick: () => void\r\n  numUserRoundsRequested: number\r\n}\r\n\r\nconst StyledCard = styled(Card)`\r\n  width: 100%;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    width: 756px;\r\n  }\r\n`\r\n\r\nconst StyledCardBody = styled(CardBody)`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  min-height: 240px;\r\n`\r\n\r\nconst YourHistoryCard: React.FC<YourHistoryCardProps> = ({ handleShowMoreClick, numUserRoundsRequested }) => {\r\n  const {\r\n    t,\r\n    currentLanguage: { locale },\r\n  } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const [shouldShowRoundDetail, setShouldShowRoundDetail] = useState(false)\r\n  const [selectedLotteryNodeData, setSelectedLotteryNodeData] = useState<LotteryRound>(null)\r\n  const [selectedLotteryId, setSelectedLotteryId] = useState<string>(null)\r\n\r\n  const {\r\n    isTransitioning,\r\n    currentRound: { status },\r\n  } = useLottery()\r\n  const userLotteryData = useGetUserLotteriesGraphData()\r\n  const ticketBuyIsDisabled = status !== LotteryStatus.OPEN || isTransitioning\r\n\r\n  const handleHistoryRowClick = async (lotteryId: string) => {\r\n    setShouldShowRoundDetail(true)\r\n    setSelectedLotteryId(lotteryId)\r\n    const lotteryData = await fetchLottery(lotteryId)\r\n    const processedLotteryData = processLotteryResponse(lotteryData)\r\n    setSelectedLotteryNodeData(processedLotteryData)\r\n  }\r\n\r\n  const clearState = () => {\r\n    setShouldShowRoundDetail(false)\r\n    setSelectedLotteryNodeData(null)\r\n    setSelectedLotteryId(null)\r\n  }\r\n\r\n  const getHeader = () => {\r\n    if (shouldShowRoundDetail) {\r\n      return (\r\n        <Flex alignItems=\"center\">\r\n          <ArrowBackIcon cursor=\"pointer\" onClick={() => clearState()} mr=\"20px\" />\r\n          <Flex flexDirection=\"column\" alignItems=\"flex-start\" justifyContent=\"center\">\r\n            <Heading scale=\"md\" mb=\"4px\">\r\n              {t('Round')} {selectedLotteryId || ''}\r\n            </Heading>\r\n            {selectedLotteryNodeData?.endTime ? (\r\n              <Text fontSize=\"14px\">\r\n                {t('Drawn')} {getDrawnDate(locale, selectedLotteryNodeData.endTime)}\r\n              </Text>\r\n            ) : (\r\n              <Skeleton width=\"185px\" height=\"21px\" />\r\n            )}\r\n          </Flex>\r\n        </Flex>\r\n      )\r\n    }\r\n\r\n    return <Heading scale=\"md\">{t('Rounds')}</Heading>\r\n  }\r\n\r\n  const getBody = () => {\r\n    if (shouldShowRoundDetail) {\r\n      return <PreviousRoundCardBody lotteryNodeData={selectedLotteryNodeData} lotteryId={selectedLotteryId} />\r\n    }\r\n\r\n    const claimableRounds = userLotteryData?.rounds.filter((round) => {\r\n      return round.status.toLowerCase() === LotteryStatus.CLAIMABLE\r\n    })\r\n\r\n    if (!account) {\r\n      return (\r\n        <StyledCardBody>\r\n          <Text textAlign=\"center\" color=\"textSubtle\" mb=\"16px\">\r\n            {t('Connect your wallet to check your history')}\r\n          </Text>\r\n          <ConnectWalletButton />\r\n        </StyledCardBody>\r\n      )\r\n    }\r\n    if (claimableRounds.length === 0) {\r\n      return (\r\n        <StyledCardBody>\r\n          <Box maxWidth=\"280px\">\r\n            <Flex alignItems=\"center\" justifyContent=\"center\" mb=\"16px\">\r\n              <WhiteBunny height=\"24px\" mr=\"8px\" /> <Text textAlign=\"left\">{t('No lottery history found')}</Text>\r\n            </Flex>\r\n            <Text textAlign=\"center\" color=\"textSubtle\" mb=\"16px\">\r\n              {t('Buy tickets for the next round!')}\r\n            </Text>\r\n            <BuyTicketsButton disabled={ticketBuyIsDisabled} width=\"100%\" />\r\n          </Box>\r\n        </StyledCardBody>\r\n      )\r\n    }\r\n    return (\r\n      <FinishedRoundTable\r\n        handleHistoryRowClick={handleHistoryRowClick}\r\n        handleShowMoreClick={handleShowMoreClick}\r\n        numUserRoundsRequested={numUserRoundsRequested}\r\n      />\r\n    )\r\n  }\r\n\r\n  const getFooter = () => {\r\n    if (selectedLotteryNodeData) {\r\n      return <PreviousRoundCardFooter lotteryNodeData={selectedLotteryNodeData} lotteryId={selectedLotteryId} />\r\n    }\r\n    return (\r\n      <CardFooter>\r\n        <Flex flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\">\r\n          <Text fontSize=\"12px\" color=\"textSubtle\">\r\n            {t('Only showing data for Lottery V2')}\r\n          </Text>\r\n        </Flex>\r\n      </CardFooter>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <StyledCard>\r\n      <CardHeader>{getHeader()}</CardHeader>\r\n      {getBody()}\r\n      {getFooter()}\r\n    </StyledCard>\r\n  )\r\n}\r\n\r\nexport default YourHistoryCard\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { IconButton, ArrowForwardIcon, ArrowBackIcon, ArrowLastIcon, Flex, Heading, Input } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\nconst StyledInput = styled(Input)`\r\n  width: 60px;\r\n  height: 100%;\r\n  padding: 4px 16px;\r\n`\r\n\r\nconst StyledIconButton = styled(IconButton)`\r\n  width: 32px;\r\n\r\n  :disabled {\r\n    background: none;\r\n\r\n    svg {\r\n      fill: ${({ theme }) => theme.colors.textDisabled};\r\n\r\n      path {\r\n        fill: ${({ theme }) => theme.colors.textDisabled};\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\ninterface RoundSwitcherProps {\r\n  isLoading: boolean\r\n  selectedRoundId: string\r\n  mostRecentRound: number\r\n  handleInputChange: (event: any) => void\r\n  handleArrowButtonPress: (targetRound: number) => void\r\n}\r\n\r\nconst RoundSwitcher: React.FC<RoundSwitcherProps> = ({\r\n  isLoading,\r\n  selectedRoundId,\r\n  mostRecentRound,\r\n  handleInputChange,\r\n  handleArrowButtonPress,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const selectedRoundIdAsInt = parseInt(selectedRoundId, 10)\r\n\r\n  const handleOnChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.currentTarget.validity.valid) {\r\n      handleInputChange(e)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Flex alignItems=\"center\" justifyContent=\"space-between\">\r\n      <Flex alignItems=\"center\">\r\n        <Heading mr=\"8px\">{t('Round')}</Heading>\r\n        <StyledInput\r\n          pattern=\"^[0-9]+$\"\r\n          inputMode=\"numeric\"\r\n          disabled={isLoading}\r\n          id=\"round-id\"\r\n          name=\"round-id\"\r\n          value={selectedRoundId}\r\n          scale=\"lg\"\r\n          onChange={handleOnChange}\r\n        />\r\n      </Flex>\r\n      <Flex alignItems=\"center\">\r\n        <StyledIconButton\r\n          className=\"iconButton\"\r\n          disabled={!selectedRoundIdAsInt || selectedRoundIdAsInt <= 1}\r\n          onClick={() => handleArrowButtonPress(selectedRoundIdAsInt - 1)}\r\n          variant=\"text\"\r\n          scale=\"sm\"\r\n          mr=\"4px\"\r\n        >\r\n          <ArrowBackIcon />\r\n        </StyledIconButton>\r\n        <StyledIconButton\r\n          className=\"iconButton\"\r\n          disabled={selectedRoundIdAsInt >= mostRecentRound}\r\n          onClick={() => handleArrowButtonPress(selectedRoundIdAsInt + 1)}\r\n          variant=\"text\"\r\n          scale=\"sm\"\r\n          mr=\"4px\"\r\n        >\r\n          <ArrowForwardIcon />\r\n        </StyledIconButton>\r\n        <StyledIconButton\r\n          className=\"iconButton\"\r\n          disabled={selectedRoundIdAsInt >= mostRecentRound}\r\n          onClick={() => handleArrowButtonPress(mostRecentRound)}\r\n          variant=\"text\"\r\n          scale=\"sm\"\r\n        >\r\n          <ArrowLastIcon />\r\n        </StyledIconButton>\r\n      </Flex>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default RoundSwitcher\r\n","import React, { useState, useRef, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Card, Text, Skeleton, CardHeader, Box } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useAppDispatch } from 'state'\r\nimport { useLottery } from 'state/lottery/hooks'\r\nimport { fetchLottery } from 'state/lottery/helpers'\r\nimport { LotteryStatus } from 'config/constants/types'\r\nimport RoundSwitcher from './RoundSwitcher'\r\nimport { getDrawnDate, processLotteryResponse } from '../../helpers'\r\nimport PreviousRoundCardBody from '../PreviousRoundCard/Body'\r\nimport PreviousRoundCardFooter from '../PreviousRoundCard/Footer'\r\n\r\nconst StyledCard = styled(Card)`\r\n  width: 100%;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    width: 756px;\r\n  }\r\n`\r\n\r\nconst StyledCardHeader = styled(CardHeader)`\r\n  z-index: 2;\r\n  background: none;\r\n  border-bottom: 1px ${({ theme }) => theme.colors.cardBorder} solid;\r\n`\r\n\r\nconst AllHistoryCard = () => {\r\n  const {\r\n    t,\r\n    currentLanguage: { locale },\r\n  } = useTranslation()\r\n  const dispatch = useAppDispatch()\r\n  const {\r\n    currentLotteryId,\r\n    lotteriesData,\r\n    currentRound: { status, isLoading },\r\n  } = useLottery()\r\n  const [latestRoundId, setLatestRoundId] = useState(null)\r\n  const [selectedRoundId, setSelectedRoundId] = useState('')\r\n  const [selectedLotteryNodeData, setSelectedLotteryNodeData] = useState(null)\r\n  const timer = useRef(null)\r\n\r\n  const numRoundsFetched = lotteriesData?.length\r\n\r\n  useEffect(() => {\r\n    if (currentLotteryId) {\r\n      const currentLotteryIdAsInt = currentLotteryId ? parseInt(currentLotteryId) : null\r\n      const mostRecentFinishedRoundId =\r\n        status === LotteryStatus.CLAIMABLE ? currentLotteryIdAsInt : currentLotteryIdAsInt - 1\r\n      setLatestRoundId(mostRecentFinishedRoundId)\r\n      setSelectedRoundId(mostRecentFinishedRoundId.toString())\r\n    }\r\n  }, [currentLotteryId, status])\r\n\r\n  useEffect(() => {\r\n    setSelectedLotteryNodeData(null)\r\n\r\n    const fetchLotteryData = async () => {\r\n      const lotteryData = await fetchLottery(selectedRoundId)\r\n      const processedLotteryData = processLotteryResponse(lotteryData)\r\n      setSelectedLotteryNodeData(processedLotteryData)\r\n    }\r\n\r\n    timer.current = setInterval(() => {\r\n      if (selectedRoundId) {\r\n        fetchLotteryData()\r\n      }\r\n      clearInterval(timer.current)\r\n    }, 1000)\r\n\r\n    return () => clearInterval(timer.current)\r\n  }, [selectedRoundId, currentLotteryId, numRoundsFetched, dispatch])\r\n\r\n  const handleInputChange = (event) => {\r\n    const {\r\n      target: { value },\r\n    } = event\r\n    if (value) {\r\n      setSelectedRoundId(value)\r\n      if (parseInt(value, 10) <= 0) {\r\n        setSelectedRoundId('')\r\n      }\r\n      if (parseInt(value, 10) >= latestRoundId) {\r\n        setSelectedRoundId(latestRoundId.toString())\r\n      }\r\n    } else {\r\n      setSelectedRoundId('')\r\n    }\r\n  }\r\n\r\n  const handleArrowButtonPress = (targetRound) => {\r\n    if (targetRound) {\r\n      setSelectedRoundId(targetRound.toString())\r\n    } else {\r\n      // targetRound is NaN when the input is empty, the only button press that will trigger this func is 'forward one'\r\n      setSelectedRoundId('1')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <StyledCard>\r\n      <StyledCardHeader>\r\n        <RoundSwitcher\r\n          isLoading={isLoading}\r\n          selectedRoundId={selectedRoundId}\r\n          mostRecentRound={latestRoundId}\r\n          handleInputChange={handleInputChange}\r\n          handleArrowButtonPress={handleArrowButtonPress}\r\n        />\r\n        <Box mt=\"8px\">\r\n          {selectedRoundId ? (\r\n            selectedLotteryNodeData?.endTime ? (\r\n              <Text fontSize=\"14px\">\r\n                {t('Drawn')} {getDrawnDate(locale, selectedLotteryNodeData.endTime)}\r\n              </Text>\r\n            ) : (\r\n              <Skeleton width=\"185px\" height=\"21px\" />\r\n            )\r\n          ) : null}\r\n        </Box>\r\n      </StyledCardHeader>\r\n      <PreviousRoundCardBody lotteryNodeData={selectedLotteryNodeData} lotteryId={selectedRoundId} />\r\n      <PreviousRoundCardFooter lotteryNodeData={selectedLotteryNodeData} lotteryId={selectedRoundId} />\r\n    </StyledCard>\r\n  )\r\n}\r\n\r\nexport default AllHistoryCard\r\n","import React, { useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Button, Heading, Flex, useModal, AutoRenewIcon } from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { LotteryStatus } from 'config/constants/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useGetUserLotteriesGraphData, useLottery } from 'state/lottery/hooks'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport ClaimPrizesModal from './ClaimPrizesModal'\r\nimport useGetUnclaimedRewards, { FetchStatus } from '../hooks/useGetUnclaimedRewards'\r\n\r\nconst TicketImage = styled.img`\r\n  height: 60px;\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    height: 100px;\r\n  }\r\n`\r\n\r\nconst TornTicketImage = styled.img`\r\n  height: 54px;\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    height: 84px;\r\n  }\r\n`\r\n\r\nconst CheckPrizesSection = () => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const {\r\n    isTransitioning,\r\n    currentRound: { status },\r\n  } = useLottery()\r\n  const { fetchAllRewards, unclaimedRewards, fetchStatus } = useGetUnclaimedRewards()\r\n  const userLotteryData = useGetUserLotteriesGraphData()\r\n  const [hasCheckedForRewards, setHasCheckedForRewards] = useState(false)\r\n  const [hasRewardsToClaim, setHasRewardsToClaim] = useState(false)\r\n  const [onPresentClaimModal] = useModal(<ClaimPrizesModal roundsToClaim={unclaimedRewards} />, false)\r\n  const isFetchingRewards = fetchStatus === FetchStatus.IN_PROGRESS\r\n  const lotteryIsNotClaimable = status === LotteryStatus.CLOSE\r\n  const isCheckNowDisabled = !userLotteryData.account || lotteryIsNotClaimable\r\n\r\n  useEffect(() => {\r\n    if (fetchStatus === FetchStatus.SUCCESS) {\r\n      // Manage showing unclaimed rewards modal once per page load / once per lottery state change\r\n      if (unclaimedRewards.length > 0 && !hasCheckedForRewards) {\r\n        setHasRewardsToClaim(true)\r\n        setHasCheckedForRewards(true)\r\n        onPresentClaimModal()\r\n      }\r\n\r\n      if (unclaimedRewards.length === 0 && !hasCheckedForRewards) {\r\n        setHasRewardsToClaim(false)\r\n        setHasCheckedForRewards(true)\r\n      }\r\n    }\r\n  }, [unclaimedRewards, hasCheckedForRewards, fetchStatus, onPresentClaimModal])\r\n\r\n  useEffect(() => {\r\n    // Clear local state on account change, or when lottery isTransitioning state changes\r\n    setHasRewardsToClaim(false)\r\n    setHasCheckedForRewards(false)\r\n  }, [account, isTransitioning])\r\n\r\n  const getBody = () => {\r\n    if (!account) {\r\n      return (\r\n        <Flex alignItems=\"center\" justifyContent=\"center\">\r\n          <TicketImage src=\"./images/lottery/ticket-l.png\" alt=\"lottery ticket\" />\r\n          <Flex mx={['4px', null, '16px']} flexDirection=\"column\" alignItems=\"center\">\r\n            <Heading textAlign=\"center\" color=\"#F4EEFF\">\r\n              {t('Connect your wallet')}\r\n            </Heading>\r\n            <Heading textAlign=\"center\" color=\"#F4EEFF\" mb=\"24px\">\r\n              {t(\"to check if you've won!\")}\r\n            </Heading>\r\n            <ConnectWalletButton className=\"primaryButton\" width=\"190px\" />\r\n            {/* @ts-ignore */ }\r\n            {window && window.SO_LotteryConfig && window.SO_LotteryConfig.chainName && (\r\n              <Heading mb=\"8px\" scale=\"md\" color=\"#ffffff\" id=\"lottery-hero-title\">\r\n                {t('The Lottery operates on the %chainName% Network', {\r\n                  // @ts-ignore\r\n                  chainName: window.SO_LotteryConfig.chainName,\r\n                })}\r\n              </Heading>\r\n            )}\r\n          </Flex>\r\n          <TicketImage src=\"./images/lottery/ticket-r.png\" alt=\"lottery ticket\" />\r\n        </Flex>\r\n      )\r\n    }\r\n    if (hasCheckedForRewards && !hasRewardsToClaim) {\r\n      return (\r\n        <Flex alignItems=\"center\" justifyContent=\"center\">\r\n          <TornTicketImage src=\"./images/lottery/torn-ticket-l.png\" alt=\"torn lottery ticket\" />\r\n          <Flex mx={['4px', null, '16px']} flexDirection=\"column\">\r\n            <Heading textAlign=\"center\" color=\"#F4EEFF\">\r\n              {t('No prizes to collect')}...\r\n            </Heading>\r\n            <Heading textAlign=\"center\" color=\"#F4EEFF\">\r\n              {t('Better luck next time!')}\r\n            </Heading>\r\n          </Flex>\r\n          <TornTicketImage src=\"./images/lottery/torn-ticket-r.png\" alt=\"torn lottery ticket\" />\r\n        </Flex>\r\n      )\r\n    }\r\n    if (hasCheckedForRewards && hasRewardsToClaim) {\r\n      return (\r\n        <Flex alignItems=\"center\" justifyContent=\"center\">\r\n          <TicketImage src=\"./images/lottery/ticket-l.png\" alt=\"lottery ticket\" />\r\n          <Flex mx={['4px', null, '16px']} flexDirection=\"column\">\r\n            <Heading textAlign=\"center\" color=\"#F4EEFF\">\r\n              {t('Congratulations!')}\r\n            </Heading>\r\n            <Heading textAlign=\"center\" color=\"#F4EEFF\">\r\n              {t('Why not play again')}\r\n            </Heading>\r\n          </Flex>\r\n          <TicketImage src=\"./images/lottery/ticket-r.png\" alt=\"lottery ticket\" />\r\n        </Flex>\r\n      )\r\n    }\r\n    const checkNowText = () => {\r\n      if (lotteryIsNotClaimable) {\r\n        return `${t('Calculating rewards')}...`\r\n      }\r\n      if (isFetchingRewards) {\r\n        return t('Checking')\r\n      }\r\n      return t('Check Now')\r\n    }\r\n    return (\r\n      <Flex alignItems=\"center\" justifyContent=\"center\">\r\n        <TicketImage src=\"./images/lottery/ticket-l.png\" alt=\"lottery ticket\" />\r\n        <Flex mx={['4px', null, '16px']} flexDirection=\"column\">\r\n          <Heading textAlign=\"center\" color=\"#F4EEFF\" mb=\"24px\">\r\n            {t('Are you a winner?')}\r\n          </Heading>\r\n          <Button\r\n            className=\"primaryButton\"\r\n            disabled={isCheckNowDisabled}\r\n            onClick={fetchAllRewards}\r\n            isLoading={isFetchingRewards}\r\n            endIcon={isFetchingRewards ? <AutoRenewIcon color=\"currentColor\" spin /> : null}\r\n          >\r\n            {checkNowText()}\r\n          </Button>\r\n        </Flex>\r\n        <TicketImage src=\"./images/lottery/ticket-r.png\" alt=\"lottery ticket\" />\r\n      </Flex>\r\n    )\r\n  }\r\n\r\n  return <Flex>{getBody()}</Flex>\r\n}\r\n\r\nexport default CheckPrizesSection\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Box, Flex, Text, Heading, useMatchBreakpoints, Link, Image } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useTheme from 'hooks/useTheme'\r\nimport * as token from 'config/constants/tokens.lottery'\r\nimport { BallWithNumber, MatchExampleA, MatchExampleB, PoolAllocationChart } from '../svgs'\r\n\r\n\r\n// @ts-ignore\r\nconst numbersCount = window.SO_LotteryConfig.numbersCount\r\n\r\nconst Divider = styled.div`\r\n  background-color: ${({ theme }) => theme.colors.cardBorder};\r\n  height: 1px;\r\n  margin: 40px 0;\r\n  width: 100%;\r\n`\r\n\r\nconst BulletList = styled.ul`\r\n  list-style-type: none;\r\n  margin-left: 8px;\r\n  padding: 0;\r\n  li {\r\n    margin: 0;\r\n    padding: 0;\r\n  }\r\n  li::before {\r\n    content: '•';\r\n    margin-right: 4px;\r\n    color: ${({ theme }) => theme.colors.textSubtle};\r\n  }\r\n  li::marker {\r\n    font-size: 12px;\r\n  }\r\n`\r\n\r\nconst StepContainer = styled(Flex)`\r\n  gap: 24px;\r\n  width: 100%;\r\n  flex-direction: column;\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    flex-direction: row;\r\n  }\r\n`\r\n\r\nconst StyledStepCard = styled(Box)`\r\n  display: flex;\r\n  align-self: baseline;\r\n  position: relative;\r\n  background: ${({ theme }) => theme.colors.cardBorder};\r\n  padding: 1px 1px 3px 1px;\r\n  border-radius: ${({ theme }) => theme.radii.card};\r\n`\r\n\r\nconst StepCardInner = styled(Box)`\r\n  width: 100%;\r\n  padding: 24px;\r\n  background: ${({ theme }) => theme.card.background};\r\n  border-radius: ${({ theme }) => theme.radii.card};\r\n`\r\n\r\ntype Step = { title: string; subtitle: string; label: string }\r\n\r\nconst StepCard: React.FC<{ step: Step }> = ({ step }) => {\r\n  return (\r\n    <StyledStepCard width=\"100%\">\r\n      <StepCardInner height={['200px', '180px', null, '200px']}>\r\n        <Text mb=\"16px\" fontSize=\"12px\" bold textAlign=\"right\" textTransform=\"uppercase\">\r\n          {step.label}\r\n        </Text>\r\n        <Heading mb=\"16px\" scale=\"lg\" color=\"secondary\">\r\n          {step.title}\r\n        </Heading>\r\n        <Text color=\"textSubtle\">{step.subtitle}</Text>\r\n      </StepCardInner>\r\n    </StyledStepCard>\r\n  )\r\n}\r\n\r\nconst BallsContainer = styled(Flex)`\r\n  gap: 6.5px;\r\n  padding-left: 7px;\r\n  align-items: center;\r\n  width: 100%;\r\n`\r\n\r\nconst InlineLink = styled(Link)`\r\n  display: inline;\r\n\r\n  &:hover, &;active, &:focus {\r\n    color: #1FC7D4;\r\n  }\r\n`\r\n\r\nconst ExampleBalls = () => {\r\n  const { isDesktop } = useMatchBreakpoints()\r\n  const ballSize = isDesktop ? '24px' : '32px'\r\n  const fontSize = isDesktop ? '14px' : '16px'\r\n  return (\r\n    <BallsContainer>\r\n      <BallWithNumber size={ballSize} fontSize={fontSize} color=\"yellow\" number=\"9\" />\r\n      <BallWithNumber size={ballSize} fontSize={fontSize} color=\"green\" number=\"1\" />\r\n      <BallWithNumber size={ballSize} fontSize={fontSize} color=\"aqua\" number=\"3\" />\r\n      <BallWithNumber size={ballSize} fontSize={fontSize} color=\"teal\" number=\"6\" />\r\n      <BallWithNumber size={ballSize} fontSize={fontSize} color=\"lilac\" number=\"6\" />\r\n      <BallWithNumber size={ballSize} fontSize={fontSize} color=\"pink\" number=\"2\" />\r\n    </BallsContainer>\r\n  )\r\n}\r\n\r\nconst MatchExampleContainer = styled.div`\r\n  height: 100%;\r\n  display: grid;\r\n  grid-template-columns: 1fr 5fr;\r\n  grid-template-rows: 46px 64px 64px;\r\n`\r\n\r\nconst MatchExampleCard = () => {\r\n  const { isDark } = useTheme()\r\n  const { isXs } = useMatchBreakpoints()\r\n  const { t } = useTranslation()\r\n  const exampleWidth = isXs ? '210px' : '258px'\r\n  return (\r\n    <StyledStepCard width={['280px', '330px', '380px']}>\r\n      <StepCardInner height=\"220px\">\r\n        <MatchExampleContainer>\r\n          <Box />\r\n          <ExampleBalls />\r\n          <Text lineHeight=\"72px\" textAlign=\"right\" color=\"secondary\" bold mr=\"20px\">\r\n            {t('A')}\r\n          </Text>\r\n          <MatchExampleA width={exampleWidth} height=\"46px\" isDark={isDark} />\r\n          <Text lineHeight=\"72px\" textAlign=\"right\" color=\"secondary\" bold mr=\"20px\">\r\n            {t('B')}\r\n          </Text>\r\n          <MatchExampleB width={exampleWidth} height=\"46px\" isDark={isDark} />\r\n        </MatchExampleContainer>\r\n      </StepCardInner>\r\n    </StyledStepCard>\r\n  )\r\n}\r\n\r\nconst AllocationGrid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 4fr 1fr;\r\n  grid-auto-rows: max-content;\r\n  row-gap: 4px;\r\n`\r\n\r\nconst AllocationColorCircle = styled.div<{ color: string }>`\r\n  border-radius: 50%;\r\n  width: 20px;\r\n  height: 20px;\r\n  margin-right: 8px;\r\n  background-color: ${({ color }) => color};\r\n`\r\n\r\nconst AllocationMatch: React.FC<{ color: string; text: string }> = ({ color, text }) => {\r\n  return (\r\n    <Flex alignItems=\"center\">\r\n      <AllocationColorCircle color={color} />\r\n      <Text color=\"textSubtle\">{text}</Text>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nconst PoolAllocations = () => {\r\n  const { t } = useTranslation()\r\n  // @ts-ignore\r\n  const winPercents = window.SO_LotteryConfig.winPercents\r\n  // @ts-ignore\r\n  const numbersCount = window.SO_LotteryConfig.numbersCount\r\n  return (\r\n    <StyledStepCard width={['280px', '330px', '380px']}>\r\n      <StepCardInner height=\"auto\">\r\n        <Flex justifyContent=\"space-between\">\r\n          <Text fontSize=\"12px\" color=\"secondary\" bold textTransform=\"uppercase\">\r\n            {t('Digits matched')}\r\n          </Text>\r\n          <Text fontSize=\"12px\" color=\"secondary\" bold textAlign=\"right\" textTransform=\"uppercase\">\r\n            {t('Prize pool allocation')}\r\n          </Text>\r\n        </Flex>\r\n        <AllocationGrid>\r\n          {numbersCount >= 1 && (\r\n            <>\r\n              <AllocationMatch color=\"#FFE362\" text={t((numbersCount == 1) ? 'Matches all %digits%': 'Matches first %digits%', { digits: 1 })} />\r\n              <Text textAlign=\"right\" bold>\r\n                {parseFloat(winPercents.match_1.toFixed(2))}%\r\n              </Text>\r\n            </>\r\n          )}\r\n          {numbersCount >= 2 && (\r\n            <>\r\n              <AllocationMatch color=\"#85C54E\" text={t((numbersCount == 2) ? 'Matches all %digits%': 'Matches first %digits%', { digits:2 })} />\r\n              <Text textAlign=\"right\" bold>\r\n                {parseFloat(winPercents.match_2.toFixed(2))}%\r\n              </Text>\r\n            </>\r\n          )}\r\n          {numbersCount >= 3 && (\r\n            <>\r\n              <AllocationMatch color=\"#028E75\" text={t((numbersCount == 3) ? 'Matches all %digits%': 'Matches first %digits%', { digits: 3 })} />\r\n              <Text textAlign=\"right\" bold>\r\n                {parseFloat(winPercents.match_3.toFixed(2))}%\r\n              </Text>\r\n            </>\r\n          )}\r\n          {numbersCount >= 4 && (\r\n            <>\r\n              <AllocationMatch color=\"#36E8F5\" text={t((numbersCount == 4) ? 'Matches all %digits%': 'Matches first %digits%', { digits: 4 })} />\r\n              <Text textAlign=\"right\" bold>\r\n                {parseFloat(winPercents.match_4.toFixed(2))}%\r\n              </Text>\r\n            </>\r\n          )}\r\n          {numbersCount >= 5 && (\r\n            <>\r\n              <AllocationMatch color=\"#A881FC\" text={t((numbersCount == 5) ? 'Matches all %digits%': 'Matches first %digits%', { digits: 5 })} />\r\n              <Text textAlign=\"right\" bold>\r\n                {parseFloat(winPercents.match_5.toFixed(2))}%\r\n              </Text>\r\n            </>\r\n          )}\r\n          {numbersCount >= 6 && (\r\n            <>\r\n              <AllocationMatch color=\"#D750B2\" text={t((numbersCount == 6) ? 'Matches all %digits%': 'Matches first %digits%', { digits: 6 })} />\r\n              <Text textAlign=\"right\" bold>\r\n                {parseFloat(winPercents.match_6.toFixed(2))}%\r\n              </Text>\r\n            </>\r\n          )}\r\n          {/*\r\n          <AllocationMatch color=\"#BDC2C4\" text={t('Burn Pool')} />\r\n          <Text textAlign=\"right\" bold>\r\n            {parseFloat(winPercents.burn.toFixed(2))}%\r\n          </Text>\r\n          */}\r\n        </AllocationGrid>\r\n      </StepCardInner>\r\n    </StyledStepCard>\r\n  )\r\n}\r\n\r\nconst GappedFlex = styled(Flex)`\r\n  gap: 24px;\r\n`\r\n\r\nconst HowToPlay: React.FC = () => {\r\n  const { t } = useTranslation()\r\n\r\n  const steps: Step[] = [\r\n    {\r\n      label: t('Step %number%', { number: 1 }),\r\n      title: t('Buy Tickets'),\r\n      subtitle: t('Prices are set when the round starts.'),\r\n    },\r\n    {\r\n      label: t('Step %number%', { number: 2 }),\r\n      title: t('Wait for the Draw'),\r\n      subtitle: t('The timer is at the top of this page'),\r\n    },\r\n    {\r\n      label: t('Step %number%', { number: 3 }),\r\n      title: t('Check for Prizes'),\r\n      subtitle: t('Once the round’s over, come back to the page and check to see if you’ve won!'),\r\n    },\r\n  ]\r\n  return (\r\n    <Box width=\"100%\">\r\n      <Flex mb=\"40px\" alignItems=\"center\" flexDirection=\"column\">\r\n        <Heading mb=\"24px\" scale=\"xl\" color=\"secondary\">\r\n          {t('How to Play')}\r\n        </Heading>\r\n        <Text textAlign=\"center\">\r\n          {t(\r\n            'If the digits on your tickets match the winning numbers in the correct order, you win a portion of the prize pool.',\r\n          )}\r\n        </Text>\r\n        <Text>{t('Simple!')}</Text>\r\n      </Flex>\r\n      <StepContainer>\r\n        {steps.map((step) => (\r\n          <StepCard key={step.label} step={step} />\r\n        ))}\r\n      </StepContainer>\r\n      <Divider />\r\n      <GappedFlex flexDirection={['column', 'column', 'column', 'row']}>\r\n        <Flex flex=\"2\" flexDirection=\"column\">\r\n          <Heading mb=\"24px\" scale=\"lg\" color=\"secondary\">\r\n            {t('Winning Criteria')}\r\n          </Heading>\r\n          <Heading mb=\"24px\" scale=\"md\">\r\n            {t('The digits on your ticket must match in the correct order to win.')}\r\n          </Heading>\r\n          <Text mb=\"16px\" color=\"textSubtle\">\r\n            {t('Here’s an example lottery draw, with two tickets, A and B.')}\r\n          </Text>\r\n          <BulletList>\r\n            <li>\r\n              <Text display=\"inline\" color=\"textSubtle\">\r\n                {t(\r\n                  'Ticket A: The first 3 digits and the last 2 digits match, but the 4th digit is wrong, so this ticket only wins a “Match first 3” prize.',\r\n                )}\r\n              </Text>\r\n            </li>\r\n            <li>\r\n              <Text display=\"inline\" color=\"textSubtle\">\r\n                {t(\r\n                  'Ticket B: Even though the last 5 digits match, the first digit is wrong, so this ticket doesn’t win a prize.',\r\n                )}\r\n              </Text>\r\n            </li>\r\n          </BulletList>\r\n          <Text mt=\"16px\" color=\"textSubtle\">\r\n            {t(\r\n              'Prize brackets don’t ‘stack’: if you match the first 3 digits in order, you’ll only win prizes from the ‘Match 3’ bracket, and not from ‘Match 1’ and ‘Match 2’.',\r\n            )}\r\n          </Text>\r\n        </Flex>\r\n        <Flex flex=\"1\" justifyContent=\"center\">\r\n          {/*<MatchExampleCard />*/}\r\n          <PoolAllocations />\r\n        </Flex>\r\n      </GappedFlex>\r\n      <Divider />\r\n      <GappedFlex flexDirection={['column', 'column', 'column', 'row']}>\r\n        {/*\r\n        <Flex flex=\"2\" flexDirection=\"column\">\r\n          <Heading mb=\"24px\" scale=\"lg\" color=\"secondary\">\r\n            {t('Prize Funds')}\r\n          </Heading>\r\n          <Text color=\"textSubtle\">{t('The prizes for each lottery round come from three sources:')}</Text>\r\n          <Heading my=\"16px\" scale=\"md\">\r\n            {t('Ticket Purchases')}\r\n          </Heading>\r\n          <BulletList>\r\n            <li>\r\n              <Text display=\"inline\" color=\"textSubtle\">\r\n                {t('100% of the CAKE paid by people buying tickets that round goes back into the prize pools.')}\r\n              </Text>\r\n            </li>\r\n          </BulletList>\r\n          <Heading my=\"16px\" scale=\"md\">\r\n            {t('Rollover Prizes')}\r\n          </Heading>\r\n          <BulletList>\r\n            <li>\r\n              <Text display=\"inline\" color=\"textSubtle\">\r\n                {t(\r\n                  'After every round, if nobody wins in one of the prize brackets, the unclaimed CAKE for that bracket rolls over into the next round and are redistributed among the prize pools.',\r\n                )}\r\n              </Text>\r\n            </li>\r\n          </BulletList>\r\n          <Heading my=\"16px\" scale=\"md\">\r\n            {t('CAKE Injections')}\r\n          </Heading>\r\n          <BulletList>\r\n            <li>\r\n              <Text display=\"inline\" color=\"textSubtle\">\r\n                {t(\r\n                  'An average total of 35,000 CAKE from the treasury is added to lottery rounds over the course of a week. This CAKE is of course also included in rollovers! Read more in our guide to ',\r\n                )}\r\n                <InlineLink className='inlineLink' href=\"https://docs.pancakeswap.finance/tokenomics/cake/cake-tokenomics\">\r\n                  {t('CAKE Tokenomics')}\r\n                </InlineLink>\r\n              </Text>\r\n            </li>\r\n          </BulletList>\r\n        </Flex>\r\n        */}\r\n        {/*\r\n        <Flex flex=\"1\" justifyContent=\"center\">\r\n          <PoolAllocations />\r\n        </Flex>\r\n        */}\r\n      </GappedFlex>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default HowToPlay\r\n","import { useWeb3React } from '@web3-react/core'\r\nimport { useState } from 'react'\r\nimport { useAppDispatch } from 'state'\r\nimport { fetchAdditionalUserLotteries } from 'state/lottery'\r\nimport { MAX_USER_LOTTERIES_REQUEST_SIZE } from 'state/lottery/getUserLotteryData'\r\n\r\nconst useShowMoreUserRounds = () => {\r\n  const { account } = useWeb3React()\r\n  const dispatch = useAppDispatch()\r\n  const [numUserRoundsRequested, setNumUserRoundsRequested] = useState(MAX_USER_LOTTERIES_REQUEST_SIZE)\r\n\r\n  const handleShowMoreUserRounds = () => {\r\n    dispatch(fetchAdditionalUserLotteries({ account, skip: numUserRoundsRequested }))\r\n    setNumUserRoundsRequested(numUserRoundsRequested + MAX_USER_LOTTERIES_REQUEST_SIZE)\r\n  }\r\n\r\n  return { numUserRoundsRequested, handleShowMoreUserRounds }\r\n}\r\n\r\nexport default useShowMoreUserRounds\r\n","import styled from 'styled-components';\r\n\r\nconst Link = styled.a`\r\n  color: inherit;\r\n  text-decoration: none;\r\n  &:hover {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nconst ServiceLinkDiv = styled.div`\r\n  align-item: center;\r\n  font-size: 11px;\r\n  margin-top: 10px;\r\n  color: gray;\r\n\r\n`\r\n\r\nconst ServiceLink = () => {\r\n  return (\r\n    <ServiceLinkDiv>\r\n      Powered by\r\n      {' '}\r\n      <Link href=\"https://onout.org/lottery\"  target=\"_blank\" rel=\"noreferrer\">OnOut - no-code tool to create Lottery</Link>\r\n    </ServiceLinkDiv>\r\n  )\r\n\r\n};\r\n\r\nexport default ServiceLink;","import { MenuItemsType, DropdownMenuItemType } from '@pancakeswap/uikit'\r\nimport { ContextApi } from 'contexts/Localization/types'\r\nimport { nftsBaseUrl } from 'views/Nft/market/constants'\r\n\r\nexport type ConfigMenuItemsType = MenuItemsType & { hideSubNav?: boolean }\r\n\r\nconst config: (t: ContextApi['t']) => ConfigMenuItemsType[] = (t) => [\r\n  {\r\n    label: t('Trade'),\r\n    icon: 'Swap',\r\n    href: '/swap',\r\n    showItemsOnMobile: false,\r\n    items: [\r\n      {\r\n        label: t('Exchange'),\r\n        href: '/swap',\r\n      },\r\n      {\r\n        label: t('Liquidity'),\r\n        href: '/liquidity',\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    label: t('Earn'),\r\n    href: '/farms',\r\n    icon: 'Earn',\r\n    items: [\r\n      {\r\n        label: t('Farms'),\r\n        href: '/farms',\r\n      },\r\n      {\r\n        label: t('Pools'),\r\n        href: '/pools',\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    label: t('Win'),\r\n    href: '/prediction',\r\n    icon: 'Trophy',\r\n    items: [\r\n      {\r\n        label: t('Prediction (BETA)'),\r\n        href: '/prediction',\r\n      },\r\n      {\r\n        label: t('Lottery'),\r\n        href: '/lottery',\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    label: t('NFT'),\r\n    href: `${nftsBaseUrl}`,\r\n    icon: 'Nft',\r\n    items: [\r\n      {\r\n        label: t('Overview'),\r\n        href: `${nftsBaseUrl}`,\r\n      },\r\n      {\r\n        label: t('Collections'),\r\n        href: `${nftsBaseUrl}/collections`,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    label: '',\r\n    href: '/info',\r\n    icon: 'More',\r\n    hideSubNav: true,\r\n    items: [\r\n      {\r\n        label: t('Info'),\r\n        href: '/info',\r\n      },\r\n      {\r\n        label: t('IFO'),\r\n        href: '/ifo',\r\n      },\r\n      {\r\n        label: t('Voting'),\r\n        href: '/voting',\r\n      },\r\n      {\r\n        type: DropdownMenuItemType.DIVIDER,\r\n      },\r\n      {\r\n        label: t('Leaderboard'),\r\n        href: '/teams',\r\n      },\r\n      {\r\n        type: DropdownMenuItemType.DIVIDER,\r\n      },\r\n      {\r\n        label: t('Blog'),\r\n        href: 'https://medium.com/pancakeswap',\r\n        type: DropdownMenuItemType.EXTERNAL_LINK,\r\n      },\r\n      {\r\n        label: t('Docs'),\r\n        href: 'https://docs.pancakeswap.finance',\r\n        type: DropdownMenuItemType.EXTERNAL_LINK,\r\n      },\r\n    ],\r\n  },\r\n]\r\n\r\nexport default config\r\n","import React, { useState } from 'react'\r\nimport { Box, CopyIcon, Flex, FlexProps, IconButton } from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\ninterface CopyAddressProps extends FlexProps {\r\n  account: string\r\n}\r\n\r\nconst Wrapper = styled(Flex)`\r\n  align-items: center;\r\n  background-color: ${({ theme }) => theme.colors.dropdown};\r\n  border-radius: 16px;\r\n  position: relative;\r\n`\r\n\r\nconst Address = styled.div`\r\n  flex: 1;\r\n  position: relative;\r\n  padding-left: 16px;\r\n\r\n  & > input {\r\n    background: transparent;\r\n    border: 0;\r\n    color: ${({ theme }) => theme.colors.text};\r\n    display: block;\r\n    font-weight: 600;\r\n    font-size: 16px;\r\n    padding: 0;\r\n    width: 100%;\r\n\r\n    &:focus {\r\n      outline: 0;\r\n    }\r\n  }\r\n\r\n  &:after {\r\n    background: linear-gradient(\r\n      to right,\r\n      ${({ theme }) => theme.colors.background}00,\r\n      ${({ theme }) => theme.colors.background}E6\r\n    );\r\n    content: '';\r\n    height: 100%;\r\n    pointer-events: none;\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    width: 40px;\r\n  }\r\n`\r\n\r\nconst Tooltip = styled.div<{ isTooltipDisplayed: boolean }>`\r\n  display: ${({ isTooltipDisplayed }) => (isTooltipDisplayed ? 'inline-block' : 'none')};\r\n  position: absolute;\r\n  padding: 8px;\r\n  top: -38px;\r\n  right: 0;\r\n  text-align: center;\r\n  background-color: ${({ theme }) => theme.colors.contrast};\r\n  color: ${({ theme }) => theme.colors.invertedContrast};\r\n  border-radius: 16px;\r\n  opacity: 0.7;\r\n  width: 100px;\r\n`\r\n\r\nconst CopyAddress: React.FC<CopyAddressProps> = ({ account, ...props }) => {\r\n  const [isTooltipDisplayed, setIsTooltipDisplayed] = useState(false)\r\n  const { t } = useTranslation()\r\n\r\n  const copyAddress = () => {\r\n    if (navigator.clipboard && navigator.permissions) {\r\n      navigator.clipboard.writeText(account).then(() => displayTooltip())\r\n    } else if (document.queryCommandSupported('copy')) {\r\n      const ele = document.createElement('textarea')\r\n      ele.value = account\r\n      document.body.appendChild(ele)\r\n      ele.select()\r\n      document.execCommand('copy')\r\n      document.body.removeChild(ele)\r\n      displayTooltip()\r\n    }\r\n  }\r\n\r\n  function displayTooltip() {\r\n    setIsTooltipDisplayed(true)\r\n    setTimeout(() => {\r\n      setIsTooltipDisplayed(false)\r\n    }, 1000)\r\n  }\r\n\r\n  return (\r\n    <Box position=\"relative\" {...props}>\r\n      <Wrapper>\r\n        <Address title={account}>\r\n          <input type=\"text\" readOnly value={account} />\r\n        </Address>\r\n        <IconButton variant=\"text\" onClick={copyAddress}>\r\n          <CopyIcon color=\"primary\" width=\"24px\" />\r\n        </IconButton>\r\n      </Wrapper>\r\n      <Tooltip isTooltipDisplayed={isTooltipDisplayed}>{t('Copied')}</Tooltip>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default CopyAddress\r\n","import React from 'react'\r\nimport { Box, Button, Flex, InjectedModalProps, LinkExternal, Message, Skeleton, Text } from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport useTokenBalance, { FetchStatus, useGetBnbBalance } from 'hooks/useTokenBalance'\r\nimport useAuth from 'hooks/useAuth'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { getBscScanLink } from 'utils'\r\nimport { getFullDisplayBalance, formatBigNumber } from 'utils/formatBalance'\r\nimport tokens from 'config/constants/tokens.lottery'\r\nimport CopyAddress from './CopyAddress'\r\n\r\ninterface WalletInfoProps {\r\n  hasLowBnbBalance: boolean\r\n  onDismiss: InjectedModalProps['onDismiss']\r\n}\r\n\r\nconst WalletInfo: React.FC<WalletInfoProps> = ({ hasLowBnbBalance, onDismiss }) => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const { balance, fetchStatus } = useGetBnbBalance()\r\n  const { balance: cakeBalance, fetchStatus: cakeFetchStatus } = useTokenBalance(tokens.cake.address)\r\n  const { logout } = useAuth()\r\n\r\n  const handleLogout = () => {\r\n    onDismiss()\r\n    logout()\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Text color=\"secondary\" fontSize=\"12px\" textTransform=\"uppercase\" fontWeight=\"bold\" mb=\"8px\">\r\n        {t('Your Address')}\r\n      </Text>\r\n      <CopyAddress account={account} mb=\"24px\" />\r\n      {hasLowBnbBalance && (\r\n        <Message variant=\"warning\" mb=\"24px\">\r\n          <Box>\r\n            <Text fontWeight=\"bold\">{t('BNB Balance Low')}</Text>\r\n            <Text as=\"p\">{t('You need BNB for transaction fees.')}</Text>\r\n          </Box>\r\n        </Message>\r\n      )}\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\">\r\n        <Text color=\"textSubtle\">{t('BNB Balance')}</Text>\r\n        {fetchStatus !== FetchStatus.SUCCESS ? (\r\n          <Skeleton height=\"22px\" width=\"60px\" />\r\n        ) : (\r\n          <Text>{formatBigNumber(balance, 6)}</Text>\r\n        )}\r\n      </Flex>\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"24px\">\r\n        <Text color=\"textSubtle\">{t('CAKE Balance')}</Text>\r\n        {cakeFetchStatus !== FetchStatus.SUCCESS ? (\r\n          <Skeleton height=\"22px\" width=\"60px\" />\r\n        ) : (\r\n          <Text>{getFullDisplayBalance(cakeBalance, 18, 3)}</Text>\r\n        )}\r\n      </Flex>\r\n      <Flex alignItems=\"center\" justifyContent=\"end\" mb=\"24px\">\r\n        <LinkExternal href={getBscScanLink(account, 'address')}>{t('View on BscScan')}</LinkExternal>\r\n      </Flex>\r\n      <Button variant=\"secondary\" width=\"100%\" onClick={handleLogout}>\r\n        {t('Disconnect Wallet')}\r\n      </Button>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default WalletInfo\r\n","import { TransactionResponse } from '@ethersproject/providers'\r\nimport { useCallback, useMemo } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\r\nimport { AppDispatch, AppState } from '../index'\r\nimport { addTransaction } from './actions'\r\nimport { TransactionDetails } from './reducer'\r\n\r\n// helper that can take a ethers library transaction response and add it to the list of transactions\r\nexport function useTransactionAdder(): (\r\n  response: TransactionResponse,\r\n  customData?: {\r\n    summary?: string\r\n    approval?: { tokenAddress: string; spender: string }\r\n    claim?: { recipient: string }\r\n  },\r\n) => void {\r\n  const { chainId, account } = useActiveWeb3React()\r\n  const dispatch = useDispatch<AppDispatch>()\r\n\r\n  return useCallback(\r\n    (\r\n      response: TransactionResponse,\r\n      {\r\n        summary,\r\n        approval,\r\n        claim,\r\n      }: { summary?: string; claim?: { recipient: string }; approval?: { tokenAddress: string; spender: string } } = {},\r\n    ) => {\r\n      if (!account) return\r\n      if (!chainId) return\r\n\r\n      const { hash } = response\r\n      if (!hash) {\r\n        throw Error('No transaction hash found.')\r\n      }\r\n      dispatch(addTransaction({ hash, from: account, chainId, approval, summary, claim }))\r\n    },\r\n    [dispatch, chainId, account],\r\n  )\r\n}\r\n\r\n// returns all the transactions for the current chain\r\nexport function useAllTransactions(): { [txHash: string]: TransactionDetails } {\r\n  const { chainId } = useActiveWeb3React()\r\n\r\n  const state = useSelector<AppState, AppState['transactions']>((s) => s.transactions)\r\n\r\n  return chainId ? state[chainId] ?? {} : {}\r\n}\r\n\r\nexport function useIsTransactionPending(transactionHash?: string): boolean {\r\n  const transactions = useAllTransactions()\r\n\r\n  if (!transactionHash || !transactions[transactionHash]) return false\r\n\r\n  return !transactions[transactionHash].receipt\r\n}\r\n\r\n/**\r\n * Returns whether a transaction happened in the last day (86400 seconds * 1000 milliseconds / second)\r\n * @param tx to check for recency\r\n */\r\nexport function isTransactionRecent(tx: TransactionDetails): boolean {\r\n  return new Date().getTime() - tx.addedTime < 86_400_000\r\n}\r\n\r\n// returns whether a token has a pending approval transaction\r\nexport function useHasPendingApproval(tokenAddress: string | undefined, spender: string | undefined): boolean {\r\n  const allTransactions = useAllTransactions()\r\n  return useMemo(\r\n    () =>\r\n      typeof tokenAddress === 'string' &&\r\n      typeof spender === 'string' &&\r\n      Object.keys(allTransactions).some((hash) => {\r\n        const tx = allTransactions[hash]\r\n        if (!tx) return false\r\n        if (tx.receipt) {\r\n          return false\r\n        }\r\n        const { approval } = tx\r\n        if (!approval) return false\r\n        return approval.spender === spender && approval.tokenAddress === tokenAddress && isTransactionRecent(tx)\r\n      }),\r\n    [allTransactions, spender, tokenAddress],\r\n  )\r\n}\r\n","import React from 'react'\r\nimport { BlockIcon, CheckmarkCircleIcon, Flex, Link, OpenNewIcon, RefreshIcon } from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\nimport { TransactionDetails } from 'state/transactions/reducer'\r\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\r\nimport { getBscScanLink } from 'utils'\r\n\r\ninterface TransactionRowProps {\r\n  txn: TransactionDetails\r\n}\r\n\r\nconst TxnIcon = styled(Flex)`\r\n  align-items: center;\r\n  flex: none;\r\n  width: 24px;\r\n`\r\n\r\nconst Summary = styled.div`\r\n  flex: 1;\r\n  padding: 0 8px;\r\n`\r\n\r\nconst TxnLink = styled(Link)`\r\n  align-items: center;\r\n  color: ${({ theme }) => theme.colors.text};\r\n  display: flex;\r\n  margin-bottom: 16px;\r\n  width: 100%;\r\n\r\n  &:hover {\r\n    text-decoration: none;\r\n  }\r\n`\r\n\r\nconst renderIcon = (txn: TransactionDetails) => {\r\n  if (!txn.receipt) {\r\n    return <RefreshIcon spin width=\"24px\" />\r\n  }\r\n\r\n  return txn.receipt?.status === 1 || typeof txn.receipt?.status === 'undefined' ? (\r\n    <CheckmarkCircleIcon color=\"success\" width=\"24px\" />\r\n  ) : (\r\n    <BlockIcon color=\"failure\" width=\"24px\" />\r\n  )\r\n}\r\n\r\nconst TransactionRow: React.FC<TransactionRowProps> = ({ txn }) => {\r\n  const { chainId } = useActiveWeb3React()\r\n\r\n  if (!txn) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <TxnLink href={getBscScanLink(txn.hash, 'transaction', chainId)} external>\r\n      <TxnIcon>{renderIcon(txn)}</TxnIcon>\r\n      <Summary>{txn.summary ?? txn.hash}</Summary>\r\n      <TxnIcon>\r\n        <OpenNewIcon width=\"24px\" color=\"primary\" />\r\n      </TxnIcon>\r\n    </TxnLink>\r\n  )\r\n}\r\n\r\nexport default TransactionRow\r\n","import React, { useState } from 'react'\r\nimport {\r\n  ButtonMenu,\r\n  ButtonMenuItem,\r\n  CloseIcon,\r\n  Heading,\r\n  IconButton,\r\n  InjectedModalProps,\r\n  ModalBody,\r\n  ModalContainer,\r\n  ModalHeader as UIKitModalHeader,\r\n  ModalTitle,\r\n} from '@pancakeswap/uikit'\r\nimport { parseUnits } from 'ethers/lib/utils'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport styled from 'styled-components'\r\nimport { FetchStatus, useGetBnbBalance } from 'hooks/useTokenBalance'\r\nimport WalletInfo from './WalletInfo'\r\nimport WalletTransactions from './WalletTransactions'\r\n\r\nexport enum WalletView {\r\n  WALLET_INFO,\r\n  TRANSACTIONS,\r\n}\r\n\r\ninterface WalletModalProps extends InjectedModalProps {\r\n  initialView?: WalletView\r\n}\r\n\r\nexport const LOW_BNB_BALANCE = parseUnits('2', 'gwei')\r\n\r\nconst ModalHeader = styled(UIKitModalHeader)`\r\n  background: ${({ theme }) => theme.colors.gradients.bubblegum};\r\n`\r\n\r\nconst Tabs = styled.div`\r\n  background-color: ${({ theme }) => theme.colors.dropdown};\r\n  border-bottom: 1px solid ${({ theme }) => theme.colors.cardBorder};\r\n  padding: 16px 24px;\r\n`\r\n\r\nconst WalletModal: React.FC<WalletModalProps> = ({ initialView = WalletView.WALLET_INFO, onDismiss }) => {\r\n  const [view, setView] = useState(initialView)\r\n  const { t } = useTranslation()\r\n  const { balance, fetchStatus } = useGetBnbBalance()\r\n  const hasLowBnbBalance = fetchStatus === FetchStatus.SUCCESS && balance.lte(LOW_BNB_BALANCE)\r\n\r\n  const handleClick = (newIndex: number) => {\r\n    setView(newIndex)\r\n  }\r\n\r\n  return (\r\n    <ModalContainer title={t('Welcome!')} minWidth=\"320px\">\r\n      <ModalHeader>\r\n        <ModalTitle>\r\n          <Heading>{t('Your Wallet')}</Heading>\r\n        </ModalTitle>\r\n        <IconButton variant=\"text\" onClick={onDismiss}>\r\n          <CloseIcon width=\"24px\" color=\"text\" />\r\n        </IconButton>\r\n      </ModalHeader>\r\n      <Tabs>\r\n        <ButtonMenu scale=\"sm\" variant=\"subtle\" onItemClick={handleClick} activeIndex={view} fullWidth>\r\n          <ButtonMenuItem>{t('Wallet')}</ButtonMenuItem>\r\n          <ButtonMenuItem>{t('Transactions')}</ButtonMenuItem>\r\n        </ButtonMenu>\r\n      </Tabs>\r\n      <ModalBody p=\"24px\" maxWidth=\"400px\" width=\"100%\">\r\n        {view === WalletView.WALLET_INFO && <WalletInfo hasLowBnbBalance={hasLowBnbBalance} onDismiss={onDismiss} />}\r\n        {view === WalletView.TRANSACTIONS && <WalletTransactions />}\r\n      </ModalBody>\r\n    </ModalContainer>\r\n  )\r\n}\r\n\r\nexport default WalletModal\r\n","import React from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { Box, Button, Flex, Text } from '@pancakeswap/uikit'\r\nimport { AppDispatch } from 'state'\r\nimport { isTransactionRecent, useAllTransactions } from 'state/transactions/hooks'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\r\nimport { clearAllTransactions } from 'state/transactions/actions'\r\nimport { orderBy } from 'lodash'\r\nimport TransactionRow from './TransactionRow'\r\n\r\nconst WalletTransactions: React.FC = () => {\r\n  const { chainId } = useActiveWeb3React()\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const { t } = useTranslation()\r\n  const allTransactions = useAllTransactions()\r\n  const sortedTransactions = orderBy(Object.values(allTransactions).filter(isTransactionRecent), 'addedTime', 'desc')\r\n\r\n  const handleClearAll = () => {\r\n    if (chainId) {\r\n      dispatch(clearAllTransactions({ chainId }))\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Box minHeight=\"120px\">\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"24px\">\r\n        <Text color=\"secondary\" fontSize=\"12px\" textTransform=\"uppercase\" fontWeight=\"bold\">\r\n          {t('Recent Transactions')}\r\n        </Text>\r\n        {sortedTransactions.length > 0 && (\r\n          <Button scale=\"sm\" onClick={handleClearAll} variant=\"text\" px=\"0\">\r\n            {t('Clear all')}\r\n          </Button>\r\n        )}\r\n      </Flex>\r\n      {sortedTransactions.length > 0 ? (\r\n        sortedTransactions.map((txn) => <TransactionRow key={txn.hash} txn={txn} />)\r\n      ) : (\r\n        <Text textAlign=\"center\">{t('No recent transactions')}</Text>\r\n      )}\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default WalletTransactions\r\n","import React from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport {\r\n  Flex,\r\n  LogoutIcon,\r\n  useModal,\r\n  UserMenu as UIKitUserMenu,\r\n  UserMenuDivider,\r\n  UserMenuItem,\r\n} from '@pancakeswap/uikit'\r\nimport history from 'routerHistory'\r\nimport useAuth from 'hooks/useAuth'\r\nimport { useProfile } from 'state/profile/hooks'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport { FetchStatus, useGetBnbBalance } from 'hooks/useTokenBalance'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { nftsBaseUrl } from 'views/Nft/market/constants'\r\nimport WalletModal, { WalletView, LOW_BNB_BALANCE } from './WalletModal'\r\nimport ProfileUserMenuItem from './ProfileUserMenutItem'\r\nimport WalletUserMenuItem from './WalletUserMenuItem'\r\n\r\nconst UserMenu = () => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const { logout } = useAuth()\r\n  const { balance, fetchStatus } = useGetBnbBalance()\r\n  const { isInitialized, isLoading, profile } = useProfile()\r\n  const [onPresentWalletModal] = useModal(<WalletModal initialView={WalletView.WALLET_INFO} />)\r\n  const [onPresentTransactionModal] = useModal(<WalletModal initialView={WalletView.TRANSACTIONS} />)\r\n  const hasProfile = isInitialized && !!profile\r\n  const avatarSrc = profile?.nft?.image?.thumbnail\r\n  const hasLowBnbBalance = fetchStatus === FetchStatus.SUCCESS && balance.lte(LOW_BNB_BALANCE)\r\n\r\n  if (!account) {\r\n    return <ConnectWalletButton scale=\"sm\" />\r\n  }\r\n\r\n  return (\r\n    <UIKitUserMenu account={account} avatarSrc={avatarSrc}>\r\n      {/*\r\n      <WalletUserMenuItem hasLowBnbBalance={hasLowBnbBalance} onPresentWalletModal={onPresentWalletModal} />\r\n      <UserMenuItem as=\"button\" onClick={onPresentTransactionModal}>\r\n        {t('Transactions')}\r\n      </UserMenuItem>\r\n      <UserMenuDivider />\r\n      <UserMenuItem as=\"button\" onClick={() => history.push(`${nftsBaseUrl}/profile/${account.toLowerCase()}`)}>\r\n        {t('Your NFTs')}\r\n      </UserMenuItem>\r\n      <ProfileUserMenuItem isLoading={isLoading} hasProfile={hasProfile} />\r\n      <UserMenuDivider />\r\n      */}\r\n      <UserMenuItem as=\"button\" onClick={logout}>\r\n        <Flex alignItems=\"center\" justifyContent=\"space-between\" width=\"100%\">\r\n          {t('Disconnect')}\r\n          <LogoutIcon />\r\n        </Flex>\r\n      </UserMenuItem>\r\n    </UIKitUserMenu>\r\n  )\r\n}\r\n\r\nexport default UserMenu\r\n","import { CurrencyAmount, Fraction, JSBI, Percent, Price, TokenAmount, Trade } from '@pancakeswap/sdk'\r\nimport {\r\n  BLOCKED_PRICE_IMPACT_NON_EXPERT,\r\n  ALLOWED_PRICE_IMPACT_HIGH,\r\n  ALLOWED_PRICE_IMPACT_LOW,\r\n  ALLOWED_PRICE_IMPACT_MEDIUM,\r\n} from '../config/constants'\r\n\r\nimport { Field } from '../state/swap/actions'\r\nimport { basisPointsToPercent } from './index'\r\n\r\nconst BASE_FEE = new Percent(JSBI.BigInt(25), JSBI.BigInt(10000))\r\nconst ONE_HUNDRED_PERCENT = new Percent(JSBI.BigInt(10000), JSBI.BigInt(10000))\r\nconst INPUT_FRACTION_AFTER_FEE = ONE_HUNDRED_PERCENT.subtract(BASE_FEE)\r\n\r\n// computes price breakdown for the trade\r\nexport function computeTradePriceBreakdown(trade?: Trade | null): {\r\n  priceImpactWithoutFee: Percent | undefined\r\n  realizedLPFee: CurrencyAmount | undefined | null\r\n} {\r\n  // for each hop in our trade, take away the x*y=k price impact from 0.3% fees\r\n  // e.g. for 3 tokens/2 hops: 1 - ((1 - .03) * (1-.03))\r\n  const realizedLPFee = !trade\r\n    ? undefined\r\n    : ONE_HUNDRED_PERCENT.subtract(\r\n        trade.route.pairs.reduce<Fraction>(\r\n          (currentFee: Fraction): Fraction => currentFee.multiply(INPUT_FRACTION_AFTER_FEE),\r\n          ONE_HUNDRED_PERCENT,\r\n        ),\r\n      )\r\n\r\n  // remove lp fees from price impact\r\n  const priceImpactWithoutFeeFraction = trade && realizedLPFee ? trade.priceImpact.subtract(realizedLPFee) : undefined\r\n\r\n  // the x*y=k impact\r\n  const priceImpactWithoutFeePercent = priceImpactWithoutFeeFraction\r\n    ? new Percent(priceImpactWithoutFeeFraction?.numerator, priceImpactWithoutFeeFraction?.denominator)\r\n    : undefined\r\n\r\n  // the amount of the input that accrues to LPs\r\n  const realizedLPFeeAmount =\r\n    realizedLPFee &&\r\n    trade &&\r\n    (trade.inputAmount instanceof TokenAmount\r\n      ? new TokenAmount(trade.inputAmount.token, realizedLPFee.multiply(trade.inputAmount.raw).quotient)\r\n      : CurrencyAmount.ether(realizedLPFee.multiply(trade.inputAmount.raw).quotient))\r\n\r\n  return { priceImpactWithoutFee: priceImpactWithoutFeePercent, realizedLPFee: realizedLPFeeAmount }\r\n}\r\n\r\n// computes the minimum amount out and maximum amount in for a trade given a user specified allowed slippage in bips\r\nexport function computeSlippageAdjustedAmounts(\r\n  trade: Trade | undefined,\r\n  allowedSlippage: number,\r\n): { [field in Field]?: CurrencyAmount } {\r\n  const pct = basisPointsToPercent(allowedSlippage)\r\n  return {\r\n    [Field.INPUT]: trade?.maximumAmountIn(pct),\r\n    [Field.OUTPUT]: trade?.minimumAmountOut(pct),\r\n  }\r\n}\r\n\r\nexport function warningSeverity(priceImpact: Percent | undefined): 0 | 1 | 2 | 3 | 4 {\r\n  if (!priceImpact?.lessThan(BLOCKED_PRICE_IMPACT_NON_EXPERT)) return 4\r\n  if (!priceImpact?.lessThan(ALLOWED_PRICE_IMPACT_HIGH)) return 3\r\n  if (!priceImpact?.lessThan(ALLOWED_PRICE_IMPACT_MEDIUM)) return 2\r\n  if (!priceImpact?.lessThan(ALLOWED_PRICE_IMPACT_LOW)) return 1\r\n  return 0\r\n}\r\n\r\nexport function formatExecutionPrice(trade?: Trade, inverted?: boolean): string {\r\n  if (!trade) {\r\n    return ''\r\n  }\r\n  return inverted\r\n    ? `${trade.executionPrice.invert().toSignificant(6)} ${trade.inputAmount.currency.symbol} / ${\r\n        trade.outputAmount.currency.symbol\r\n      }`\r\n    : `${trade.executionPrice.toSignificant(6)} ${trade.outputAmount.currency.symbol} / ${\r\n        trade.inputAmount.currency.symbol\r\n      }`\r\n}\r\n\r\n/**\r\n * Helper to multiply a Price object by an arbitrary amount\r\n */\r\nexport const multiplyPriceByAmount = (price: Price, amount: number, significantDigits = 18) => {\r\n  if (!price) {\r\n    return 0\r\n  }\r\n\r\n  return parseFloat(price.toSignificant(significantDigits)) * amount\r\n}\r\n","export type PairDataNormalized = {\r\n  time: number\r\n  token0Id: string\r\n  token1Id: string\r\n  reserve0: number\r\n  reserve1: number\r\n}[]\r\n\r\nexport type DerivedPairDataNormalized = {\r\n  time: number\r\n  token0Id: string\r\n  token1Id: string\r\n  token0DerivedBNB: number\r\n  token1DerivedBNB: number\r\n}[]\r\n\r\nexport type PairPricesNormalized = {\r\n  time: Date\r\n  value: number\r\n}[]\r\n\r\nexport enum PairDataTimeWindowEnum {\r\n  DAY,\r\n  WEEK,\r\n  MONTH,\r\n  YEAR,\r\n}\r\n","import { gql } from 'graphql-request'\r\n\r\nconst lastPairDayId = gql`\r\n  query lastPairDayId($pairId: String) {\r\n    pairDayDatas(first: 1, where: { pairAddress: $pairId }, orderBy: date, orderDirection: desc) {\r\n      id\r\n    }\r\n  }\r\n`\r\nexport default lastPairDayId\r\n","import { gql } from 'graphql-request'\r\n\r\nconst pairHourDatas = gql`\r\n  query pairHourDatas($pairId: String, $first: Int) {\r\n    pairHourDatas(first: $first, where: { pair: $pairId }, orderBy: hourStartUnix, orderDirection: desc) {\r\n      id\r\n      hourStartUnix\r\n      reserve0\r\n      reserve1\r\n      reserveUSD\r\n      pair {\r\n        token0 {\r\n          id\r\n        }\r\n        token1 {\r\n          id\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\nexport default pairHourDatas\r\n","import { gql } from 'graphql-request'\r\n\r\nconst pairDayDatasByIdsQuery = gql`\r\n  query pairDayDatasByIdsQuery($pairIds: [String]) {\r\n    pairDayDatas(where: { id_in: $pairIds }, orderBy: date, orderDirection: desc) {\r\n      id\r\n      date\r\n      reserve0\r\n      reserve1\r\n      reserveUSD\r\n      pairAddress {\r\n        token0 {\r\n          id\r\n        }\r\n        token1 {\r\n          id\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\nexport default pairDayDatasByIdsQuery\r\n","import { INFO_CLIENT } from 'config/constants/endpoints'\r\nimport { PairDataTimeWindowEnum } from '../types'\r\n\r\n// Specifies the amount of data points to query for specific time window\r\nexport const timeWindowIdsCountMapping: Record<PairDataTimeWindowEnum, number> = {\r\n  [PairDataTimeWindowEnum.DAY]: 24,\r\n  [PairDataTimeWindowEnum.WEEK]: 28,\r\n  [PairDataTimeWindowEnum.MONTH]: 30,\r\n  [PairDataTimeWindowEnum.YEAR]: 24,\r\n}\r\n\r\n// How many StreamingFast ids to skip when querying the data\r\nexport const timeWindowGapMapping: Record<PairDataTimeWindowEnum, number | null> = {\r\n  [PairDataTimeWindowEnum.DAY]: null,\r\n  [PairDataTimeWindowEnum.WEEK]: 6, // Each datapoint 6 hours apart\r\n  [PairDataTimeWindowEnum.MONTH]: 1, // Each datapoint 1 day apart\r\n  [PairDataTimeWindowEnum.YEAR]: 15, // Each datapoint 15 days apart\r\n}\r\n\r\n// Extra headers\r\n// Mostly for dev environment\r\n// No production env check since production preview might also need them\r\nexport const getHeaders = (endpoint: string) => {\r\n  if (endpoint === INFO_CLIENT) {\r\n    return { 'X-Sf': process.env.REACT_APP_SF_HEADER }\r\n  }\r\n  return undefined\r\n}\r\n","import { gql } from 'graphql-request'\r\n\r\nconst pairDayDatas = gql`\r\n  query pairDayDatas($pairId: String, $first: Int) {\r\n    pairDayDatas(first: $first, where: { pairAddress: $pairId }, orderBy: date, orderDirection: desc) {\r\n      id\r\n      date\r\n      reserve0\r\n      reserve1\r\n      reserveUSD\r\n      pairAddress {\r\n        token0 {\r\n          id\r\n        }\r\n        token1 {\r\n          id\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\nexport default pairDayDatas\r\n","import { gql } from 'graphql-request'\r\n\r\nconst pairHourDatasByIds = gql`\r\n  query pairHourDatasByIds($pairIds: [String]) {\r\n    pairHourDatas(where: { id_in: $pairIds }, orderBy: hourStartUnix, orderDirection: desc) {\r\n      id\r\n      hourStartUnix\r\n      reserve0\r\n      reserve1\r\n      reserveUSD\r\n      pair {\r\n        token0 {\r\n          id\r\n        }\r\n        token1 {\r\n          id\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\nexport default pairHourDatasByIds\r\n","import { gql } from 'graphql-request'\r\n\r\nconst lastPairHourId = gql`\r\n  query lastPairHourId($pairId: String) {\r\n    pairHourDatas(first: 1, where: { pair: $pairId }, orderBy: hourStartUnix, orderDirection: desc) {\r\n      id\r\n    }\r\n  }\r\n`\r\nexport default lastPairHourId\r\n","import { parseUnits } from '@ethersproject/units'\r\nimport { Currency, CurrencyAmount, ETHER, JSBI, Token, TokenAmount, Trade } from '@pancakeswap/sdk'\r\nimport { ParsedQs } from 'qs'\r\nimport { useCallback, useEffect, useMemo, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport useENS from 'hooks/ENS/useENS'\r\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\r\nimport { useCurrency } from 'hooks/Tokens'\r\nimport { useTradeExactIn, useTradeExactOut } from 'hooks/Trades'\r\nimport useParsedQueryString from 'hooks/useParsedQueryString'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { isAddress } from 'utils'\r\nimport { computeSlippageAdjustedAmounts } from 'utils/prices'\r\nimport getLpAddress from 'utils/getLpAddress'\r\nimport { getTokenAddress } from 'views/Swap/components/Chart/utils'\r\nimport { AppDispatch, AppState } from '../index'\r\nimport { useCurrencyBalances } from '../wallet/hooks'\r\nimport {\r\n  Field,\r\n  replaceSwapState,\r\n  selectCurrency,\r\n  setRecipient,\r\n  switchCurrencies,\r\n  typeInput,\r\n  updateDerivedPairData,\r\n  updatePairData,\r\n} from './actions'\r\nimport { SwapState } from './reducer'\r\nimport { useUserSlippageTolerance } from '../user/hooks'\r\nimport fetchPairPriceData from './fetch/fetchPairPriceData'\r\nimport {\r\n  normalizeChartData,\r\n  normalizeDerivedChartData,\r\n  normalizeDerivedPairDataByActiveToken,\r\n  normalizePairDataByActiveToken,\r\n} from './normalizers'\r\nimport { PairDataTimeWindowEnum } from './types'\r\nimport { derivedPairByDataIdSelector, pairByDataIdSelector } from './selectors'\r\nimport { DEFAULT_INPUT_CURRENCY, DEFAULT_OUTPUT_CURRENCY } from './constants'\r\nimport fetchDerivedPriceData from './fetch/fetchDerivedPriceData'\r\nimport { pairHasEnoughLiquidity } from './fetch/utils'\r\n\r\nexport function useSwapState(): AppState['swap'] {\r\n  return useSelector<AppState, AppState['swap']>((state) => state.swap)\r\n}\r\n\r\nexport function useSwapActionHandlers(): {\r\n  onCurrencySelection: (field: Field, currency: Currency) => void\r\n  onSwitchTokens: () => void\r\n  onUserInput: (field: Field, typedValue: string) => void\r\n  onChangeRecipient: (recipient: string | null) => void\r\n} {\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const onCurrencySelection = useCallback(\r\n    (field: Field, currency: Currency) => {\r\n      dispatch(\r\n        selectCurrency({\r\n          field,\r\n          currencyId: currency instanceof Token ? currency.address : currency === ETHER ? 'BNB' : '',\r\n        }),\r\n      )\r\n    },\r\n    [dispatch],\r\n  )\r\n\r\n  const onSwitchTokens = useCallback(() => {\r\n    dispatch(switchCurrencies())\r\n  }, [dispatch])\r\n\r\n  const onUserInput = useCallback(\r\n    (field: Field, typedValue: string) => {\r\n      dispatch(typeInput({ field, typedValue }))\r\n    },\r\n    [dispatch],\r\n  )\r\n\r\n  const onChangeRecipient = useCallback(\r\n    (recipient: string | null) => {\r\n      dispatch(setRecipient({ recipient }))\r\n    },\r\n    [dispatch],\r\n  )\r\n\r\n  return {\r\n    onSwitchTokens,\r\n    onCurrencySelection,\r\n    onUserInput,\r\n    onChangeRecipient,\r\n  }\r\n}\r\n\r\n// try to parse a user entered amount for a given token\r\nexport function tryParseAmount(value?: string, currency?: Currency): CurrencyAmount | undefined {\r\n  if (!value || !currency) {\r\n    return undefined\r\n  }\r\n  try {\r\n    const typedValueParsed = parseUnits(value, currency.decimals).toString()\r\n    if (typedValueParsed !== '0') {\r\n      return currency instanceof Token\r\n        ? new TokenAmount(currency, JSBI.BigInt(typedValueParsed))\r\n        : CurrencyAmount.ether(JSBI.BigInt(typedValueParsed))\r\n    }\r\n  } catch (error) {\r\n    // should fail if the user specifies too many decimal places of precision (or maybe exceed max uint?)\r\n    console.debug(`Failed to parse input amount: \"${value}\"`, error)\r\n  }\r\n  // necessary for all paths to return a value\r\n  return undefined\r\n}\r\n\r\nconst BAD_RECIPIENT_ADDRESSES: string[] = [\r\n  '0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f', // v2 factory\r\n  '0xf164fC0Ec4E93095b804a4795bBe1e041497b92a', // v2 router 01\r\n  '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D', // v2 router 02\r\n]\r\n\r\n/**\r\n * Returns true if any of the pairs or tokens in a trade have the given checksummed address\r\n * @param trade to check for the given address\r\n * @param checksummedAddress address to check in the pairs and tokens\r\n */\r\nfunction involvesAddress(trade: Trade, checksummedAddress: string): boolean {\r\n  return (\r\n    trade.route.path.some((token) => token.address === checksummedAddress) ||\r\n    trade.route.pairs.some((pair) => pair.liquidityToken.address === checksummedAddress)\r\n  )\r\n}\r\n\r\n// Get swap price for single token disregarding slippage and price impact\r\nexport function useSingleTokenSwapInfo(): { [key: string]: number } {\r\n  const {\r\n    [Field.INPUT]: { currencyId: inputCurrencyId },\r\n    [Field.OUTPUT]: { currencyId: outputCurrencyId },\r\n  } = useSwapState()\r\n\r\n  const inputCurrency = useCurrency(inputCurrencyId)\r\n  const outputCurrency = useCurrency(outputCurrencyId)\r\n  const token0Address = getTokenAddress(inputCurrencyId)\r\n  const token1Address = getTokenAddress(outputCurrencyId)\r\n\r\n  const parsedAmount = tryParseAmount('1', inputCurrency ?? undefined)\r\n\r\n  const bestTradeExactIn = useTradeExactIn(parsedAmount, outputCurrency ?? undefined)\r\n  if (!inputCurrency || !outputCurrency || !bestTradeExactIn) {\r\n    return null\r\n  }\r\n\r\n  const inputTokenPrice = parseFloat(bestTradeExactIn?.executionPrice?.toSignificant(6))\r\n  const outputTokenPrice = 1 / inputTokenPrice\r\n\r\n  return {\r\n    [token0Address]: inputTokenPrice,\r\n    [token1Address]: outputTokenPrice,\r\n  }\r\n}\r\n\r\n// from the current swap inputs, compute the best trade and return it.\r\nexport function useDerivedSwapInfo(): {\r\n  currencies: { [field in Field]?: Currency }\r\n  currencyBalances: { [field in Field]?: CurrencyAmount }\r\n  parsedAmount: CurrencyAmount | undefined\r\n  v2Trade: Trade | undefined\r\n  inputError?: string\r\n} {\r\n  const { account } = useActiveWeb3React()\r\n  const { t } = useTranslation()\r\n\r\n  const {\r\n    independentField,\r\n    typedValue,\r\n    [Field.INPUT]: { currencyId: inputCurrencyId },\r\n    [Field.OUTPUT]: { currencyId: outputCurrencyId },\r\n    recipient,\r\n  } = useSwapState()\r\n\r\n  const inputCurrency = useCurrency(inputCurrencyId)\r\n  const outputCurrency = useCurrency(outputCurrencyId)\r\n  const recipientLookup = useENS(recipient ?? undefined)\r\n  const to: string | null = (recipient === null ? account : recipientLookup.address) ?? null\r\n\r\n  const relevantTokenBalances = useCurrencyBalances(account ?? undefined, [\r\n    inputCurrency ?? undefined,\r\n    outputCurrency ?? undefined,\r\n  ])\r\n\r\n  const isExactIn: boolean = independentField === Field.INPUT\r\n  const parsedAmount = tryParseAmount(typedValue, (isExactIn ? inputCurrency : outputCurrency) ?? undefined)\r\n\r\n  const bestTradeExactIn = useTradeExactIn(isExactIn ? parsedAmount : undefined, outputCurrency ?? undefined)\r\n  const bestTradeExactOut = useTradeExactOut(inputCurrency ?? undefined, !isExactIn ? parsedAmount : undefined)\r\n\r\n  const v2Trade = isExactIn ? bestTradeExactIn : bestTradeExactOut\r\n\r\n  const currencyBalances = {\r\n    [Field.INPUT]: relevantTokenBalances[0],\r\n    [Field.OUTPUT]: relevantTokenBalances[1],\r\n  }\r\n\r\n  const currencies: { [field in Field]?: Currency } = {\r\n    [Field.INPUT]: inputCurrency ?? undefined,\r\n    [Field.OUTPUT]: outputCurrency ?? undefined,\r\n  }\r\n\r\n  let inputError: string | undefined\r\n  if (!account) {\r\n    inputError = t('Connect Wallet')\r\n  }\r\n\r\n  if (!parsedAmount) {\r\n    inputError = inputError ?? t('Enter an amount')\r\n  }\r\n\r\n  if (!currencies[Field.INPUT] || !currencies[Field.OUTPUT]) {\r\n    inputError = inputError ?? t('Select a token')\r\n  }\r\n\r\n  const formattedTo = isAddress(to)\r\n  if (!to || !formattedTo) {\r\n    inputError = inputError ?? t('Enter a recipient')\r\n  } else if (\r\n    BAD_RECIPIENT_ADDRESSES.indexOf(formattedTo) !== -1 ||\r\n    (bestTradeExactIn && involvesAddress(bestTradeExactIn, formattedTo)) ||\r\n    (bestTradeExactOut && involvesAddress(bestTradeExactOut, formattedTo))\r\n  ) {\r\n    inputError = inputError ?? t('Invalid recipient')\r\n  }\r\n\r\n  const [allowedSlippage] = useUserSlippageTolerance()\r\n\r\n  const slippageAdjustedAmounts = v2Trade && allowedSlippage && computeSlippageAdjustedAmounts(v2Trade, allowedSlippage)\r\n\r\n  // compare input balance to max input based on version\r\n  const [balanceIn, amountIn] = [\r\n    currencyBalances[Field.INPUT],\r\n    slippageAdjustedAmounts ? slippageAdjustedAmounts[Field.INPUT] : null,\r\n  ]\r\n\r\n  if (balanceIn && amountIn && balanceIn.lessThan(amountIn)) {\r\n    inputError = t('Insufficient %symbol% balance', { symbol: amountIn.currency.symbol })\r\n  }\r\n\r\n  return {\r\n    currencies,\r\n    currencyBalances,\r\n    parsedAmount,\r\n    v2Trade: v2Trade ?? undefined,\r\n    inputError,\r\n  }\r\n}\r\n\r\nfunction parseCurrencyFromURLParameter(urlParam: any): string {\r\n  if (typeof urlParam === 'string') {\r\n    const valid = isAddress(urlParam)\r\n    if (valid) return valid\r\n    if (urlParam.toUpperCase() === 'BNB') return 'BNB'\r\n    if (valid === false) return 'BNB'\r\n  }\r\n  return ''\r\n}\r\n\r\nfunction parseTokenAmountURLParameter(urlParam: any): string {\r\n  // eslint-disable-next-line no-restricted-globals\r\n  return typeof urlParam === 'string' && !isNaN(parseFloat(urlParam)) ? urlParam : ''\r\n}\r\n\r\nfunction parseIndependentFieldURLParameter(urlParam: any): Field {\r\n  return typeof urlParam === 'string' && urlParam.toLowerCase() === 'output' ? Field.OUTPUT : Field.INPUT\r\n}\r\n\r\nconst ENS_NAME_REGEX = /^[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)?$/\r\nconst ADDRESS_REGEX = /^0x[a-fA-F0-9]{40}$/\r\nfunction validatedRecipient(recipient: any): string | null {\r\n  if (typeof recipient !== 'string') return null\r\n  const address = isAddress(recipient)\r\n  if (address) return address\r\n  if (ENS_NAME_REGEX.test(recipient)) return recipient\r\n  if (ADDRESS_REGEX.test(recipient)) return recipient\r\n  return null\r\n}\r\n\r\nexport function queryParametersToSwapState(parsedQs: ParsedQs): SwapState {\r\n  let inputCurrency = parseCurrencyFromURLParameter(parsedQs.inputCurrency) || DEFAULT_INPUT_CURRENCY\r\n  let outputCurrency = parseCurrencyFromURLParameter(parsedQs.outputCurrency) || DEFAULT_OUTPUT_CURRENCY\r\n  if (inputCurrency === outputCurrency) {\r\n    if (typeof parsedQs.outputCurrency === 'string') {\r\n      inputCurrency = ''\r\n    } else {\r\n      outputCurrency = ''\r\n    }\r\n  }\r\n\r\n  const recipient = validatedRecipient(parsedQs.recipient)\r\n\r\n  return {\r\n    [Field.INPUT]: {\r\n      currencyId: inputCurrency,\r\n    },\r\n    [Field.OUTPUT]: {\r\n      currencyId: outputCurrency,\r\n    },\r\n    typedValue: parseTokenAmountURLParameter(parsedQs.exactAmount),\r\n    independentField: parseIndependentFieldURLParameter(parsedQs.exactField),\r\n    recipient,\r\n    pairDataById: {},\r\n    derivedPairDataById: {},\r\n  }\r\n}\r\n\r\n// updates the swap state to use the defaults for a given network\r\nexport function useDefaultsFromURLSearch():\r\n  | { inputCurrencyId: string | undefined; outputCurrencyId: string | undefined }\r\n  | undefined {\r\n  const { chainId } = useActiveWeb3React()\r\n  const dispatch = useDispatch<AppDispatch>()\r\n  const parsedQs = useParsedQueryString()\r\n  const [result, setResult] = useState<\r\n    { inputCurrencyId: string | undefined; outputCurrencyId: string | undefined } | undefined\r\n  >()\r\n\r\n  useEffect(() => {\r\n    if (!chainId) return\r\n    const parsed = queryParametersToSwapState(parsedQs)\r\n\r\n    dispatch(\r\n      replaceSwapState({\r\n        typedValue: parsed.typedValue,\r\n        field: parsed.independentField,\r\n        inputCurrencyId: parsed[Field.INPUT].currencyId,\r\n        outputCurrencyId: parsed[Field.OUTPUT].currencyId,\r\n        recipient: null,\r\n      }),\r\n    )\r\n\r\n    setResult({ inputCurrencyId: parsed[Field.INPUT].currencyId, outputCurrencyId: parsed[Field.OUTPUT].currencyId })\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [dispatch, chainId])\r\n\r\n  return result\r\n}\r\n\r\ntype useFetchPairPricesParams = {\r\n  token0Address: string\r\n  token1Address: string\r\n  timeWindow: PairDataTimeWindowEnum\r\n  currentSwapPrice: {\r\n    [key: string]: number\r\n  }\r\n}\r\n\r\nexport const useFetchPairPrices = ({\r\n  token0Address,\r\n  token1Address,\r\n  timeWindow,\r\n  currentSwapPrice,\r\n}: useFetchPairPricesParams) => {\r\n  const [pairId, setPairId] = useState(null)\r\n  const pairData = useSelector(pairByDataIdSelector({ pairId, timeWindow }))\r\n  const derivedPairData = useSelector(derivedPairByDataIdSelector({ pairId, timeWindow }))\r\n  const dispatch = useDispatch()\r\n\r\n  useEffect(() => {\r\n    const fetchDerivedData = async () => {\r\n      console.info(\r\n        '[Price Chart]: Not possible to retrieve price data from single pool, trying to fetch derived prices',\r\n      )\r\n      try {\r\n        // Try to get at least derived data for chart\r\n        // This is used when there is no direct data for pool\r\n        // i.e. when multihops are necessary\r\n        const derivedData = await fetchDerivedPriceData(token0Address, token1Address, timeWindow)\r\n        if (derivedData) {\r\n          const normalizedDerivedData = normalizeDerivedChartData(derivedData)\r\n          dispatch(updateDerivedPairData({ pairData: normalizedDerivedData, pairId, timeWindow }))\r\n        } else {\r\n          dispatch(updateDerivedPairData({ pairData: [], pairId, timeWindow }))\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to fetch derived prices for chart', error)\r\n        dispatch(updateDerivedPairData({ pairData: [], pairId, timeWindow }))\r\n      }\r\n    }\r\n\r\n    const fetchAndUpdatePairPrice = async () => {\r\n      const { data } = await fetchPairPriceData({ pairId, timeWindow })\r\n      if (data) {\r\n        // Find out if Liquidity Pool has enough liquidity\r\n        // low liquidity pool might mean that the price is incorrect\r\n        // in that case try to get derived price\r\n        const hasEnoughLiquidity = pairHasEnoughLiquidity(data, timeWindow)\r\n        const newPairData = normalizeChartData(data, timeWindow) || []\r\n        if (newPairData.length > 0 && hasEnoughLiquidity) {\r\n          dispatch(updatePairData({ pairData: newPairData, pairId, timeWindow }))\r\n        } else {\r\n          console.info(`[Price Chart]: Liquidity too low for ${pairId}`)\r\n          dispatch(updatePairData({ pairData: [], pairId, timeWindow }))\r\n          fetchDerivedData()\r\n        }\r\n      } else {\r\n        dispatch(updatePairData({ pairData: [], pairId, timeWindow }))\r\n        fetchDerivedData()\r\n      }\r\n    }\r\n\r\n    if (!pairData && !derivedPairData && pairId) {\r\n      fetchAndUpdatePairPrice()\r\n    }\r\n  }, [pairId, timeWindow, pairData, currentSwapPrice, token0Address, token1Address, derivedPairData, dispatch])\r\n\r\n  useEffect(() => {\r\n    const updatePairId = () => {\r\n      try {\r\n        const pairAddress = getLpAddress(token0Address, token1Address)?.toLowerCase()\r\n        if (pairAddress !== pairId) {\r\n          setPairId(pairAddress)\r\n        }\r\n      } catch (error) {\r\n        setPairId(null)\r\n      }\r\n    }\r\n\r\n    updatePairId()\r\n  }, [token0Address, token1Address, pairId])\r\n\r\n  const normalizedPairData = useMemo(\r\n    () => normalizePairDataByActiveToken({ activeToken: token0Address, pairData }),\r\n    [token0Address, pairData],\r\n  )\r\n\r\n  const normalizedDerivedPairData = useMemo(\r\n    () => normalizeDerivedPairDataByActiveToken({ activeToken: token0Address, pairData: derivedPairData }),\r\n    [token0Address, derivedPairData],\r\n  )\r\n\r\n  const hasSwapPrice = currentSwapPrice && currentSwapPrice[token0Address] > 0\r\n\r\n  const normalizedPairDataWithCurrentSwapPrice =\r\n    normalizedPairData?.length > 0 && hasSwapPrice\r\n      ? [...normalizedPairData, { time: new Date(), value: currentSwapPrice[token0Address] }]\r\n      : normalizedPairData\r\n\r\n  const normalizedDerivedPairDataWithCurrentSwapPrice =\r\n    normalizedDerivedPairData?.length > 0 && hasSwapPrice\r\n      ? [...normalizedDerivedPairData, { time: new Date(), value: currentSwapPrice[token0Address] }]\r\n      : normalizedDerivedPairData\r\n\r\n  const hasNoDirectData = normalizedPairDataWithCurrentSwapPrice && normalizedPairDataWithCurrentSwapPrice?.length === 0\r\n  const hasNoDerivedData =\r\n    normalizedDerivedPairDataWithCurrentSwapPrice && normalizedDerivedPairDataWithCurrentSwapPrice?.length === 0\r\n\r\n  // undefined is used for loading\r\n  let pairPrices = hasNoDirectData && hasNoDerivedData ? [] : undefined\r\n  if (normalizedPairDataWithCurrentSwapPrice && normalizedPairDataWithCurrentSwapPrice?.length > 0) {\r\n    pairPrices = normalizedPairDataWithCurrentSwapPrice\r\n  } else if (\r\n    normalizedDerivedPairDataWithCurrentSwapPrice &&\r\n    normalizedDerivedPairDataWithCurrentSwapPrice?.length > 0\r\n  ) {\r\n    pairPrices = normalizedDerivedPairDataWithCurrentSwapPrice\r\n  }\r\n  return { pairPrices, pairId }\r\n}\r\n","import React, { useState } from 'react'\r\nimport { escapeRegExp } from 'utils'\r\nimport { Text, Button, Input, Flex, Box } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useUserSlippageTolerance, useUserTransactionTTL } from 'state/user/hooks'\r\nimport QuestionHelper from '../../QuestionHelper'\r\n\r\nenum SlippageError {\r\n  InvalidInput = 'InvalidInput',\r\n  RiskyLow = 'RiskyLow',\r\n  RiskyHigh = 'RiskyHigh',\r\n}\r\n\r\nenum DeadlineError {\r\n  InvalidInput = 'InvalidInput',\r\n}\r\n\r\nconst inputRegex = RegExp(`^\\\\d*(?:\\\\\\\\[.])?\\\\d*$`) // match escaped \".\" characters via in a non-capturing group\r\n\r\nconst SlippageTabs = () => {\r\n  const [userSlippageTolerance, setUserSlippageTolerance] = useUserSlippageTolerance()\r\n  const [ttl, setTtl] = useUserTransactionTTL()\r\n  const [slippageInput, setSlippageInput] = useState('')\r\n  const [deadlineInput, setDeadlineInput] = useState('')\r\n\r\n  const { t } = useTranslation()\r\n\r\n  const slippageInputIsValid =\r\n    slippageInput === '' || (userSlippageTolerance / 100).toFixed(2) === Number.parseFloat(slippageInput).toFixed(2)\r\n  const deadlineInputIsValid = deadlineInput === '' || (ttl / 60).toString() === deadlineInput\r\n\r\n  let slippageError: SlippageError | undefined\r\n  if (slippageInput !== '' && !slippageInputIsValid) {\r\n    slippageError = SlippageError.InvalidInput\r\n  } else if (slippageInputIsValid && userSlippageTolerance < 50) {\r\n    slippageError = SlippageError.RiskyLow\r\n  } else if (slippageInputIsValid && userSlippageTolerance > 500) {\r\n    slippageError = SlippageError.RiskyHigh\r\n  } else {\r\n    slippageError = undefined\r\n  }\r\n\r\n  let deadlineError: DeadlineError | undefined\r\n  if (deadlineInput !== '' && !deadlineInputIsValid) {\r\n    deadlineError = DeadlineError.InvalidInput\r\n  } else {\r\n    deadlineError = undefined\r\n  }\r\n\r\n  const parseCustomSlippage = (value: string) => {\r\n    if (value === '' || inputRegex.test(escapeRegExp(value))) {\r\n      setSlippageInput(value)\r\n\r\n      try {\r\n        const valueAsIntFromRoundedFloat = Number.parseInt((Number.parseFloat(value) * 100).toString())\r\n        if (!Number.isNaN(valueAsIntFromRoundedFloat) && valueAsIntFromRoundedFloat < 5000) {\r\n          setUserSlippageTolerance(valueAsIntFromRoundedFloat)\r\n        }\r\n      } catch (error) {\r\n        console.error(error)\r\n      }\r\n    }\r\n  }\r\n\r\n  const parseCustomDeadline = (value: string) => {\r\n    setDeadlineInput(value)\r\n\r\n    try {\r\n      const valueAsInt: number = Number.parseInt(value) * 60\r\n      if (!Number.isNaN(valueAsInt) && valueAsInt > 0) {\r\n        setTtl(valueAsInt)\r\n      }\r\n    } catch (error) {\r\n      console.error(error)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Flex flexDirection=\"column\">\r\n      <Flex flexDirection=\"column\" mb=\"24px\">\r\n        <Flex mb=\"12px\">\r\n          <Text>{t('Slippage Tolerance')}</Text>\r\n          <QuestionHelper\r\n            text={t(\r\n              'Setting a high slippage tolerance can help transactions succeed, but you may not get such a good price. Use with caution.',\r\n            )}\r\n            placement=\"top-start\"\r\n            ml=\"4px\"\r\n          />\r\n        </Flex>\r\n        <Flex flexWrap=\"wrap\">\r\n          <Button\r\n            mt=\"4px\"\r\n            mr=\"4px\"\r\n            scale=\"sm\"\r\n            onClick={() => {\r\n              setSlippageInput('')\r\n              setUserSlippageTolerance(10)\r\n            }}\r\n            variant={userSlippageTolerance === 10 ? 'primary' : 'tertiary'}\r\n          >\r\n            0.1%\r\n          </Button>\r\n          <Button\r\n            mt=\"4px\"\r\n            mr=\"4px\"\r\n            scale=\"sm\"\r\n            onClick={() => {\r\n              setSlippageInput('')\r\n              setUserSlippageTolerance(50)\r\n            }}\r\n            variant={userSlippageTolerance === 50 ? 'primary' : 'tertiary'}\r\n          >\r\n            0.5%\r\n          </Button>\r\n          <Button\r\n            mr=\"4px\"\r\n            mt=\"4px\"\r\n            scale=\"sm\"\r\n            onClick={() => {\r\n              setSlippageInput('')\r\n              setUserSlippageTolerance(100)\r\n            }}\r\n            variant={userSlippageTolerance === 100 ? 'primary' : 'tertiary'}\r\n          >\r\n            1.0%\r\n          </Button>\r\n          <Flex alignItems=\"center\">\r\n            <Box width=\"76px\" mt=\"4px\">\r\n              <Input\r\n                scale=\"sm\"\r\n                inputMode=\"decimal\"\r\n                pattern=\"^[0-9]*[.,]?[0-9]{0,2}$\"\r\n                placeholder={(userSlippageTolerance / 100).toFixed(2)}\r\n                value={slippageInput}\r\n                onBlur={() => {\r\n                  parseCustomSlippage((userSlippageTolerance / 100).toFixed(2))\r\n                }}\r\n                onChange={(event) => {\r\n                  if (event.currentTarget.validity.valid) {\r\n                    parseCustomSlippage(event.target.value.replace(/,/g, '.'))\r\n                  }\r\n                }}\r\n                isWarning={!slippageInputIsValid}\r\n                isSuccess={![10, 50, 100].includes(userSlippageTolerance)}\r\n              />\r\n            </Box>\r\n            <Text color=\"primary\" bold ml=\"2px\">\r\n              %\r\n            </Text>\r\n          </Flex>\r\n        </Flex>\r\n        {!!slippageError && (\r\n          <Text fontSize=\"14px\" color={slippageError === SlippageError.InvalidInput ? 'red' : '#F3841E'} mt=\"8px\">\r\n            {slippageError === SlippageError.InvalidInput\r\n              ? t('Enter a valid slippage percentage')\r\n              : slippageError === SlippageError.RiskyLow\r\n              ? t('Your transaction may fail')\r\n              : t('Your transaction may be frontrun')}\r\n          </Text>\r\n        )}\r\n      </Flex>\r\n      <Flex justifyContent=\"space-between\" alignItems=\"center\" mb=\"24px\">\r\n        <Flex alignItems=\"center\">\r\n          <Text>{t('Tx deadline (mins)')}</Text>\r\n          <QuestionHelper\r\n            text={t('Your transaction will revert if it is left confirming for longer than this time.')}\r\n            placement=\"top-start\"\r\n            ml=\"4px\"\r\n          />\r\n        </Flex>\r\n        <Flex>\r\n          <Box width=\"52px\" mt=\"4px\">\r\n            <Input\r\n              scale=\"sm\"\r\n              inputMode=\"numeric\"\r\n              pattern=\"^[0-9]+$\"\r\n              color={deadlineError ? 'red' : undefined}\r\n              onBlur={() => {\r\n                parseCustomDeadline((ttl / 60).toString())\r\n              }}\r\n              placeholder={(ttl / 60).toString()}\r\n              value={deadlineInput}\r\n              onChange={(event) => {\r\n                if (event.currentTarget.validity.valid) {\r\n                  parseCustomDeadline(event.target.value)\r\n                }\r\n              }}\r\n            />\r\n          </Box>\r\n        </Flex>\r\n      </Flex>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default SlippageTabs\r\n","import React from 'react'\r\nimport { HelpIcon, useTooltip, Box, BoxProps, Placement } from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\n\r\ninterface Props extends BoxProps {\r\n  text: string | React.ReactNode\r\n  placement?: Placement\r\n}\r\n\r\nconst QuestionWrapper = styled.div`\r\n  :hover,\r\n  :focus {\r\n    opacity: 0.7;\r\n  }\r\n`\r\n\r\nconst QuestionHelper: React.FC<Props> = ({ text, placement = 'right-end', ...props }) => {\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(text, { placement, trigger: 'hover' })\r\n\r\n  return (\r\n    <Box {...props}>\r\n      {tooltipVisible && tooltip}\r\n      <QuestionWrapper ref={targetRef}>\r\n        <HelpIcon color=\"textSubtle\" width=\"16px\" />\r\n      </QuestionWrapper>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default QuestionHelper\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Text, PancakeToggle, Toggle, Flex, Modal, InjectedModalProps, ThemeSwitcher } from '@pancakeswap/uikit'\r\nimport {\r\n  useAudioModeManager,\r\n  useExpertModeManager,\r\n  useUserExpertModeAcknowledgementShow,\r\n  useUserSingleHopOnly,\r\n} from 'state/user/hooks'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useSwapActionHandlers } from 'state/swap/hooks'\r\nimport useTheme from 'hooks/useTheme'\r\nimport QuestionHelper from '../../QuestionHelper'\r\nimport TransactionSettings from './TransactionSettings'\r\nimport ExpertModal from './ExpertModal'\r\nimport GasSettings from './GasSettings'\r\n\r\nconst ScrollableContainer = styled(Flex)`\r\n  flex-direction: column;\r\n  max-height: 400px;\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    max-height: none;\r\n  }\r\n`\r\n\r\nconst SettingsModal: React.FC<InjectedModalProps> = ({ onDismiss }) => {\r\n  const [showConfirmExpertModal, setShowConfirmExpertModal] = useState(false)\r\n  const [showExpertModeAcknowledgement, setShowExpertModeAcknowledgement] = useUserExpertModeAcknowledgementShow()\r\n  const [expertMode, toggleExpertMode] = useExpertModeManager()\r\n  const [singleHopOnly, setSingleHopOnly] = useUserSingleHopOnly()\r\n  const [audioPlay, toggleSetAudioMode] = useAudioModeManager()\r\n  const { onChangeRecipient } = useSwapActionHandlers()\r\n\r\n  const { t } = useTranslation()\r\n  const { theme, isDark, toggleTheme } = useTheme()\r\n\r\n  if (showConfirmExpertModal) {\r\n    return (\r\n      <ExpertModal\r\n        setShowConfirmExpertModal={setShowConfirmExpertModal}\r\n        onDismiss={onDismiss}\r\n        setShowExpertModeAcknowledgement={setShowExpertModeAcknowledgement}\r\n      />\r\n    )\r\n  }\r\n\r\n  const handleExpertModeToggle = () => {\r\n    if (expertMode) {\r\n      onChangeRecipient(null)\r\n      toggleExpertMode()\r\n    } else if (!showExpertModeAcknowledgement) {\r\n      onChangeRecipient(null)\r\n      toggleExpertMode()\r\n    } else {\r\n      setShowConfirmExpertModal(true)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      title={t('Settings')}\r\n      headerBackground=\"gradients.cardHeader\"\r\n      onDismiss={onDismiss}\r\n      style={{ maxWidth: '420px' }}\r\n    >\r\n      <ScrollableContainer>\r\n        <Flex pb=\"24px\" flexDirection=\"column\">\r\n          <Text bold textTransform=\"uppercase\" fontSize=\"12px\" color=\"secondary\" mb=\"24px\">\r\n            {t('Global')}\r\n          </Text>\r\n          <Flex justifyContent=\"space-between\">\r\n            <Text mb=\"24px\">{t('Dark mode')}</Text>\r\n            <ThemeSwitcher isDark={isDark} toggleTheme={toggleTheme} />\r\n          </Flex>\r\n          <GasSettings />\r\n        </Flex>\r\n        <Flex pt=\"24px\" flexDirection=\"column\" borderTop={`1px ${theme.colors.cardBorder} solid`}>\r\n          <Text bold textTransform=\"uppercase\" fontSize=\"12px\" color=\"secondary\" mb=\"24px\">\r\n            {t('Swaps & Liquidity')}\r\n          </Text>\r\n          <TransactionSettings />\r\n        </Flex>\r\n        <Flex justifyContent=\"space-between\" alignItems=\"center\" mb=\"24px\">\r\n          <Flex alignItems=\"center\">\r\n            <Text>{t('Expert Mode')}</Text>\r\n            <QuestionHelper\r\n              text={t('Bypasses confirmation modals and allows high slippage trades. Use at your own risk.')}\r\n              placement=\"top-start\"\r\n              ml=\"4px\"\r\n            />\r\n          </Flex>\r\n          <Toggle id=\"toggle-expert-mode-button\" scale=\"md\" checked={expertMode} onChange={handleExpertModeToggle} />\r\n        </Flex>\r\n        <Flex justifyContent=\"space-between\" alignItems=\"center\" mb=\"24px\">\r\n          <Flex alignItems=\"center\">\r\n            <Text>{t('Disable Multihops')}</Text>\r\n            <QuestionHelper text={t('Restricts swaps to direct pairs only.')} placement=\"top-start\" ml=\"4px\" />\r\n          </Flex>\r\n          <Toggle\r\n            id=\"toggle-disable-multihop-button\"\r\n            checked={singleHopOnly}\r\n            scale=\"md\"\r\n            onChange={() => {\r\n              setSingleHopOnly(!singleHopOnly)\r\n            }}\r\n          />\r\n        </Flex>\r\n        <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Flex alignItems=\"center\">\r\n            <Text>{t('Flippy sounds')}</Text>\r\n            <QuestionHelper\r\n              text={t('Fun sounds to make a truly immersive pancake-flipping trading experience')}\r\n              placement=\"top-start\"\r\n              ml=\"4px\"\r\n            />\r\n          </Flex>\r\n          <PancakeToggle checked={audioPlay} onChange={toggleSetAudioMode} scale=\"md\" />\r\n        </Flex>\r\n      </ScrollableContainer>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default SettingsModal\r\n","import { ConfigMenuItemsType } from './config/config'\r\n\r\nexport const getActiveMenuItem = ({ pathname, menuConfig }: { pathname: string; menuConfig: ConfigMenuItemsType[] }) =>\r\n  menuConfig.find((menuItem) => pathname.startsWith(menuItem.href) || getActiveSubMenuItem({ menuItem, pathname }))\r\n\r\nexport const getActiveSubMenuItem = ({ pathname, menuItem }: { pathname: string; menuItem?: ConfigMenuItemsType }) => {\r\n  const activeSubMenuItems = menuItem?.items.filter((subMenuItem) => pathname.startsWith(subMenuItem.href)) ?? []\r\n\r\n  // Pathname doesn't include any submenu item href - return undefined\r\n  if (!activeSubMenuItems || activeSubMenuItems.length === 0) {\r\n    return undefined\r\n  }\r\n\r\n  // Pathname includes one sub menu item href - return it\r\n  if (activeSubMenuItems.length === 1) {\r\n    return activeSubMenuItems[0]\r\n  }\r\n\r\n  // Pathname includes multiple sub menu item hrefs - find the most specific match\r\n  const mostSpecificMatch = activeSubMenuItems.sort(\r\n    (subMenuItem1, subMenuItem2) => subMenuItem2.href.length - subMenuItem1.href.length,\r\n  )[0]\r\n\r\n  return mostSpecificMatch\r\n}\r\n","import React from 'react'\r\nimport { useLocation } from 'react-router'\r\nimport { Menu as UikitMenu } from '@pancakeswap/uikit'\r\nimport { languageList } from 'config/localization/languages'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport PhishingWarningBanner from 'components/PhishingWarningBanner'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { usePriceCakeBusd } from 'state/farms/hooks'\r\nimport { usePhishingBannerManager } from 'state/user/hooks'\r\nimport config from './config/config'\r\nimport UserMenu from './UserMenu'\r\nimport GlobalSettings from './GlobalSettings'\r\nimport { getActiveMenuItem, getActiveSubMenuItem } from './utils'\r\nimport { footerLinks } from './config/footerConfig'\r\nimport styled from 'styled-components'\r\n\r\nconst MenuHolder = styled.div`\r\n  display: flex;\r\n  border-bottom: 2px solid #CCCCCC;\r\n  justify-content: space-between;\r\n  padding: 5px;\r\n  padding-top: 5px;\r\n  padding-bottom: 2px;\r\n  position: fixed;\r\n  top: 0px;\r\n  left: 0px;\r\n  right: 0px;\r\n  background: #FFF;\r\n  z-index: 10;\r\n`\r\n\r\nconst NavHolder = styled.div`\r\n  display: flex;\r\n  vertical-align: middle;\r\n  line-height: 36px;\r\n`\r\n\r\nconst NavItem = styled.a`\r\n  font-size: 14pt;\r\n  color: #000000;\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n  :hover {\r\n    color: #0c4183;\r\n  }\r\n`\r\n\r\nconst Logo = styled.a`\r\n  text-decoration: none;\r\n  height: 40px;\r\n  img {\r\n    display: block;\r\n    width: auto;\r\n    height: 40px;\r\n  }\r\n`\r\n\r\nconst Menu = (props) => {\r\n  const { isDark, toggleTheme } = useTheme()\r\n  const cakePriceUsd = usePriceCakeBusd()\r\n  const { currentLanguage, setLanguage, t } = useTranslation()\r\n  const { pathname } = useLocation()\r\n  const [showPhishingWarningBanner] = usePhishingBannerManager()\r\n\r\n  const activeMenuItem = getActiveMenuItem({ menuConfig: config(t), pathname })\r\n  const activeSubMenuItem = getActiveSubMenuItem({ menuItem: activeMenuItem, pathname })\r\n\r\n  const pageMenu = window?.SO_LotteryConfig?.menu\r\n  const logoUrl = window?.SO_LotteryConfig?.logo\r\n  \r\n  return (\r\n    <MenuHolder className={`mainMenu`}>\r\n      <NavHolder>\r\n        <Logo href=\"/\">\r\n          <img src={logoUrl} />\r\n        </Logo>\r\n        {pageMenu && (\r\n          <nav>\r\n            {pageMenu.map((menuItem) => {\r\n              return (\r\n                <NavItem href={menuItem.link} target={menuItem.blank ? `_blank` : `_self`}>{menuItem.title}</NavItem>\r\n              )\r\n            })}\r\n          </nav>\r\n        )}\r\n      </NavHolder>\r\n      <UserMenu />\r\n    </MenuHolder>\r\n  )\r\n  \r\n  return (\r\n    <UikitMenu\r\n      userMenu={<UserMenu />}\r\n      globalMenu={<GlobalSettings />}\r\n      banner={false}\r\n      isDark={isDark}\r\n      toggleTheme={toggleTheme}\r\n      currentLang={currentLanguage.code}\r\n      langs={languageList}\r\n      setLang={setLanguage}\r\n      cakePriceUsd={cakePriceUsd.toNumber()}\r\n      links={[]}\r\n      footerLinks={[]}\r\n      activeItem={activeMenuItem?.href}\r\n      activeSubItem={activeSubMenuItem?.href}\r\n      buyCakeLabel={t('Buy CAKE')}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport default Menu\r\n","import React, { useState, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { Box, Flex, Heading, Skeleton } from '@pancakeswap/uikit'\r\nimport { LotteryStatus } from 'config/constants/types'\r\nimport PageSection from 'components/PageSection'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { useFetchLottery, useLottery } from 'state/lottery/hooks'\r\nimport {\r\n  TITLE_BG,\r\n  GET_TICKETS_BG,\r\n  FINISHED_ROUNDS_BG,\r\n  FINISHED_ROUNDS_BG_DARK,\r\n  CHECK_PRIZES_BG,\r\n} from './pageSectionStyles'\r\nimport useGetNextLotteryEvent from './hooks/useGetNextLotteryEvent'\r\nimport useStatusTransitions from './hooks/useStatusTransitions'\r\nimport Hero from './components/Hero'\r\nimport NextDrawCard from './components/NextDrawCard'\r\nimport Countdown from './components/Countdown'\r\nimport HistoryTabMenu from './components/HistoryTabMenu'\r\nimport YourHistoryCard from './components/YourHistoryCard'\r\nimport AllHistoryCard from './components/AllHistoryCard'\r\nimport CheckPrizesSection from './components/CheckPrizesSection'\r\nimport HowToPlay from './components/HowToPlay'\r\nimport useShowMoreUserHistory from './hooks/useShowMoreUserRounds'\r\nimport ServiceLink from 'components/ServiceLink'\r\nimport Menu from 'components/Menu'\r\n\r\nconst LotteryPage = styled.div`\r\n  min-height: calc(100vh - 64px);\r\n`\r\n\r\nconst Lottery = () => {\r\n  useFetchLottery()\r\n  useStatusTransitions()\r\n  const { t } = useTranslation()\r\n  const { isDark, theme } = useTheme()\r\n  const {\r\n    currentRound: { status, endTime },\r\n  } = useLottery()\r\n  const [historyTabMenuIndex, setHistoryTabMenuIndex] = useState(0)\r\n  const showServiceLink = !window?.SO_LotteryConfig?.hideServiceLink\r\n\r\n  const endTimeAsInt = parseInt(endTime, 10)\r\n  const { nextEventTime, postCountdownText, preCountdownText } = useGetNextLotteryEvent(endTimeAsInt, status)\r\n  const { numUserRoundsRequested, handleShowMoreUserRounds } = useShowMoreUserHistory()\r\n\r\n  \r\n  return (\r\n    <LotteryPage>\r\n      <Menu />\r\n      <PageSection className={`lotteryHeader`} background={TITLE_BG} index={1} hasCurvedDivider={false}>\r\n        <Hero />\r\n      </PageSection>\r\n      <PageSection\r\n        className={`buyTicketHolder`}\r\n        containerProps={{ style: { marginTop: '-30px' } }}\r\n        background={GET_TICKETS_BG}\r\n        concaveDivider\r\n        clipFill={{ light: '#7645D9' }}\r\n        dividerPosition=\"top\"\r\n        index={2}\r\n      >\r\n        <Flex alignItems=\"center\" justifyContent=\"center\" flexDirection=\"column\" pt=\"24px\">\r\n          {status === LotteryStatus.OPEN && (\r\n            <Heading scale=\"xl\" color=\"#ffffff\" mb=\"24px\" textAlign=\"center\">\r\n              {t('Get your tickets now!')}\r\n            </Heading>\r\n          )}\r\n          <Flex alignItems=\"center\" justifyContent=\"center\" mb=\"48px\">\r\n            {nextEventTime && (postCountdownText || preCountdownText) ? (\r\n              <Countdown\r\n                nextEventTime={nextEventTime}\r\n                postCountdownText={postCountdownText}\r\n                preCountdownText={preCountdownText}\r\n              />\r\n            ) : (\r\n              <Skeleton height=\"41px\" width=\"250px\" />\r\n            )}\r\n          </Flex>\r\n          <NextDrawCard />\r\n          { showServiceLink && <ServiceLink /> }\r\n        </Flex>\r\n      </PageSection>\r\n      <PageSection className={`pricesSection`} background={CHECK_PRIZES_BG} hasCurvedDivider={false} index={2}>\r\n        <CheckPrizesSection />\r\n      </PageSection>\r\n      <PageSection\r\n        className={`roundsHistory`}\r\n        innerProps={{ style: { margin: '0', width: '100%', paddingLeft: '0px', paddingRight: '0px' } }}\r\n        background={isDark ? FINISHED_ROUNDS_BG_DARK : FINISHED_ROUNDS_BG}\r\n        hasCurvedDivider={false}\r\n        index={2}\r\n      >\r\n        <Flex width=\"100%\" flexDirection=\"column\" alignItems=\"center\" justifyContent=\"center\">\r\n          <Heading mb=\"24px\" scale=\"xl\">\r\n            {t('Finished Rounds')}\r\n          </Heading>\r\n          <Box mb=\"24px\">\r\n            <HistoryTabMenu\r\n              activeIndex={historyTabMenuIndex}\r\n              setActiveIndex={(index) => setHistoryTabMenuIndex(index)}\r\n            />\r\n          </Box>\r\n          {historyTabMenuIndex === 0 ? (\r\n            <AllHistoryCard />\r\n          ) : (\r\n            <YourHistoryCard\r\n              handleShowMoreClick={handleShowMoreUserRounds}\r\n              numUserRoundsRequested={numUserRoundsRequested}\r\n            />\r\n          )}\r\n        </Flex>\r\n      </PageSection>\r\n      <PageSection\r\n        className={`howToPlay`}\r\n        dividerPosition=\"top\"\r\n        dividerFill={{ light: theme.colors.background }}\r\n        clipFill={{ light: '#9A9FD0', dark: '#66578D' }}\r\n        index={2}\r\n      >\r\n        <HowToPlay />\r\n      </PageSection>\r\n    </LotteryPage>\r\n  )\r\n}\r\n\r\nexport default Lottery\r\n","export const TITLE_BG = 'linear-gradient(180deg, #7645D9 0%, #452A7A 100%)'\r\nexport const GET_TICKETS_BG = 'linear-gradient(180deg, #7645D9 0%, #5121B1 100%)'\r\nexport const CHECK_PRIZES_BG = 'linear-gradient(139.73deg, #313D5C 0%, #3D2A54 100%)'\r\nexport const FINISHED_ROUNDS_BG = 'linear-gradient(180deg, #CBD7EF 0%, #9A9FD0 100%)'\r\nexport const FINISHED_ROUNDS_BG_DARK = 'linear-gradient(180deg, #434575 0%, #66578D 100%)'\r\n"],"sourceRoot":""}